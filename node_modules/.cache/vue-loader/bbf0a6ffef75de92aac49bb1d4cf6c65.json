{"remainingRequest":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jenkins_data/workspace/页面-公证处后台/src/components/entryTab/documentMaterial.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jenkins_data/workspace/页面-公证处后台/src/components/entryTab/documentMaterial.vue","mtime":1634724784694},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgZ2V0RG9jdW1lbnRNYXRlcmlhbExpc3QsCiAgRGVsZXRlV3JpdE1hdGVyaWFscywKICBnZXRFbnRyeURhdGVpbAp9IGZyb20gJy4uLy4uL2FwaS9jbG91ZE1haWwnCmltcG9ydCBzaWduRmlsZSBmcm9tICdAL2NvbXBvbmVudHMvZW50cnlUYWIvdXBsb2FkRmlsZScKaW1wb3J0ICogYXMgZGUgZnJvbSAnQC9hcGkvZGVsZWdhdGUnCgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogeyBzaWduRmlsZSB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtTGFiZWxBbGlnbjogewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIHR5cGU6ICcnCiAgICAgIH0sCiAgICAgIGRvY3VtZW50TWF0ZXJpYWxUYWJsZURhdGE6IFtdLAogICAgICBmaWxlU2hvd0xpc3REYXRhOiBbXSwKICAgICAgY3VycmVudFBhZ2UzOiAxLAogICAgICBwYWdlU2l6ZTogMTAsCiAgICAgIHRvdGFsOiAxMDAsCiAgICAgIHVwbG9hZE1hdGVyaWFsRGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGh0dHA6ICcnLAogICAgICBvcmRlcklkOiAnJywKICAgICAgaWZyYW1lU3RhOiBmYWxzZSwKICAgICAgc3RhRGF0YToge30sCiAgICAgIGZpbGVTaWduTGlzdDogW10sCiAgICAgIGRvY0luZm86IHt9LAogICAgICBzaWduQm94U2hvdzogZmFsc2UsCiAgICAgIGZsaWVMaXN0OiBbXSwKICAgICAgdXBGaWxlTGlzdDogW10sCiAgICAgIGp1cmlzZGljdGlvbjogZmFsc2UsCiAgICAgIHR5cGU6ICcnLAogICAgICBmaWxlU2hvdzogW10KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICBpZiAodGhpcy4kcm91dGUucXVlcnkub3JkZXJJZCkgewogICAgICB0aGlzLm9yZGVySWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5vcmRlcklkCiAgICB9IGVsc2UgewogICAgICB0aGlzLm9yZGVySWQgPSB0aGlzLiRzdG9yZS5zdGF0ZS5hcHAub3JkZXJJZAogICAgICB2YXIgdXJsID0gYC8jJHt0aGlzLiRyb3V0ZS5wYXRofT9vcmRlcklkPSR7dGhpcy5vcmRlcklkfWAKICAgICAgaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgdXJsKQogICAgfQogICAgdmFyIGRhdGEgPSB7CiAgICAgIHBhZ2VOdW06IHRoaXMuY3VycmVudFBhZ2UzLAogICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZSwKICAgICAgb3JkZXJJZDogdGhpcy5vcmRlcklkCiAgICB9CiAgICB0aGlzLmdldExpc3QoZGF0YSkKICAgIHRoaXMuanVyaXNkaWN0aW9uID0gdGhpcy4kcGFyZW50LiRwYXJlbnQuJHBhcmVudC5qdXJpc2RpY3Rpb24KICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXQoKSB7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIG9yZGVySWQ6IHRoaXMub3JkZXJJZAogICAgICB9CiAgICAgIHRoaXMuZ2V0TGlzdChkYXRhKQogICAgICAvLyB0aGlzLmdldE9yZGVySW5mbygpCiAgICAgIHRoaXMuc2lnbkJveFNob3cgPSBmYWxzZQogICAgICB0aGlzLnVwbG9hZE1hdGVyaWFsRGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICB9LAogICAgZ2V0TGlzdChkYXRhKSB7CiAgICAgIGdldERvY3VtZW50TWF0ZXJpYWxMaXN0KGRhdGEpLnRoZW4oKHJlcykgPT4gewogICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCByZXMuZGF0YS5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgIGlmIChyZXMuZGF0YVtpbmRleF0uYWZ0ZXJTaWduRmlsZSAhPT0gbnVsbCkgewogICAgICAgICAgICByZXMuZGF0YVtpbmRleF0uYWZ0ZXJTaWduRmlsZSA9IEpTT04ucGFyc2UocmVzLmRhdGFbaW5kZXhdLmFmdGVyU2lnbkZpbGUpCiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB0aGlzLmRvY3VtZW50TWF0ZXJpYWxUYWJsZURhdGEgPSByZXMuZGF0YQogICAgICAgIHRoaXMudG90YWwgPSByZXMuZGF0YS50b3RhbAogICAgICAgIGdldEVudHJ5RGF0ZWlsKGRhdGEpLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy5zdGFEYXRhID0gcmVzLmRhdGEKICAgICAgICB9KQogICAgICB9KQogICAgfSwKICAgIGhhbmRsZVNpemVDaGFuZ2UoKSB7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIHBhZ2VOdW06IHRoaXMuY3VycmVudFBhZ2UzLAogICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLAogICAgICAgIG9yZGVySWQ6IHRoaXMub3JkZXJJZAogICAgICB9CiAgICAgIHRoaXMuZ2V0TGlzdChkYXRhKQogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UoKSB7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIHBhZ2VOdW06IHRoaXMuY3VycmVudFBhZ2UzLAogICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLAogICAgICAgIG9yZGVySWQ6IHRoaXMub3JkZXJJZAogICAgICB9CiAgICAgIHRoaXMuZ2V0TGlzdChkYXRhKQogICAgfSwKICAgIHVwbG9hZE1hdGVyaWFsKCkgewogICAgICB0aGlzLnVwbG9hZE1hdGVyaWFsRGlhbG9nVmlzaWJsZSA9IHRydWUKICAgICAgdGhpcy5maWxlU2hvd0xpc3REYXRhID0gW10KICAgICAgdGhpcy5maWxlU2hvdyA9IFtdCiAgICB9LAogICAgZWRpdERvY3VtZW50KHZhbCkgewogICAgICB0aGlzLmlmcmFtZVN0YSA9IHRydWUKICAgICAgY29uc3QgbW9kZSA9IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9NT0RFCiAgICAgIGlmIChtb2RlID09PSAnZGV2ZWxvcG1lbnQnKSB7CiAgICAgICAgdGhpcy5odHRwID0gJ2h0dHA6Ly8xOTIuMTY4LjEuMTg2OjEyMDA5JwogICAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICd0ZXN0JykgewogICAgICAgIHRoaXMuaHR0cCA9ICdodHRwczovL3Rlc3Qtb25seW9mZmljZS5sdnpoZW5neXVuLmNuJwogICAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICdwcm9kdWN0aW9uJykgewogICAgICAgIHRoaXMuaHR0cCA9ICdodHRwczovL29mZmljZS5sdnpoZW5neXVuLmNuJwogICAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICdzdGFnaW5nJykgewogICAgICAgIHRoaXMuaHR0cCA9ICdodHRwczovL3Rlc3Qtb25seW9mZmljZS5sdnpoZW5neXVuLmNuJwogICAgICB9CiAgICAgIHdpbmRvdy5vcGVuKGAke3RoaXMuaHR0cH0vcGFnZS9nby1vcGVuLW9yZGVyLWRvY21lbnQvJHt2YWwub3JkZXJJZH0vJHt2YWwuaWR9YCwgJ3Rlc3QnKQogICAgICAvLyB3aW5kb3cub3BlbigKICAgICAgLy8gICBgaHR0cHM6Ly90ZXN0LW9ubHlvZmZpY2UubHZ6aGVuZ3l1bi5jbi9wYWdlL2dvLW9wZW4tb3JkZXItZG9jbWVudC8ke3ZhbC5vcmRlcklkfS8ke3ZhbC5pZH1gLAogICAgICAvLyAgICd0ZXN0JwogICAgICAvLyApCiAgICB9LAogICAgc2luZ2xlRG93bmxvYWQodmFsKSB7CiAgICAgIHZhciBmaWxlTmFtZSA9ICcnCiAgICAgIGlmICh2YWwuYWZ0ZXJTaWduRmlsZSAhPSBudWxsKSB7CiAgICAgICAgZmlsZU5hbWUgPSB2YWwuYWZ0ZXJTaWduRmlsZS5vcmlnaW5hbEZpbGVuYW1lCiAgICAgIH0gZWxzZSB7CiAgICAgICAgZmlsZU5hbWUgPSBKU09OLnBhcnNlKHZhbC5iZWZvcmVTaWduRmlsZSkub3JpZ2luYWxGaWxlbmFtZQogICAgICB9CiAgICAgIHZhciBkb3dubG9hZFR5cGUgPSAxCiAgICAgIHRoaXMuJGF4aW9zKAogICAgICAgICdvcmcvZG93bmxvYWQtbWF0ZXJpYWwnLAogICAgICAgIHsgb3JkZXJJZDogdGhpcy5vcmRlcklkLCBkb2N1bWVudElkOiB2YWwuaWQsIGRvd25sb2FkVHlwZTogZG93bmxvYWRUeXBlIH0sCiAgICAgICAgeyByZXNwb25zZVR5cGU6ICdibG9iJyB9CiAgICAgICkudGhlbigoYmxvYikgPT4gewogICAgICAgIHRoaXMuc2F2ZUFzKGJsb2IsIGZpbGVOYW1lKQogICAgICB9KQogICAgfSwKICAgIGRlbGV0ZU1hdGVyaWFscyh2YWwpIHsKICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l5paH5Lu2LCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgRGVsZXRlV3JpdE1hdGVyaWFscyh7IGlkOiB2YWwuaWQgfSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgIHRoaXMuaW5pdCgpCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5paH5Lu25bey5Yig6ZmkJywKICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWIoOmZpCcKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgIH0sCiAgICBzYXZlQXMoYmxvYiwgZmlsZU5hbWUpIHsKICAgICAgaWYgKHdpbmRvdy5uYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYikgewogICAgICAgIG5hdmlnYXRvci5tc1NhdmVCbG9iKGJsb2IsIGZpbGVOYW1lKQogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJykKICAgICAgICBjb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpCgogICAgICAgIGxpbmsuaHJlZiA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpIC8vIOWIm+W7uuWvueixoXVybAogICAgICAgIGxpbmsuZG93bmxvYWQgPSBmaWxlTmFtZQoKICAgICAgICAvLyBmaXggRmlyZWZveAogICAgICAgIGxpbmsuc3R5bGUuZGlzcGxheSA9ICdub25lJwogICAgICAgIGJvZHkuYXBwZW5kQ2hpbGQobGluaykKCiAgICAgICAgbGluay5jbGljaygpCiAgICAgICAgYm9keS5yZW1vdmVDaGlsZChsaW5rKQoKICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTChsaW5rLmhyZWYpIC8vIOmAmui/h+iwg+eUqCBVUkwuY3JlYXRlT2JqZWN0VVJMKCkg5Yib5bu655qEIFVSTCDlr7nosaEKICAgICAgfQogICAgfSwKICAgIGFsbERvd25sb2FkKCkgewogICAgICBpZiAodGhpcy5kb2N1bWVudE1hdGVyaWFsVGFibGVEYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICB2YXIgZG93bmxvYWRUeXBlID0gMQogICAgICAgIHZhciBhbGxEb2N1bWVudCA9ICcnCiAgICAgICAgZm9yICgKICAgICAgICAgIGxldCBpbmRleCA9IDA7CiAgICAgICAgICBpbmRleCA8IHRoaXMuZG9jdW1lbnRNYXRlcmlhbFRhYmxlRGF0YS5sZW5ndGg7CiAgICAgICAgICBpbmRleCsrCiAgICAgICAgKSB7CiAgICAgICAgICBhbGxEb2N1bWVudCArPSB0aGlzLmRvY3VtZW50TWF0ZXJpYWxUYWJsZURhdGFbaW5kZXhdLmlkICsgJywnCiAgICAgICAgfQogICAgICAgIGFsbERvY3VtZW50ID0gYWxsRG9jdW1lbnQuc3Vic3RyaW5nKDAsIGFsbERvY3VtZW50Lmxlbmd0aCAtIDEpCiAgICAgICAgdmFyIGZpbGVOYW1lID0gYWxsRG9jdW1lbnQuaW5kZXhPZignLCcpICE9PSAtMSA/IGAke3RoaXMuc3RhRGF0YS5idXNpbmVzc1R5cGVEZXNjfSR7dGhpcy5zdGFEYXRhLm9yZGVyTnVtfSAke3RoaXMuZ2V0VGltZSgpfS56aXBgIDogdGhpcy5kb2N1bWVudE1hdGVyaWFsVGFibGVEYXRhWzBdLm9yaWdpbmFsRmlsZW5hbWUKICAgICAgICB0aGlzLiRheGlvcygKICAgICAgICAgICdvcmcvZG93bmxvYWQtbWF0ZXJpYWwnLAogICAgICAgICAgeyBvcmRlcklkOiB0aGlzLm9yZGVySWQsIGRvY3VtZW50SWQ6IGFsbERvY3VtZW50LCBkb3dubG9hZFR5cGUgfSwKICAgICAgICAgIHsgcmVzcG9uc2VUeXBlOiAnYmxvYicgfQogICAgICAgICkudGhlbigoYmxvYikgPT4gewogICAgICAgICAgdGhpcy5zYXZlQXMoYmxvYiwgZmlsZU5hbWUpCiAgICAgICAgfSkKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmsqHmnInlj6/kuIvovb3nmoTmlofkuaYnKQogICAgICB9CiAgICB9LAogICAgZ2V0VGltZSgpIHsKICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCkKCiAgICAgIGNvbnN0IHNlcGVyYXRvcjEgPSAnLicgLy8g5bm05pyI5pel5LmL6Ze055qE5YiG6ZqUCgogICAgICBjb25zdCBzZXBlcmF0b3IyID0gJzonIC8vIOaXtuWIhuenkuS5i+mXtOeahOWIhumalAoKICAgICAgY29uc3QgbW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxIDwgMTAgPyAnMCcgKyAoZGF0ZS5nZXRNb250aCgpICsgMSkgOiBkYXRlLmdldE1vbnRoKCkgKyAxIC8vIOiOt+WPluaciCzlpoLmnpzlsI/kuo4xMCzliY3pnaLooaXkuKowCgogICAgICBjb25zdCBzdHJEYXRlID0gZGF0ZS5nZXREYXRlKCkgPCAxMCA/ICcwJyArIGRhdGUuZ2V0RGF0ZSgpIDogZGF0ZS5nZXREYXRlKCkgLy8g6I635Y+W5pelLOWmguaenOWwj+S6jjEwLOWJjemdouihpeS4qjAKCiAgICAgIGNvbnN0IHN0ckhvdXJzID0gZGF0ZS5nZXRIb3VycygpIDwgMTAgPyAnMCcgKyBkYXRlLmdldEhvdXJzKCkgOiBkYXRlLmdldEhvdXJzKCkgLy8g6I635Y+W5bCP5pe2LOWmguaenOWwj+S6jjEwLOWJjemdouihpeS4qjAKCiAgICAgIGNvbnN0IHN0ck1pbnV0ZXMgPSBkYXRlLmdldE1pbnV0ZXMoKSA8IDEwID8gJzAnICsgZGF0ZS5nZXRNaW51dGVzKCkgOiBkYXRlLmdldE1pbnV0ZXMoKSAvLyDojrflj5bliIYs5aaC5p6c5bCP5LqOMTAs5YmN6Z2i6KGl5LiqMAoKICAgICAgY29uc3Qgc3RyU2Vjb25kcyA9IGRhdGUuZ2V0U2Vjb25kcygpIDwgMTAgPyAnMCcgKyBkYXRlLmdldFNlY29uZHMoKSA6IGRhdGUuZ2V0U2Vjb25kcygpIC8vIOiOt+WPluenkizlpoLmnpzlsI/kuo4xMCzliY3pnaLooaXkuKowCgogICAgICBjb25zdCBjdXJyZW50ZGF0ZSA9IGRhdGUuZ2V0RnVsbFllYXIoKSArIHNlcGVyYXRvcjEgKyBtb250aCArIHNlcGVyYXRvcjEgKyBzdHJEYXRlICsgJyAnICsgc3RySG91cnMgKyBzZXBlcmF0b3IyICsgc3RyTWludXRlcyArIHNlcGVyYXRvcjIgKyBzdHJTZWNvbmRzIC8vIOaLvOaOpeS4gOS4iwoKICAgICAgcmV0dXJuIGN1cnJlbnRkYXRlIC8vIOi/lOWbngogICAgfSwKCiAgICBwcmV2aWV3RmlsZShlKSB7CiAgICAgIGRlLmdldEZpbGVJbWcoeyBpZDogZS5pZCB9KS50aGVuKGFzeW5jKHJlcykgPT4gewogICAgICAgIGlmIChyZXMuZGF0YS5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgICBjb25zdCBsaXN0ID0gcmVzLmRhdGEuZGF0YS5pZHMKICAgICAgICAgIGZvciAoY29uc3QgaSBpbiBsaXN0KSB7CiAgICAgICAgICAgIGNvbnN0IGltZ1VybCA9IGF3YWl0IHRoaXMuZ2V0SW1nKGxpc3RbaV0sIDEpCiAgICAgICAgICAgIGxpc3RbaV0gPSBpbWdVcmwKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnYXBwL0NIQU5HRV9JTUFHRScsIGxpc3QpCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGFzeW5jIGdldEltZyhpZCwgdHlwZSkgewogICAgICBjb25zdCB1cmwgPQogICAgICAgIHR5cGUgPT09IDEKICAgICAgICAgID8gYG9yZy9vcmRlci1kb2N1bWVudC1wcmV2aWV3LWltZy8ke2lkfWAKICAgICAgICAgIDogYG9yZy9vcmRlci1wcm9wb3Nlci1tYXRlcmlhbC1wcmV2aWV3LWltZz9pZD0ke2lkfWAKICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuJGF4aW9zKHVybCkudGhlbihhc3luYyhyZXMpID0+IHsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIHJldHVybiAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LCcgKyByZXMuZGF0YQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBnZXRGaWxlVHlwZShmaWxlTmFtZSkgewogICAgICAvLyDlkI7nvIDojrflj5YKICAgICAgbGV0IHN1ZmZpeCA9ICcnCiAgICAgIC8vIOiOt+WPluexu+Wei+e7k+aenAogICAgICBsZXQgcmVzdWx0ID0gJycKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBmbGllQXJyID0gZmlsZU5hbWUuc3BsaXQoJy4nKQogICAgICAgIHN1ZmZpeCA9IGZsaWVBcnJbZmxpZUFyci5sZW5ndGggLSAxXQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBzdWZmaXggPSAnJwogICAgICB9CiAgICAgIC8vIGZpbGVOYW1l5peg5ZCO57yA6L+U5ZueIGZhbHNlCiAgICAgIGlmICghc3VmZml4KSB7CiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgICAgc3VmZml4ID0gc3VmZml4LnRvTG9jYWxlTG93ZXJDYXNlKCkKICAgICAgLy8g5Zu+54mH5qC85byPCiAgICAgIGNvbnN0IGltZ2xpc3QgPSBbJ3BuZycsICdqcGcnLCAnanBlZycsICdibXAnLCAnZ2lmJ10KICAgICAgLy8g6L+b6KGM5Zu+54mH5Yy56YWNCiAgICAgIHJlc3VsdCA9IGltZ2xpc3QuZmluZCgoaXRlbSkgPT4gaXRlbSA9PT0gc3VmZml4KQogICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgcmV0dXJuICdpbWFnZScKICAgICAgfQogICAgICAvLyDljLnphY10eHQKICAgICAgY29uc3QgdHh0bGlzdCA9IFsndHh0J10KICAgICAgcmVzdWx0ID0gdHh0bGlzdC5maW5kKChpdGVtKSA9PiBpdGVtID09PSBzdWZmaXgpCiAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICByZXR1cm4gJ3R4dCcKICAgICAgfQogICAgICAvLyDljLnphY0gZXhjZWwKICAgICAgY29uc3QgZXhjZWxpc3QgPSBbJ3hscycsICd4bHN4J10KICAgICAgcmVzdWx0ID0gZXhjZWxpc3QuZmluZCgoaXRlbSkgPT4gaXRlbSA9PT0gc3VmZml4KQogICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgcmV0dXJuICdleGNlbCcKICAgICAgfQogICAgICAvLyDljLnphY0gd29yZAogICAgICBjb25zdCB3b3JkbGlzdCA9IFsnZG9jJywgJ2RvY3gnXQogICAgICByZXN1bHQgPSB3b3JkbGlzdC5maW5kKChpdGVtKSA9PiBpdGVtID09PSBzdWZmaXgpCiAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICByZXR1cm4gJ3dvcmQnCiAgICAgIH0KICAgICAgLy8g5Yy56YWNIHBkZgogICAgICBjb25zdCBwZGZsaXN0ID0gWydwZGYnXQogICAgICByZXN1bHQgPSBwZGZsaXN0LmZpbmQoKGl0ZW0pID0+IGl0ZW0gPT09IHN1ZmZpeCkKICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgIHJldHVybiAncGRmJwogICAgICB9CiAgICAgIC8vIOWMuemFjSBwcHQKICAgICAgY29uc3QgcHB0bGlzdCA9IFsncHB0JywgJ3BwdHgnXQogICAgICByZXN1bHQgPSBwcHRsaXN0LmZpbmQoKGl0ZW0pID0+IGl0ZW0gPT09IHN1ZmZpeCkKICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgIHJldHVybiAncHB0JwogICAgICB9CiAgICAgIC8vIOWMuemFjSDop4bpopEKICAgICAgY29uc3QgdmlkZW9saXN0ID0gWwogICAgICAgICdtcDQnLAogICAgICAgICdtMnYnLAogICAgICAgICdta3YnLAogICAgICAgICdybXZiJywKICAgICAgICAnd212JywKICAgICAgICAnYXZpJywKICAgICAgICAnZmx2JywKICAgICAgICAnbW92JywKICAgICAgICAnbTR2JwogICAgICBdCiAgICAgIHJlc3VsdCA9IHZpZGVvbGlzdC5maW5kKChpdGVtKSA9PiBpdGVtID09PSBzdWZmaXgpCiAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICByZXR1cm4gJ3ZpZGVvJwogICAgICB9CiAgICAgIC8vIOWMuemFjSDpn7PpopEKICAgICAgY29uc3QgcmFkaW9saXN0ID0gWydtcDMnLCAnd2F2JywgJ3dtdiddCiAgICAgIHJlc3VsdCA9IHJhZGlvbGlzdC5maW5kKChpdGVtKSA9PiBpdGVtID09PSBzdWZmaXgpCiAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICByZXR1cm4gJ3JhZGlvJwogICAgICB9CiAgICAgIC8vIOWFtuS7liDmlofku7bnsbvlnosKICAgICAgcmV0dXJuICdvdGhlcicKICAgIH0sCiAgICBwcmV2aWV3UGFydE1hdGVyaWFsKCkgewogICAgICB0aGlzLnNlbGVjdFByZXZpZXcoMSkKICAgIH0sCiAgICBwcmV2aWV3QWxsTWF0ZXJpYWwoKSB7CiAgICAgIHRoaXMuc2VsZWN0UHJldmlldygwKQogICAgfSwKICAgIHNlbGVjdFByZXZpZXcodmFsKSB7CiAgICAgIGlmICh0aGlzLmRvY3VtZW50TWF0ZXJpYWxUYWJsZURhdGEubGVuZ3RoID4gMCkgewogICAgICAgIHZhciBhcnJheSA9IHRoaXMuZG9jdW1lbnRNYXRlcmlhbFRhYmxlRGF0YQogICAgICAgIHZhciBsaXN0ID0gW10KICAgICAgICB2YXIgcHJldmlld0ltYWdlID0gW10KICAgICAgICBpZiAodmFsID09PSAxKSB7CiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYXJyYXkubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICAgIGlmIChhcnJheVtpbmRleF0uc2lnblN0YXR1cyA9PT0gMSkgewogICAgICAgICAgICAgIGxpc3QucHVzaChhcnJheVtpbmRleF0pCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgbGlzdCA9IHRoaXMuZG9jdW1lbnRNYXRlcmlhbFRhYmxlRGF0YQogICAgICAgIH0KICAgICAgICBpZiAobGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgbGlzdC5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgZGUuZ2V0RmlsZUltZyh7IGlkOiBsaXN0W2luZGV4XS5pZCB9KS50aGVuKGFzeW5jKHJlcykgPT4gewogICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICBjb25zdCBpbWFnbExpc3QgPSByZXMuZGF0YS5kYXRhLmlkcwoKICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaSBpbiBpbWFnbExpc3QpIHsKICAgICAgICAgICAgICAgICAgY29uc3QgaW1nVXJsID0gYXdhaXQgdGhpcy5nZXRJbWcoaW1hZ2xMaXN0W2ldLCAxKQogICAgICAgICAgICAgICAgICBwcmV2aWV3SW1hZ2UucHVzaChpbWdVcmwpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnYXBwL0NIQU5HRV9JTUFHRScsIHByZXZpZXdJbWFnZSkKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5rKh5pyJ5Y+v6aKE6KeI55qE5paH5LmmJykKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5rKh5pyJ5Y+v6aKE6KeI55qE5paH5LmmJykKICAgICAgfQogICAgfSwKICAgIHNldFNpZ25hdHVyZShlKSB7CiAgICAgIGRlLmdldEVudHJ1c3RJbmZvKHsgb3JkZXJJZDogdGhpcy5vcmRlcklkIH0pLnRoZW4oYXN5bmMocmVzKSA9PiB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICBjb25zdCBmbGllTGlzdCA9IFtdCiAgICAgICAgICBjb25zdCBmaWxlU2lnbkxpc3QgPSBbXQogICAgICAgICAgZm9yIChjb25zdCBpIG9mIHJlcy5kYXRhLmFubmV4RFRPTGlzdCkgewogICAgICAgICAgICBmbGllTGlzdC5wdXNoKHsKICAgICAgICAgICAgICBuYW1lOiBpLm9yaWdpbkZpbGVOYW1lLAogICAgICAgICAgICAgIHVybDogaS5maWxlTmFtZQogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCiAgICAgICAgICBmb3IgKGNvbnN0IFtpbmRleCwgal0gb2YgcmVzLmRhdGEuZW50cnVzdExpc3QuZW50cmllcygpKSB7CiAgICAgICAgICAgIGZpbGVTaWduTGlzdC5wdXNoKHsKICAgICAgICAgICAgICByZWFsTmFtZTogai5yZWFsTmFtZSwKICAgICAgICAgICAgICBwcm9wb3NlcklkOiBqLmlkLAogICAgICAgICAgICAgIGxvd0xlZnRYOiAwLAogICAgICAgICAgICAgIGxvd0xlZnRZOiAwLAogICAgICAgICAgICAgIG9yZGVySWQ6IHRoaXMub3JkZXJJZCwKICAgICAgICAgICAgICBvcmRlckRvY3VtZW50SWQ6ICcnLAogICAgICAgICAgICAgIHBhZ2U6ICcnLAogICAgICAgICAgICAgIGNvdmVyVHlwZTogMgogICAgICAgICAgICB9KQogICAgICAgICAgICAvLyBqLmVkaXQgPSBmYWxzZTsKICAgICAgICAgICAgLy8gai5nZW5kZXIgPSBqLmdlbmRlciArICIiOwogICAgICAgICAgICAvLyBmb3IgKGxldCBpIG9mIGoubWF0ZXJpYWxMaXN0KSB7CiAgICAgICAgICAgIC8vICAgaS51cmwgPSBhd2FpdCB0aGlzLmdldEltZyhpLmlkLCAyKTsKICAgICAgICAgICAgLy8gfQogICAgICAgICAgfQogICAgICAgICAgdGhpcy5mbGllTGlzdCA9IGZsaWVMaXN0CiAgICAgICAgICB0aGlzLmZpbGVTaWduTGlzdCA9IGZpbGVTaWduTGlzdAogICAgICAgICAgLy8gdGhpcy5lbnRydXN0SW5mbyA9IHJlcy5kYXRhOwogICAgICAgICAgdGhpcy5kb2NJbmZvID0gewogICAgICAgICAgICBkb2NJZDogZS5pZCwKICAgICAgICAgICAgZG9jTmFtZTogZS5vcmlnaW5hbEZpbGVuYW1lLAogICAgICAgICAgICBzaWduU3RhdHVzOiBlLnNpZ25TdGF0dXMKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgYWxsU2V0RGlzdHJpY3QoKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZG9jdW1lbnRNYXRlcmlhbFRhYmxlRGF0YSk7CiAgICAgIGlmICh0aGlzLmRvY3VtZW50TWF0ZXJpYWxUYWJsZURhdGEubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMuZG9jSW5mbyA9IFtdCiAgICAgICAgZGUuZ2V0RW50cnVzdEluZm8oeyBvcmRlcklkOiB0aGlzLm9yZGVySWQgfSkudGhlbihhc3luYyhyZXMpID0+IHsKICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICBjb25zdCBmbGllTGlzdCA9IFtdCiAgICAgICAgICAgIGNvbnN0IGZpbGVTaWduTGlzdCA9IFtdCiAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiByZXMuZGF0YS5hbm5leERUT0xpc3QpIHsKICAgICAgICAgICAgICBmbGllTGlzdC5wdXNoKHsKICAgICAgICAgICAgICAgIG5hbWU6IGkub3JpZ2luRmlsZU5hbWUsCiAgICAgICAgICAgICAgICB1cmw6IGkuZmlsZU5hbWUKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwogICAgICAgICAgICBmb3IgKGNvbnN0IFtpbmRleCwgal0gb2YgcmVzLmRhdGEuZW50cnVzdExpc3QuZW50cmllcygpKSB7CiAgICAgICAgICAgICAgZmlsZVNpZ25MaXN0LnB1c2goewogICAgICAgICAgICAgICAgcmVhbE5hbWU6IGoucmVhbE5hbWUsCiAgICAgICAgICAgICAgICBwcm9wb3NlcklkOiBqLmlkLAogICAgICAgICAgICAgICAgbG93TGVmdFg6IDAsCiAgICAgICAgICAgICAgICBsb3dMZWZ0WTogMCwKICAgICAgICAgICAgICAgIG9yZGVySWQ6IHRoaXMub3JkZXJJZCwKICAgICAgICAgICAgICAgIG9yZGVyRG9jdW1lbnRJZDogJycsCiAgICAgICAgICAgICAgICBwYWdlOiAnJywKICAgICAgICAgICAgICAgIGNvdmVyVHlwZTogMgogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5mbGllTGlzdCA9IGZsaWVMaXN0CiAgICAgICAgICAgIHRoaXMuZmlsZVNpZ25MaXN0ID0gZmlsZVNpZ25MaXN0CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICBmb3IgKAogICAgICAgICAgbGV0IGluZGV4ID0gMDsKICAgICAgICAgIGluZGV4IDwgdGhpcy5kb2N1bWVudE1hdGVyaWFsVGFibGVEYXRhLmxlbmd0aDsKICAgICAgICAgIGluZGV4KysKICAgICAgICApIHsKICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICBkb2NJZDogdGhpcy5kb2N1bWVudE1hdGVyaWFsVGFibGVEYXRhW2luZGV4XS5pZCwKICAgICAgICAgICAgZG9jTmFtZTogdGhpcy5kb2N1bWVudE1hdGVyaWFsVGFibGVEYXRhW2luZGV4XS5vcmlnaW5hbEZpbGVuYW1lLAogICAgICAgICAgICBzaWduU3RhdHVzOiB0aGlzLmRvY3VtZW50TWF0ZXJpYWxUYWJsZURhdGFbaW5kZXhdLnNpZ25TdGF0dXMsCiAgICAgICAgICAgIGNvdmVyU3RhdHVzOiB0aGlzLmRvY3VtZW50TWF0ZXJpYWxUYWJsZURhdGFbaW5kZXhdLmNvdmVyU3RhdHVzCiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmRvY0luZm8ucHVzaChkYXRhKQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7flhYjkuIrkvKDmlofkuaYnKQogICAgICB9CiAgICB9LAogICAgLy8g5paH5Lu25aSa6YCJ5LiK5LygCiAgICB1cExvYWRGaWxlKGUpIHsKICAgICAgY29uc3QgdHlwZUxpc3QgPSBbJy5kb2MnLCAnLnBkZicsICcuZG9jeCcsICcuRE9DJywgJ0RPQ1gnXQogICAgICBjb25zdCBmaWxlID0gZS5maWxlCiAgICAgIGNvbnN0IGZpbGVUeXBlID0gZmlsZS5uYW1lLnN1YnN0cmluZyhmaWxlLm5hbWUubGFzdEluZGV4T2YoJy4nKSkKICAgICAgY29uc3QgaXNGaWxlID0gdHlwZUxpc3QuaW5kZXhPZihmaWxlVHlwZSkgIT09IC0xCiAgICAgIGNvbnN0IGlzTHQxNU0gPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCA8IDE1CiAgICAgIGNvbnN0IGRhdGFUeXBlID0gZS5kYXRhLnR5cGUKICAgICAgaWYgKHRoaXMuZ2V0RmlsZVR5cGUoZS5maWxlLm5hbWUpICE9PSAnd29yZCcgJiYgdGhpcy5nZXRGaWxlVHlwZShlLmZpbGUubmFtZSkgIT09ICdwZGYnKSB7CiAgICAgICAgdGhpcy4kZnVuLm1zZygn6K+35LiK5LygcGRm44CBZG9j44CBZG9jeOagvOW8j+eahOaWh+S7tiEnLCAnZXJyb3InKQogICAgICAgIHJldHVybiBmYWxzZQogICAgICB9CiAgICAgIGlmICghaXNMdDE1TSkgewogICAgICAgIHRoaXMuJGZ1bi5tc2coJ+S4iuS8oOaWh+S7tueahOWkp+Wwj+W6lOWwj+S6jjE1TScsICdlcnJvcicpCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgICAgaWYgKHRoaXMuZmlsZVNob3cubGVuZ3RoID4gMjkpIHsKICAgICAgICB0aGlzLiRmdW4ubXNnKCfkuIrkvKDmlofku7bnmoTmnIDlpJozMOS7vScsICdlcnJvcicpCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgICAgaWYgKGZpbGUuc2l6ZSA9PT0gMCkgewogICAgICAgIHRoaXMuJGZ1bi5tc2coJ+S4jeiDveS4iuS8oOepuueZveaWh+S7ticsICdlcnJvcicpCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgICAgdGhpcy51cEZpbGVMaXN0LnB1c2goZS5maWxlKQogICAgICB0aGlzLnR5cGUgPSBkYXRhVHlwZQogICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy51cEZpbGVMaXN0Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgIGlmICh0aGlzLmZpbGVTaG93LmluZGV4T2YodGhpcy51cEZpbGVMaXN0W2luZGV4XS5uYW1lKSA8IDApIHsKICAgICAgICAgIHRoaXMuZmlsZVNob3cucHVzaCh0aGlzLnVwRmlsZUxpc3RbaW5kZXhdLm5hbWUpCiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBpZiAoIXRoaXMuaXNVcCkgewogICAgICAvLyAgIHRoaXMuaXNVcCA9IHRydWUKICAgICAgLy8gICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgLy8gICAgIHRoaXMudXBMb2FkQWxsKGRhdGFUeXBlKQogICAgICAvLyAgIH0sIDEwMDApCiAgICAgIC8vIH0KICAgIH0sCiAgICB1cExvYWRBbGwodHlwZSkgewogICAgICB0aGlzLiRmdW4ubXNnKCflvIDlp4vkuIrkvKAnLCAnc3VjY2VzcycpCiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgZm9yIChjb25zdCBpIGluIHRoaXMudXBGaWxlTGlzdCkgewogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIHRoaXMudXBGaWxlTGlzdFtpXSkKICAgICAgfQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ29yZGVySWQnLCB0aGlzLm9yZGVySWQpCiAgICAgIHRoaXMuJGF4aW9zKCdvcmcvb3JkZXItZG9jdW1lbnQnLCBmb3JtRGF0YSwgewogICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9CiAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIGlmIChyZXMuc3VjY2VzcyA9PT0gdHJ1ZSkgewogICAgICAgICAgbGV0IGxpc3QgPSBbXQogICAgICAgICAgaWYgKHR5cGUgPT09ICdwdXNoJykgewogICAgICAgICAgICBsaXN0ID0gdGhpcy5kb2NJbmZvTGlzdAogICAgICAgICAgfQogICAgICAgICAgZm9yIChjb25zdCBpIG9mIHJlcy5kYXRhKSB7CiAgICAgICAgICAgIGxpc3QucHVzaCh7CiAgICAgICAgICAgICAgZG9jSWQ6IGkuaWQsCiAgICAgICAgICAgICAgZG9jTmFtZTogaS5vcmlnaW5hbEZpbGVuYW1lLAogICAgICAgICAgICAgIHNpZ25TdGF0dXM6IGkuc2lnblN0YXR1cwogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgICAgdGhpcy5kb2NJbmZvTGlzdCA9IGxpc3QKICAgICAgICAgIGlmICh0eXBlICE9PSAncHVzaCcpIHsKICAgICAgICAgICAgdGhpcy5nZXREb2NJbWcocmVzLmRhdGFbMF0uaWQpCiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgbGlzdC5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgdGhpcy5maWxlU2hvd0xpc3REYXRhLnB1c2gobGlzdFtpbmRleF0pCiAgICAgICAgICB9CiAgICAgICAgICAvLyB0aGlzLmZpbGVTaG93TGlzdERhdGEgPSBsaXN0CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJGZ1bi5tc2coJ+S4iuS8oOWksei0pe+8gScsICdlcnJvcicpCiAgICAgICAgfQogICAgICB9KQogICAgICB0aGlzLnVwRmlsZUxpc3QgPSBbXQogICAgICB0aGlzLmlzVXAgPSBmYWxzZQogICAgfSwKICAgIGdldERvY0ltZyhpZCkgewogICAgICBkZS5nZXRGaWxlSW1nKHsgaWQ6IGlkIH0pLnRoZW4oYXN5bmMocmVzKSA9PiB7CiAgICAgICAgaWYgKHJlcy5kYXRhLnN1Y2Nlc3MgPT09IHRydWUpIHsKICAgICAgICAgIGNvbnN0IGxpc3QgPSByZXMuZGF0YS5kYXRhLmlkcwogICAgICAgICAgY29uc3QgaW1nID0gW10KICAgICAgICAgIGZvciAoY29uc3QgaSBpbiBsaXN0KSB7CiAgICAgICAgICAgIGltZy5wdXNoKGF3YWl0IHRoaXMuZ2V0SW1nKGxpc3RbaV0pKQogICAgICAgICAgfQogICAgICAgICAgdGhpcy5pbWdMaXN0ID0gaW1nCiAgICAgICAgICB0aGlzLmlzU2l6ZSA9IHJlcy5kYXRhLmRhdGEucGFwZXJUeXBlID09PSAnQTMnID8gMiA6IDEKICAgICAgICAgIHRoaXMuZ2V0U2lnbkxpc3QoaWQpCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGdldFNpZ25MaXN0KGlkKSB7CiAgICAgIGRlLmdldFNpZ25EaXYoeyBvcmRlckRvY3VtZW50SWQ6IGlkIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIGlmIChyZXMuc3VjY2VzcyA9PT0gdHJ1ZSkgewogICAgICAgICAgaWYgKHJlcy5kYXRhICE9IG51bGwgfHwgcmVzLmRhdGEubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICAgIGNvbnN0IGxpc3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlcy5kYXRhKSkKICAgICAgICAgICAgdGhpcy5zaWduTGlzdCA9IGxpc3QKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgY2FuY2VsVXBsb2FkaW5nKCkgewogICAgICB0aGlzLnVwbG9hZE1hdGVyaWFsRGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICB9LAogICAgYWZmaXJtVXBsb2FkaW5nKCkgewogICAgICBpZiAodGhpcy5maWxlU2hvdy5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy4kZnVuLm1zZygn5byA5aeL5LiK5LygJywgJ3N1Y2Nlc3MnKQogICAgICAgIHZhciB0eXBlID0gdGhpcy50eXBlCiAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKQogICAgICAgIGZvciAoY29uc3QgaSBpbiB0aGlzLnVwRmlsZUxpc3QpIHsKICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIHRoaXMudXBGaWxlTGlzdFtpXSkKICAgICAgICB9CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdvcmRlcklkJywgdGhpcy5vcmRlcklkKQogICAgICAgIHRoaXMuJGF4aW9zKCdvcmcvb3JkZXItZG9jdW1lbnQnLCBmb3JtRGF0YSwgewogICAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfQogICAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgICAgIGxldCBsaXN0ID0gW10KICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdwdXNoJykgewogICAgICAgICAgICAgIGxpc3QgPSB0aGlzLmRvY0luZm9MaXN0CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIHJlcy5kYXRhKSB7CiAgICAgICAgICAgICAgbGlzdC5wdXNoKHsKICAgICAgICAgICAgICAgIGRvY0lkOiBpLmlkLAogICAgICAgICAgICAgICAgZG9jTmFtZTogaS5vcmlnaW5hbEZpbGVuYW1lLAogICAgICAgICAgICAgICAgc2lnblN0YXR1czogaS5zaWduU3RhdHVzCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmRvY0luZm9MaXN0ID0gbGlzdAogICAgICAgICAgICBpZiAodHlwZSAhPT0gJ3B1c2gnKSB7CiAgICAgICAgICAgICAgdGhpcy5nZXREb2NJbWcocmVzLmRhdGFbMF0uaWQpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGxpc3QubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICAgICAgdGhpcy5maWxlU2hvd0xpc3REYXRhLnB1c2gobGlzdFtpbmRleF0pCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5kb2NJbmZvID0gW10KICAgICAgICAgICAgZGUuZ2V0RW50cnVzdEluZm8oeyBvcmRlcklkOiB0aGlzLm9yZGVySWQgfSkudGhlbihhc3luYyhyZXMpID0+IHsKICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGZsaWVMaXN0ID0gW10KICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVTaWduTGlzdCA9IFtdCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgcmVzLmRhdGEuYW5uZXhEVE9MaXN0KSB7CiAgICAgICAgICAgICAgICAgIGZsaWVMaXN0LnB1c2goewogICAgICAgICAgICAgICAgICAgIG5hbWU6IGkub3JpZ2luRmlsZU5hbWUsCiAgICAgICAgICAgICAgICAgICAgdXJsOiBpLmZpbGVOYW1lCiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMKICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2luZGV4LCBqXSBvZiByZXMuZGF0YS5lbnRydXN0TGlzdC5lbnRyaWVzKCkpIHsKICAgICAgICAgICAgICAgICAgZmlsZVNpZ25MaXN0LnB1c2goewogICAgICAgICAgICAgICAgICAgIHJlYWxOYW1lOiBqLnJlYWxOYW1lLAogICAgICAgICAgICAgICAgICAgIHByb3Bvc2VySWQ6IGouaWQsCiAgICAgICAgICAgICAgICAgICAgbG93TGVmdFg6IDAsCiAgICAgICAgICAgICAgICAgICAgbG93TGVmdFk6IDAsCiAgICAgICAgICAgICAgICAgICAgb3JkZXJJZDogdGhpcy5vcmRlcklkLAogICAgICAgICAgICAgICAgICAgIG9yZGVyRG9jdW1lbnRJZDogJycsCiAgICAgICAgICAgICAgICAgICAgcGFnZTogJycsCiAgICAgICAgICAgICAgICAgICAgY292ZXJUeXBlOiAyCiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmZsaWVMaXN0ID0gZmxpZUxpc3QKICAgICAgICAgICAgICAgIHRoaXMuZmlsZVNpZ25MaXN0ID0gZmlsZVNpZ25MaXN0CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGlzLmRvY0luZm8gPSB0aGlzLmZpbGVTaG93TGlzdERhdGEKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJGZ1bi5tc2coJ+S4iuS8oOWksei0pe+8gScsICdlcnJvcicpCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICB0aGlzLnVwRmlsZUxpc3QgPSBbXQogICAgICAgIHRoaXMuaXNVcCA9IGZhbHNlCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6K+35LiK5Lyg5paH5Lu2JykKICAgICAgfQoKICAgICAgLy8gY29uc29sZS5sb2codGhpcy51cEZpbGVMaXN0LCAnLS0tLS0tLS0tLS0tLS0tLS0tMC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0nKQogICAgICAvLyBpZiAodGhpcy5maWxlU2hvd0xpc3REYXRhLmxlbmd0aCA+IDApIHsKICAgICAgLy8gICB0aGlzLnVwbG9hZE1hdGVyaWFsRGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICAgIC8vICAgdGhpcy5kb2NJbmZvID0gW10KICAgICAgLy8gICBkZS5nZXRFbnRydXN0SW5mbyh7IG9yZGVySWQ6IHRoaXMub3JkZXJJZCB9KS50aGVuKGFzeW5jKHJlcykgPT4gewogICAgICAvLyAgICAgY29uc29sZS5sb2cocmVzKQogICAgICAvLyAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsKICAgICAgLy8gICAgICAgY29uc3QgZmxpZUxpc3QgPSBbXQogICAgICAvLyAgICAgICBjb25zdCBmaWxlU2lnbkxpc3QgPSBbXQogICAgICAvLyAgICAgICBmb3IgKGNvbnN0IGkgb2YgcmVzLmRhdGEuYW5uZXhEVE9MaXN0KSB7CiAgICAgIC8vICAgICAgICAgZmxpZUxpc3QucHVzaCh7CiAgICAgIC8vICAgICAgICAgICBuYW1lOiBpLm9yaWdpbkZpbGVOYW1lLAogICAgICAvLyAgICAgICAgICAgdXJsOiBpLmZpbGVOYW1lCiAgICAgIC8vICAgICAgICAgfSkKICAgICAgLy8gICAgICAgfQogICAgICAvLyAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMKICAgICAgLy8gICAgICAgZm9yIChjb25zdCBbaW5kZXgsIGpdIG9mIHJlcy5kYXRhLmVudHJ1c3RMaXN0LmVudHJpZXMoKSkgewogICAgICAvLyAgICAgICAgIGZpbGVTaWduTGlzdC5wdXNoKHsKICAgICAgLy8gICAgICAgICAgIHJlYWxOYW1lOiBqLnJlYWxOYW1lLAogICAgICAvLyAgICAgICAgICAgcHJvcG9zZXJJZDogai5pZCwKICAgICAgLy8gICAgICAgICAgIGxvd0xlZnRYOiAwLAogICAgICAvLyAgICAgICAgICAgbG93TGVmdFk6IDAsCiAgICAgIC8vICAgICAgICAgICBvcmRlcklkOiB0aGlzLm9yZGVySWQsCiAgICAgIC8vICAgICAgICAgICBvcmRlckRvY3VtZW50SWQ6ICcnLAogICAgICAvLyAgICAgICAgICAgcGFnZTogJycsCiAgICAgIC8vICAgICAgICAgICBjb3ZlclR5cGU6IDIKICAgICAgLy8gICAgICAgICB9KQogICAgICAvLyAgICAgICB9CiAgICAgIC8vICAgICAgIHRoaXMuZmxpZUxpc3QgPSBmbGllTGlzdAogICAgICAvLyAgICAgICB0aGlzLmZpbGVTaWduTGlzdCA9IGZpbGVTaWduTGlzdAogICAgICAvLyAgICAgfQogICAgICAvLyAgIH0pCiAgICAgIC8vICAgdGhpcy5kb2NJbmZvID0gdGhpcy5maWxlU2hvd0xpc3REYXRhCiAgICAgIC8vIH0gZWxzZSB7CiAgICAgIC8vICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6K+35LiK5Lyg5paH5Lu2JykKICAgICAgLy8gfQoKICAgICAgLy8gY29uc29sZS5sb2codGhpcy5kb2NJbmZvLCB0aGlzLmZpbGVTaG93TGlzdERhdGEpCiAgICB9CiAgfQp9Cg=="},null]}