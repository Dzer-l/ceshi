{"remainingRequest":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/thread-loader/dist/cjs.js!/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/home/jenkins_data/workspace/页面-公证处后台/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jenkins_data/workspace/页面-公证处后台/src/views/entry/mail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jenkins_data/workspace/页面-公证处后台/src/views/entry/mail.vue","mtime":1634724784707},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9CgpmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09ICJzdHJpbmciKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gIk9iamVjdCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09ICJNYXAiIHx8IG4gPT09ICJTZXQiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09ICJBcmd1bWVudHMiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmICh0eXBlb2YgU3ltYm9sICE9PSAidW5kZWZpbmVkIiAmJiBpdGVyW1N5bWJvbC5pdGVyYXRvcl0gIT0gbnVsbCB8fCBpdGVyWyJAQGl0ZXJhdG9yIl0gIT0gbnVsbCkgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KGFycik7IH0KCmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgeyBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IH0ga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICIvaG9tZS9qZW5raW5zX2RhdGEvd29ya3NwYWNlL1x1OTg3NVx1OTc2Mi1cdTUxNkNcdThCQzFcdTU5MDRcdTU0MEVcdTUzRjAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yIjsKCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9CgovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwp2YXIgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7CgppbXBvcnQgeyBnZXRQZXJzb25ScmVjZWlwdEluZm8sIGdldENpdHlEYXRhLCBtYWlsT3JkZXIsIGdldE9yZ0luZm8sIGdldE1haWxFdmlkUmVjZWl2ZVBlcnNvbkluZm8sIG1haWxPcmRlckJhY2sgfSBmcm9tICcuLi8uLi9hcGkvY2xvdWRNYWlsJzsKaW1wb3J0IHsgYWRkcmVzc0Zvcm1SdWxlcywgdmFsaWRQaG9uZUNvbXB1dGVkLCB2YWxpZEZpeGxpbmVDb21wdXRlZCB9IGZyb20gJy4uLy4uL3V0aWxzL3ZhbGlkYXRlJzsKaW1wb3J0IHsgZ2V0Q2l0eVJlZ2lvblRyZWUsIGdldENpdHlQYXJlbnRzLCBnZXRBZGRyZXNzQm9va0xpc3QsIHVwZGF0ZUV4cHJlc3NBZGRyZXNzLCBkZWxldGVFeHByZXNzQWRkcmVzcyB9IGZyb20gJy4uLy4uL2FwaS9hZGRyZXNzQm9vayc7CmltcG9ydCB7IExvYWRpbmcgfSBmcm9tICdlbGVtZW50LXVpJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHZhciB2YWxpZEZpeFBob25lID0gZnVuY3Rpb24gdmFsaWRGaXhQaG9uZShydWxlLCB2YWx1ZSwgY2FsbGJhY2spIHsKICAgICAgaWYgKF90aGlzLnNlbmRlckRhdGEucGhvbmUgPT09ICcnICYmIHZhbHVlID09PSAnJykgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign5omL5py65Y+356CB5LiO5Zu66K+d5Y+356CB5b+F5aGr5LiA5LiqJykpOwogICAgICB9IGVsc2UgaWYgKC9eMVszfDR8NXw2fDd8OHw5XVswLTldXGR7OH0kLy50ZXN0KF90aGlzLnNlbmRlckRhdGEucGhvbmUpKSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIXZhbHVlKSB7CiAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+i+k+WFpeWbuuivneWPt+eggScpKTsKICAgICAgICB9IGVsc2UgaWYgKCEvXlxkezN9LVxkezcsOH18XGR7NH0tXGR7Nyw4fSQvLnRlc3QodmFsdWUpKSB7CiAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+i+k+WFpeato+ehrueahOWbuuivneWPt+eggScpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgdmFyIHZhbGlkUGhvbmUgPSBmdW5jdGlvbiB2YWxpZFBob25lKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgewogICAgICBpZiAoX3RoaXMuc2VuZGVyRGF0YS5maXhQaG9uZSA9PT0gJycgJiYgdmFsdWUgPT09ICcnKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfmiYvmnLrlj7fnoIHkuI7lm7ror53lj7fnoIHlv4XloavkuIDkuKonKSk7CiAgICAgIH0gZWxzZSBpZiAoL15cZHszfS1cZHs3LDh9fFxkezR9LVxkezcsOH0kLy50ZXN0KF90aGlzLnNlbmRlckRhdGEuZml4UGhvbmUpKSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIXZhbHVlKSB7CiAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+i+k+WFpeaJi+acuuWPtycpKTsKICAgICAgICB9IGVsc2UgaWYgKCEvXjFbM3w0fDV8Nnw3fDh8OV1bMC05XVxkezh9JC8udGVzdCh2YWx1ZSkpIHsKICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+36L6T5YWl5q2j56Gu55qE5omL5py65Y+3JykpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICB2YXIgdmFsaWRDb21wYW55TmFtZSA9IGZ1bmN0aW9uIHZhbGlkQ29tcGFueU5hbWUocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKHZhbHVlKTsKICAgICAgaWYgKHZhbHVlID09PSAnJykgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA8IDUpIHsKICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign5YWs5Y+45ZCN56ew6ZyA6L6T5YWlNS0zNeS4quWtlycpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgaWQ6ICcnLAogICAgICBzdW1tb25lZFBlcnNvbkRhdGE6IFtdLAogICAgICByZWNpcGllbnRzUnVsZXM6IHsKICAgICAgICBuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5ZCN5a2XJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH0sIHsKICAgICAgICAgIG1pbjogMiwKICAgICAgICAgIG1heDogMTUsCiAgICAgICAgICBtZXNzYWdlOiAn5aeT5ZCN6ZyA6L6T5YWlIDIgLSAxNSDkuKrlrZcnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgZml4UGhvbmU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRGaXhQaG9uZSwKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIHBob25lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICB2YWxpZGF0b3I6IHZhbGlkUGhvbmUsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBjaXR5OiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup55yB5biC5Yy6JywKICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgICAgfV0sCiAgICAgICAgYWRkcmVzczogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeivpue7huWcsOWdgCcsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9LCB7CiAgICAgICAgICBtaW46IDUsCiAgICAgICAgICBtYXg6IDEyMCwKICAgICAgICAgIG1lc3NhZ2U6ICfplb/luqblnKggNSDliLAgMTIwIOS4quWtl+espicsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBjb21wYW55TmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZENvbXBhbnlOYW1lLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgZXhwcmVzc2FnZVJ1bGVzOiB7CiAgICAgICAgbmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeWQjeWtlycsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICB3YXk6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nor4Hku7bnsbvlnosnLAogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICB9XSwKICAgICAgICBwYXlXYXk6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nov5DotLnmlK/ku5jmlrnlvI8nLAogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScKICAgICAgICB9XSwKICAgICAgICB0eXBlOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup54mp5ZOB57G75Z6LJywKICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgICAgfV0sCiAgICAgICAgdGltZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqemihOe6puS4iumXqOaXtumXtCcsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9LAogICAgICBvcHRpb25zOiBbXSwKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgc2VuZGVyRGF0YTogewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIHBob25lOiAnJywKICAgICAgICBmaXhQaG9uZTogJycsCiAgICAgICAgY29tcGFueU5hbWU6ICcnLAogICAgICAgIGNpdHk6ICcnLAogICAgICAgIGFkZHJlc3M6ICcnLAogICAgICAgIGlkOiAnJwogICAgICB9LAogICAgICBleHByZXNzRGF0YTogewogICAgICAgIG5hbWU6ICfkuK3lm73pgq7mlL9lbXMnLAogICAgICAgIHdheTogJ+S4iumXqOWPluS7ticsCiAgICAgICAgdGltZTogJycsCiAgICAgICAgcGF5V2F5OiAnMScsCiAgICAgICAgdHlwZTogJzEnLAogICAgICAgIGdvb2RzRGF0YTogJycsCiAgICAgICAgZXhwcmVzc01ldGhvZDogIjAiLAogICAgICAgIHJlc2VydmVEYXRlOiAiIiwKICAgICAgICByZXNlcnZlVGltZTogIiIKICAgICAgfSwKICAgICAgYWRkcmVzczogJycsCiAgICAgIFNlbGVjdGRlcHRJZDogW10sCiAgICAgIGFkZHJlc3NEaWFsb2c6IGZhbHNlLAogICAgICBhZGRyZXNzTGlzdDogW10sCiAgICAgIHNlbGVjdEFkZHJlc3M6ICIiLAogICAgICBhZGRyZXNzUGFnaW5hdGlvbjogewogICAgICAgIC8vIOWcsOWdgGJ15YiG6aG1CiAgICAgICAgcGFnZU51bTogMSwKICAgICAgICBwYWdlU2l6ZTogOAogICAgICB9LAogICAgICBhZGRyZXNzVG90YWw6IDAsCiAgICAgIGFkZHJlc3NJbm5lclZpc2libGU6IGZhbHNlLAogICAgICAvL+WGheWxguW8ueeql+aVsOaNrgogICAgICBhZGRyZXNzSW5uZXJGb3JtRGF0YTogewogICAgICAgIG5hbWU6ICIiLAogICAgICAgIGNvbnRhY3ROdW1iZXI6ICIiLAogICAgICAgIGZpeGVkTGluZTogIiIsCiAgICAgICAgY29tcGFueU5hbWU6ICIiLAogICAgICAgIGRldGFpbEFkZHJlc3M6ICIiLAogICAgICAgIHJlZ2lvbkNvZGU6ICIiLAogICAgICAgIHJlZ2lvbkNvZGVBcnI6IFtdCiAgICAgIH0sCiAgICAgIGFkZHJlc3NGb3JtUnVsZXM6IGFkZHJlc3NGb3JtUnVsZXMsCiAgICAgIC8vIOWGheWxguW8ueeqlyAvIOWvhOS7tuS6uuihqOWNlSDmoKHpqowKICAgICAgY2l0eUxpc3Q6IFtdLAogICAgICBldmlkTWFpbElkOiAiIiwKICAgICAgcG9wb3ZlclZpc2libGU6IGZhbHNlLAogICAgICBleHByZXNzVGltZU1hcms6IDEsCiAgICAgIC8vIOS7iuWkqeaYjuWkqeWQjuWkqeagh+iusAogICAgICB0aW1lTGlzdDogW10sCiAgICAgIHRpbWVEaXNhYmxlOiBmYWxzZSwKICAgICAgc2VsZWN0RGF5OiAiIiwKICAgICAgdHlwZTogIiIKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgLy8gY29uc29sZS5sb2codGhpcy4kcm91dGUpOwogICAgdGhpcy5pZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2VudHJ5SWQnKTsKICAgIHRoaXMuZXZpZE1haWxJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmVNSWQ7CiAgICB0aGlzLnR5cGUgPSB0aGlzLiRyb3V0ZS5xdWVyeS50eXBlOwogICAgY29uc29sZS5sb2codGhpcy5pZCk7CgogICAgaWYgKHRoaXMudHlwZSAhPSAiYmFjayIpIHsKICAgICAgZ2V0UGVyc29uUnJlY2VpcHRJbmZvKHsKICAgICAgICBldmlkSWQ6IHRoaXMuaWQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzLCAn5Y+X6YCB6L6+5Lq65L+h5oGvJyk7CiAgICAgICAgX3RoaXMyLnN1bW1vbmVkUGVyc29uRGF0YSA9IHJlcy5kYXRhOwogICAgICAgIGdldENpdHlEYXRhKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMsICfln47luILkuInnuqfogZTliqjmlbDmja4nKTsKICAgICAgICAgIF90aGlzMi5vcHRpb25zID0gcmVzLmRhdGFbMF0uY2hpbGRyZW47CiAgICAgICAgICBfdGhpczIuY2l0eUxpc3QgPSByZXMuZGF0YVswXS5jaGlsZHJlbjsKICAgICAgICAgIGdldE9yZ0luZm8oewogICAgICAgICAgICBldmlkSWQ6IF90aGlzMi5pZAogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcywgJ+WFrOivgeWkhOS/oeaBrycpCiAgICAgICAgICAgIC8vIHRoaXMuc2VuZGVyRGF0YS5uYW1lID0gcmVzLmRhdGEub2ZmaWNlTmFtZQogICAgICAgICAgICBfdGhpczIuc2VuZGVyRGF0YS5hZGRyZXNzID0gcmVzLmRhdGEub3JnQWRkcmVzczsKICAgICAgICAgICAgX3RoaXMyLnNlbmRlckRhdGEuY2l0eSA9IFtyZXMuZGF0YS5wcm92LCByZXMuZGF0YS5jaXR5LCByZXMuZGF0YS5jb3VudHldOyAvLyBjb25zb2xlLmxvZyh0aGlzLnNlbmRlckRhdGEpCiAgICAgICAgICAgIC8vIGdldFNoaXBwaW5nSW5mb3JtYXRpb24oeyBldmlkSWQ6IHRoaXMuaWQgfSkudGhlbih2YWwgPT4gewogICAgICAgICAgICAvLyAJY29uc29sZS5sb2codmFsLCAnLS0tLS0tLS0tLS0tLS0tLS04ODg4LS0tLS0tLS0tLS0tLS0tJykKICAgICAgICAgICAgLy8gCXRoaXMuc2VuZGVyRGF0YS5jb21wYW55TmFtZSA9IHZhbC5kYXRhLm9yZ05hbWUKICAgICAgICAgICAgLy8gCXRoaXMuc2VuZGVyRGF0YS5uYW1lID0gdmFsLmRhdGEudXBkYXRlVXNlck5hbWUKICAgICAgICAgICAgLy8gCXRoaXMuc2VuZGVyRGF0YS5waG9uZSA9IHZhbC5kYXRhLnVwZGF0ZVVzZXJQaG9uZQogICAgICAgICAgICAvLyB9KQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSAvLyBpZiAodGhpcy4kcm91dGUucXVlcnkuaWQpIHsKICAgIC8vICAgdGhpcy5pZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkOwogICAgLy8gfSBlbHNlIHsKICAgIC8vICAgdGhpcy5pZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImVudHJ5SWQiKTsKICAgIC8vICAgdmFyIHVybCA9IGAvIyR7dGhpcy4kcm91dGUucGF0aH0/aWQ9JHt0aGlzLmlkfWA7CiAgICAvLyAgIGhpc3RvcnkucHVzaFN0YXRlKG51bGwsIG51bGwsIHVybCk7CiAgICAvLyB9CgoKICAgIHRoaXMuZ2V0QWRkcmVzc0xpc3QoKTsKICAgIHRoaXMuZ2V0U2VuZGVyRGF0YSgpOwogICAgdGhpcy5nZW5lcmF0b3JUaW1lKDksIDE4KTsKICAgIHRoaXMuZ2VuZXJhdG9yRGF5KDEpOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNvbnRhY3ROdW1iZXJSdWxlczogZnVuY3Rpb24gY29udGFjdE51bWJlclJ1bGVzKCkgewogICAgICAvLyDmiYvmnLrlj7fpqozor4EKICAgICAgcmV0dXJuIHZhbGlkUGhvbmVDb21wdXRlZDsKICAgIH0sCiAgICBmaXhlZExpbmVSdWxlczogZnVuY3Rpb24gZml4ZWRMaW5lUnVsZXMoKSB7CiAgICAgIC8vIOWbuuivnemqjOivgQogICAgICByZXR1cm4gdmFsaWRGaXhsaW5lQ29tcHV0ZWQ7CiAgICB9LAogICAgc2VsZWN0QWN0aXZlOiBmdW5jdGlvbiBzZWxlY3RBY3RpdmUoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChpbmRleCwgbWFyaykgewogICAgICAgIC8vIGNvbnNvbGUubG9nKGluZGV4LCBtYXJrKTsKICAgICAgICBpZiAoX3RoaXMzLnRpbWVTZWxlY3RJbmRleCA9PSBpbmRleCAmJiBfdGhpczMucHJlTWFyayA9PSBtYXJrKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOS7iuWkqeaYjuWkqeWQjuWkqeaXtumXtOWIh+aNogogICAgaGFuZGxlVGltZUNoYW5nZTogZnVuY3Rpb24gaGFuZGxlVGltZUNoYW5nZShlKSB7CiAgICAgIHRoaXMuZ2VuZXJhdG9yRGF5KGUpOwoKICAgICAgaWYgKGUgPT0gMiB8fCBlID09IDMpIHsKICAgICAgICB0aGlzLmdlbmVyYXRvclRpbWUoOSwgMTgsIDcpOyAvLyDlsI/kuo7lvIDlp4vml7bpl7TnlJ/miJDlhajpg6jlj6/pgIkKCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmdlbmVyYXRvclRpbWUoOSwgMTgpOyAvLyDku47lvZPliY3ml7bpl7TlvIDlp4vnlJ/miJAKICAgIH0sCiAgICAvLyDngrnlh7vpgInmi6nml7bpl7QKICAgIGhhbmRsZVNlbGVjdFRpbWU6IGZ1bmN0aW9uIGhhbmRsZVNlbGVjdFRpbWUoZSwgaW5kZXgpIHsKICAgICAgY29uc29sZS5sb2coZS50YXJnZXQuaW5uZXJIVE1MLCBpbmRleCwgdGhpcy5leHByZXNzVGltZU1hcmspOwogICAgICB0aGlzLiRyZWZzLmV4cHJlc3NhZ2VGb3JtLmNsZWFyVmFsaWRhdGUoInRpbWUiKTsKICAgICAgdGhpcy50aW1lU2VsZWN0SW5kZXggPSBpbmRleDsKICAgICAgdGhpcy5wcmVNYXJrID0gdGhpcy5leHByZXNzVGltZU1hcms7CiAgICAgIHZhciB0ZXh0ID0gZS50YXJnZXQuaW5uZXJIVE1MOwoKICAgICAgaWYgKHRleHQgPT0gJ+S7iuaXpeaXoOWPr+mihOe6puaXtumXtCcpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0ZXh0ID09ICfkuIDlsI/ml7blhoUnKSB7CiAgICAgICAgdGhpcy5leHByZXNzRGF0YS5yZXNlcnZlRGF0ZSA9ICIiLmNvbmNhdChtb21lbnQoKS5mb3JtYXQoJ1lZWVknKSwgIi0iKS5jb25jYXQodGhpcy5zZWxlY3REYXkpOwogICAgICAgIHRoaXMuZXhwcmVzc0RhdGEucmVzZXJ2ZVRpbWUgPSAiIi5jb25jYXQobW9tZW50KCkuYWRkKDEsICdob3VycycpLmZvcm1hdCgnSEg6MDAnKSwgIi0iKS5jb25jYXQobW9tZW50KCkuYWRkKDIsICdob3VycycpLmZvcm1hdCgnSEg6MDAnKSk7CiAgICAgICAgdGhpcy5leHByZXNzRGF0YS50aW1lID0gIiIuY29uY2F0KG1vbWVudCgpLmZvcm1hdCgnWVlZWScpLCAiLSIpLmNvbmNhdCh0aGlzLnNlbGVjdERheSwgIiAiKS5jb25jYXQobW9tZW50KCkuYWRkKDEsICdob3VycycpLmZvcm1hdCgnSEg6MDAnKSwgIi0iKS5jb25jYXQobW9tZW50KCkuYWRkKDIsICdob3VycycpLmZvcm1hdCgnSEg6MDAnKSk7CiAgICAgICAgdGhpcy5wb3BvdmVyVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5leHByZXNzRGF0YS5yZXNlcnZlRGF0ZSA9ICIiLmNvbmNhdChtb21lbnQoKS5mb3JtYXQoJ1lZWVknKSwgIi0iKS5jb25jYXQodGhpcy5zZWxlY3REYXkpOyAvLyBjb25zdCB0ZXh0QXJyID0gdGV4dC5zcGxpdCgnLScpCiAgICAgIC8vIHRoaXMuZXhwcmVzc0RhdGEucmVzZXJ2ZVRpbWUgPSBgJHt0aGlzLnNlbGVjdERheX0gJHt0ZXh0QXJyWzBdfSDoh7MgJHt0aGlzLnNlbGVjdERheX0gJHt0ZXh0QXJyWzFdfWAKCiAgICAgIHRoaXMuZXhwcmVzc0RhdGEucmVzZXJ2ZVRpbWUgPSB0ZXh0OwogICAgICB0aGlzLmV4cHJlc3NEYXRhLnRpbWUgPSAiIi5jb25jYXQodGhpcy5leHByZXNzRGF0YS5yZXNlcnZlRGF0ZSwgIiAiKS5jb25jYXQodGV4dCk7CiAgICAgIHRoaXMucG9wb3ZlclZpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDnlJ/miJDml6XmnJ8KICAgIGdlbmVyYXRvckRheTogZnVuY3Rpb24gZ2VuZXJhdG9yRGF5KGUpIHsKICAgICAgdGhpcy5zZWxlY3REYXkgPSBlID09IDEgPyBtb21lbnQobmV3IERhdGUoKSkuZm9ybWF0KCdNTS1ERCcpIDogZSA9PSAyID8gbW9tZW50KG5ldyBEYXRlKCkpLmFkZCgxLCAnZGF5cycpLmZvcm1hdCgnTU0tREQnKSA6IG1vbWVudChuZXcgRGF0ZSgpKS5hZGQoMiwgJ2RheXMnKS5mb3JtYXQoJ01NLUREJyk7CiAgICB9LAogICAgLy8g55Sf5oiQ5pe26Ze05q61CiAgICBnZW5lcmF0b3JUaW1lOiBmdW5jdGlvbiBnZW5lcmF0b3JUaW1lKHN0YXJ0LCBlbmQsIGhvdXJOb3cpIHsKICAgICAgdmFyIHJhbmdlID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiAnOjAwJzsKICAgICAgdmFyIHN0YXJ0VGltZTsKICAgICAgdmFyIGVuZFRpbWU7CiAgICAgIHZhciB0aW1lTGlzdCA9IFtdOwogICAgICBob3VyTm93ID0gaG91ck5vdyB8fCBtb21lbnQoKS5mb3JtYXQoJ0gnKTsKCiAgICAgIGlmIChob3VyTm93IDwgZW5kIC0gMSAmJiBob3VyTm93ID49IHN0YXJ0KSB7CiAgICAgICAgc3RhcnQgPSBOdW1iZXIoaG91ck5vdykgKyAxOwogICAgICAgIHRpbWVMaXN0LnB1c2goJ+S4gOWwj+aXtuWGhScpOwogICAgICB9CgogICAgICBpZiAoaG91ck5vdyA+IGVuZCAtIDIpIHsKICAgICAgICB0aW1lTGlzdC5wdXNoKCfku4rml6Xml6Dlj6/pooTnuqbml7bpl7QnKTsKICAgICAgICB0aGlzLnRpbWVMaXN0ID0gdGltZUxpc3Q7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCAyNDsgaSsrKSB7CiAgICAgICAgaWYgKGkgPCBlbmQpIHsKICAgICAgICAgIHN0YXJ0VGltZSA9IGkgPCAxMCA/ICcwJyArIGkgKyByYW5nZSA6IGkgKyByYW5nZTsKICAgICAgICAgIGVuZFRpbWUgPSBpICsgMSArIHJhbmdlOwogICAgICAgICAgdGltZUxpc3QucHVzaChzdGFydFRpbWUgKyAnLScgKyBlbmRUaW1lKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMudGltZUxpc3QgPSB0aW1lTGlzdDsKICAgIH0sCiAgICBnZXRTZW5kZXJEYXRhOiBmdW5jdGlvbiBnZXRTZW5kZXJEYXRhKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBkYXRhLCByZXMsIHNlbmRlcjsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgcGVyc29uVHlwZTogMSwKICAgICAgICAgICAgICAgICAgZXZpZE1haWxJZDogX3RoaXM0LmV2aWRNYWlsSWQKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRNYWlsRXZpZFJlY2VpdmVQZXJzb25JbmZvKGRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coImdldFNlbmRlckRhdGEtLS0tLS0iLCByZXMpOwoKICAgICAgICAgICAgICAgIGlmICghKHJlcy5zdWNjZXNzICYmIHJlcy5kYXRhKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHNlbmRlciA9IHJlcy5kYXRhWzBdOwoKICAgICAgICAgICAgICAgIGlmICghKF90aGlzNC50eXBlICE9ICJiYWNrIikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyDmmK/lkKblm57pgIAKICAgICAgICAgICAgICAgIF90aGlzNC5zZW5kZXJEYXRhLm5hbWUgPSBzZW5kZXIubmFtZTsKICAgICAgICAgICAgICAgIF90aGlzNC5zZW5kZXJEYXRhLnBob25lID0gc2VuZGVyLnBob25lOwogICAgICAgICAgICAgICAgX3RoaXM0LnNlbmRlckRhdGEuZml4UGhvbmUgPSBzZW5kZXIuZml4ZWRMaW5lOwogICAgICAgICAgICAgICAgX3RoaXM0LnNlbmRlckRhdGEuY29tcGFueU5hbWUgPSBzZW5kZXIuY29tcGFueTsKICAgICAgICAgICAgICAgIF90aGlzNC5zZW5kZXJEYXRhLmlkID0gc2VuZGVyLmlkOyAvLyB0aGlzLnNlbmRlckRhdGEuY2l0eSA9IFtzZW5kZXIucHJvdmluY2UsIHNlbmRlci5jaXR5LCBzZW5kZXIuY291bnR5LF0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIGdldENpdHlEYXRhKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcywgJ+WfjuW4guS4iee6p+iBlOWKqOaVsOaNricpOwogICAgICAgICAgICAgICAgICBfdGhpczQub3B0aW9ucyA9IHJlcy5kYXRhWzBdLmNoaWxkcmVuOwogICAgICAgICAgICAgICAgICBfdGhpczQuY2l0eUxpc3QgPSByZXMuZGF0YVswXS5jaGlsZHJlbjsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIF90aGlzNC5zdW1tb25lZFBlcnNvbkRhdGEucHVzaCh7CiAgICAgICAgICAgICAgICAgIG5hbWU6IHNlbmRlci5uYW1lLAogICAgICAgICAgICAgICAgICBwaG9uZTogc2VuZGVyLnBob25lLAogICAgICAgICAgICAgICAgICBmaXhlZExpbmU6IHNlbmRlci5maXhlZExpbmUsCiAgICAgICAgICAgICAgICAgIGNvbXBhbnk6IHNlbmRlci5jb21wYW55LAogICAgICAgICAgICAgICAgICBwcm92aW5jZTogc2VuZGVyLnByb3ZpbmNlLAogICAgICAgICAgICAgICAgICBjaXR5OiBzZW5kZXIuY2l0eSwKICAgICAgICAgICAgICAgICAgY291bnR5OiBzZW5kZXIuY291bnR5LAogICAgICAgICAgICAgICAgICBkZWF0aWxBZGRyZXNzOiBzZW5kZXIuZGVhdGlsQWRkcmVzcywKICAgICAgICAgICAgICAgICAgaWQ6IHNlbmRlci5pZAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g6I635Y+W5Zyw5Z2A57C/5YiX6KGoCiAgICBnZXRBZGRyZXNzTGlzdDogZnVuY3Rpb24gZ2V0QWRkcmVzc0xpc3QoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBkYXRhLCByZXM7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkYXRhID0gX29iamVjdFNwcmVhZCh7CiAgICAgICAgICAgICAgICAgIG5hbWVPck1vYmlsZTogIiIKICAgICAgICAgICAgICAgIH0sIF90aGlzNS5hZGRyZXNzUGFnaW5hdGlvbik7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0QWRkcmVzc0Jvb2tMaXN0KGRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCflnLDlnYDliJfooagnLCByZXMpOwogICAgICAgICAgICAgICAgX3RoaXM1LmFkZHJlc3NMaXN0ID0gcmVzLnN1Y2Nlc3MgPyByZXMuZGF0YS5saXN0IDogIiI7CiAgICAgICAgICAgICAgICBfdGhpczUuYWRkcmVzc1RvdGFsID0gcmVzLnN1Y2Nlc3MgPyByZXMuZGF0YS50b3RhbCA6ICIiOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyDngrnlh7vlnLDlnYDnsL8KICAgIGhhbmRsZUFkZHJlc3NCb29rU2hvdzogZnVuY3Rpb24gaGFuZGxlQWRkcmVzc0Jvb2tTaG93KCkgewogICAgICB0aGlzLmFkZHJlc3NEaWFsb2cgPSB0cnVlOwogICAgfSwKICAgIC8vIOW8ueeql+S/ruaUueWcsOWdgAogICAgaGFuZGxlQWRkcmVzc0VkaXQ6IGZ1bmN0aW9uIGhhbmRsZUFkZHJlc3NFZGl0KGluZGV4LCByb3cpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICB0aGlzLmFkZHJlc3NJbm5lclZpc2libGUgPSB0cnVlOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM2LiRyZWZzWyJhZGRyZXNzSW5uZXJGb3JtIl0uY2xlYXJWYWxpZGF0ZSgpOwogICAgICB9KTsKICAgICAgdGhpcy5hZGRyZXNzSW5uZXJGb3JtRGF0YSA9IF9vYmplY3RTcHJlYWQoe30sIHJvdyk7CiAgICAgIHRoaXMuZ2V0Q2l0eVBhcmVudElubmVyKHJvdyk7CiAgICB9LAogICAgLy8g5Zyw5Z2A57C/5Yig6Zmk5Zyw5Z2ACiAgICBoYW5kbGVBZGRyZXNzRGVsZXRlOiBmdW5jdGlvbiBoYW5kbGVBZGRyZXNzRGVsZXRlKGluZGV4LCByb3cpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICB0aGlzLiRjb25maXJtKCc8cCBzdHlsZT0iY29sb3I6cmVkOyI+56Gu5a6a5Yig6Zmk5Zyw5Z2A5ZCX77yfPC9wPicsICfmk43kvZzmj5DnpLonLCB7CiAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBkZWxldGVFeHByZXNzQWRkcmVzcyhyb3cuaWQpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfliKDpmaTlnLDlnYAnLCByZXMpOwoKICAgICAgICAgICAgICAgIF90aGlzNy5mZWVkQmFjayhyZXMsIDEpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkpLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczcuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOaTjeS9nO+8gScKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5Zyw5Z2A57C/5YiG6aG15YiH5o2iCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICB0aGlzLmFkZHJlc3NQYWdpbmF0aW9uLnBhZ2VOdW0gPSB2YWw7CiAgICAgIHRoaXMuZ2V0QWRkcmVzc0xpc3QoKTsKICAgIH0sCiAgICAvLyDlnLDlnYDnsL/pgInkuK3lnLDlnYDnoa7lrpoKICAgIGhhbmRsZUFkZHJlZGRDb21maXJtOiBmdW5jdGlvbiBoYW5kbGVBZGRyZWRkQ29tZmlybSgpIHsKICAgICAgY29uc29sZS5sb2codGhpcy5zZWxlY3RBZGRyZXNzKTsKICAgICAgdGhpcy5hZGRyZXNzRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuc2VuZGVyRGF0YS5uYW1lID0gdGhpcy5zZWxlY3RBZGRyZXNzLm5hbWU7CiAgICAgIHRoaXMuc2VuZGVyRGF0YS5waG9uZSA9IHRoaXMuc2VsZWN0QWRkcmVzcy5jb250YWN0TnVtYmVyOwogICAgICB0aGlzLnNlbmRlckRhdGEuZml4UGhvbmUgPSB0aGlzLnNlbGVjdEFkZHJlc3MuZml4ZWRMaW5lOwogICAgICB0aGlzLnNlbmRlckRhdGEuY29tcGFueU5hbWUgPSB0aGlzLnNlbGVjdEFkZHJlc3MuY29tcGFueU5hbWU7CiAgICAgIHRoaXMuc2VuZGVyRGF0YS5hZGRyZXNzID0gdGhpcy5zZWxlY3RBZGRyZXNzLmRldGFpbEFkZHJlc3M7CiAgICAgIHRoaXMuZ2V0Q2l0eVBhcmVudCgpOwogICAgfSwKICAgIC8vIOWcsOWdgOewv+mAieS4reWcsOWdgOWIh+aNogogICAgaGFuZGxlQ3VycmVudFNlbGVjdDogZnVuY3Rpb24gaGFuZGxlQ3VycmVudFNlbGVjdCh2YWwpIHsKICAgICAgY29uc29sZS5sb2coJ+W9k+WJjemAieS4reihjCcsIHZhbCk7CiAgICAgIHRoaXMuc2VsZWN0QWRkcmVzcyA9IHZhbDsKICAgIH0sCiAgICAvLyDojrflj5bln47luILniLbnuqcKICAgIGdldENpdHlQYXJlbnQ6IGZ1bmN0aW9uIGdldENpdHlQYXJlbnQocmVnaW9uQ29kZSkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGdldENpdHlQYXJlbnRzKHsKICAgICAgICAgICAgICAgICAgY29kZTogcmVnaW9uQ29kZSB8fCBfdGhpczguc2VsZWN0QWRkcmVzcy5yZWdpb25Db2RlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5Z+O5biC54i257qnJywgcmVzKTsKCiAgICAgICAgICAgICAgICBfdGhpczguJHJlZnNbInJlY2lwaWVudHNGb3JtIl0uY2xlYXJWYWxpZGF0ZSgpOwoKICAgICAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKF90aGlzOC5zZW5kZXJEYXRhLCB7CiAgICAgICAgICAgICAgICAgICAgcmVnaW9uQ29kZUFycjogcmVzLmRhdGEuc2xpY2UoMSkKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIF90aGlzOC5zZW5kZXJEYXRhLmNpdHkgPSBfdGhpczguZ2V0Q2l0eShfdGhpczguc2VuZGVyRGF0YS5yZWdpb25Db2RlQXJyLCBfdGhpczguY2l0eUxpc3QpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChyZWdpb25Db2RlKSB7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuJHJlZnMuY2l0eUNhc2NhZGVyLnByZXNlbnRUZXh0LCB0aGlzLiRyZWZzLmNpdHlDYXNjYWRlci5pbnB1dFZhbHVlKTsKICAgICAgICAgICAgICAgICAgICBfdGhpczguc2VuZGVyRGF0YS5hZGRyZXNzID0gX3RoaXM4LiRyZWZzLmNpdHlDYXNjYWRlci5wcmVzZW50VGV4dC5yZXBsYWNlKC8gXC8gL2csICIiKTsKICAgICAgICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZ2V0Q2l0eTogZnVuY3Rpb24gZ2V0Q2l0eShhcnIsIHBhcmFtcykgewogICAgICB2YXIgbWFyayA9IDA7CiAgICAgIHZhciByZXN1bHQgPSBbXTsKCiAgICAgIGZ1bmN0aW9uIGdldENpdHlJbm5lcihwYXJhbXMpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhcmFtcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKHBhcmFtc1tpXS5jb2RlID09IGFyclttYXJrXSkgewogICAgICAgICAgICByZXN1bHQucHVzaChwYXJhbXNbaV0ubmFtZSk7CiAgICAgICAgICAgIG1hcmsrKzsKCiAgICAgICAgICAgIGlmIChwYXJhbXNbaV0uY2hpbGRyZW4pIHsKICAgICAgICAgICAgICBnZXRDaXR5SW5uZXIocGFyYW1zW2ldLmNoaWxkcmVuKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgOwogICAgICB9CgogICAgICBnZXRDaXR5SW5uZXIocGFyYW1zKTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0sCiAgICAvLyDph4zlsYLlvLnnqpfojrflj5bln47luILniLbnuqcKICAgIGdldENpdHlQYXJlbnRJbm5lcjogZnVuY3Rpb24gZ2V0Q2l0eVBhcmVudElubmVyKHJvdykgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGdldENpdHlQYXJlbnRzKHsKICAgICAgICAgICAgICAgICAgY29kZTogcm93LnJlZ2lvbkNvZGUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDUuc2VudDsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfln47luILniLbnuqcnLCByZXMpCiAgICAgICAgICAgICAgICByZXMuc3VjY2VzcyAmJiBfdGhpczkuJHNldChfdGhpczkuYWRkcmVzc0lubmVyRm9ybURhdGEsICJyZWdpb25Db2RlQXJyIiwgcmVzLmRhdGEuc2xpY2UoMSkpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyDph4zlsYLlvLnnqpfnnIHluILljLrpgInmi6kKICAgIGhhbmRsZUNoYW5nZUlubmVyOiBmdW5jdGlvbiBoYW5kbGVDaGFuZ2VJbm5lcihhcnIpIHsKICAgICAgaWYgKGFycikgewogICAgICAgIHRoaXMuYWRkcmVzc0lubmVyRm9ybURhdGEuYWRkcmVzcyA9IHRoaXMuJHJlZnMuY2l0eUNhc2NhZGVyLmdldENoZWNrZWROb2RlcygpWzBdLnBhdGhMYWJlbHMuam9pbigiIik7CiAgICAgICAgdGhpcy5hZGRyZXNzSW5uZXJGb3JtRGF0YS5yZWdpb25Db2RlID0gX3RvQ29uc3VtYWJsZUFycmF5KGFycikucG9wKCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDph4zlsYLlvLnnqpfkv67mlLnlnLDlnYDnoa7orqQKICAgIGhhbmRsZUlubmVyRGlhbG9nQ29tZmlybTogZnVuY3Rpb24gaGFuZGxlSW5uZXJEaWFsb2dDb21maXJtKGZvcm1OYW1lKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KHZhbGlkKSB7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codmFsaWQpOwoKICAgICAgICAgICAgICAgICAgaWYgKCF2YWxpZCkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgX3RoaXMxMC5hZGRyZXNzSW5uZXJWaXNpYmxlID0gZmFsc2U7CgogICAgICAgICAgICAgICAgICBfdGhpczEwLnVwZGF0ZUFkZHJlc3MoKTsKCiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3Igc3VibWl0ISEnKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIsIGZhbHNlKTsKCiAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgICB9KSk7CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKSk7CiAgICB9LAogICAgLy8g5Zyw5Z2A6ZmQ5Yi26L6T5YWlCiAgICBoYW5kbGVJbnB1dDogZnVuY3Rpb24gaGFuZGxlSW5wdXQodmFsdWUsIG9iamVjdCwga2V5KSB7CiAgICAgIGlmICh2YWx1ZS5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpc1tvYmplY3RdW2tleV0gPSB2YWx1ZS5yZXBsYWNlKC9bYH4hQCMkJV4mKl9cKz17fXw8Pj86IiwuLzsnXFxbXF3Ct37vvIFAI++/pSXigKbigKYmKu+8iO+8ieKAlOKAlOOAiuOAi++8n++8muKAnOKAneOAkOOAkeOAge+8m+KAmOKAme+8jOOAguOAgV0vZywgIiIpLnJlcGxhY2UoL1xzLywgIiIpOwogICAgICB9CiAgICB9LAogICAgLy8g5L+u5pS55Zyw5Z2A6K+35rGCCiAgICB1cGRhdGVBZGRyZXNzOiBmdW5jdGlvbiB1cGRhdGVBZGRyZXNzKCkgewogICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzMTEuYWRkcmVzc0lubmVyRm9ybURhdGEpOwogICAgICAgICAgICAgICAgX3RoaXMxMS5hZGRyZXNzSW5uZXJGb3JtRGF0YS5jcmVhdGVUaW1lID0gIiI7CiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlRXhwcmVzc0FkZHJlc3MoX3RoaXMxMS5hZGRyZXNzSW5uZXJGb3JtRGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Ny5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+S/ruaUueWcsOWdgCcsIHJlcyk7CgogICAgICAgICAgICAgICAgX3RoaXMxMS5mZWVkQmFjayhyZXMsIDApOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTcpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyDph4zlsYLlvLnnqpfkv67mlLnlnLDlnYDlj5bmtogKICAgIGhhbmRsZUlubmVyRGlhbG9nQ2FuY2xlOiBmdW5jdGlvbiBoYW5kbGVJbm5lckRpYWxvZ0NhbmNsZShmb3JtTmFtZSkgewogICAgICB0aGlzLmFkZHJlc3NJbm5lclZpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDkv67mlLnmiJbliKDpmaTlnLDlnYDlj43ppogKICAgIGZlZWRCYWNrOiBmdW5jdGlvbiBmZWVkQmFjayhyZXMsIGZsYWcpIHsKICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAoZmxhZyA9PSAwID8gIuS/ruaUuSIgOiAi5Yig6ZmkIikgKyAi5Zyw5Z2A5oiQ5Yqf77yBIiwKICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIgogICAgICAgIH0pOwogICAgICAgIHRoaXMuZ2V0QWRkcmVzc0xpc3QoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgIG1lc3NhZ2U6IChmbGFnID09IDAgPyAi5L+u5pS5IiA6ICLliKDpmaQiKSArICLlnLDlnYDlpLHotKXvvIzor7fnqI3lkI7lho3or5XvvIEiLAogICAgICAgIHR5cGU6ICJlcnJvciIKICAgICAgfSk7CiAgICB9LAogICAgY2hhbmdlRGV0U2VsZWN0OiBmdW5jdGlvbiBjaGFuZ2VEZXRTZWxlY3Qoa2V5LCB0cmVlRGF0YSkgewogICAgICB2YXIgYXJyID0gW107IC8vIOWcqOmAkuW9kuaXtuaTjeS9nOeahOaVsOe7hAoKICAgICAgdmFyIHJldHVybkFyciA9IFtdOyAvLyDlrZjmlL7nu5PmnpznmoTmlbDnu4QKCiAgICAgIHZhciBkZXB0aCA9IDA7IC8vIOWumuS5ieWFqOWxgOWxgue6pwogICAgICAvLyDlrprkuYnpgJLlvZLlh73mlbAKCiAgICAgIGZ1bmN0aW9uIGNoaWxkcmVuRWFjaChjaGlsZHJlbkRhdGEsIGRlcHRoTikgewogICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY2hpbGRyZW5EYXRhLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBkZXB0aCA9IGRlcHRoTjsgLy8g5bCG5omn6KGM55qE5bGC57qn6LWL5YC8IOWIsCDlhajlsYDlsYLnuqcKCiAgICAgICAgICBhcnJbZGVwdGhOXSA9IGNoaWxkcmVuRGF0YVtqXS5jb2RlOwoKICAgICAgICAgIGlmIChjaGlsZHJlbkRhdGFbal0uY29kZSA9PT0ga2V5KSB7CiAgICAgICAgICAgIHJldHVybkFyciA9IGFyci5zbGljZSgwLCBkZXB0aE4gKyAxKTsgLy8g5bCG55uu5YmN5Yy56YWN55qE5pWw57uE77yM5oiq5pat5bm25L+d5a2Y5Yiw57uT5p6c5pWw57uE77yMCgogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChjaGlsZHJlbkRhdGFbal0ubm9kZXMpIHsKICAgICAgICAgICAgICBkZXB0aCsrOwogICAgICAgICAgICAgIGNoaWxkcmVuRWFjaChjaGlsZHJlbkRhdGFbal0ubm9kZXMsIGRlcHRoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJldHVybkFycjsKICAgICAgfQoKICAgICAgcmV0dXJuIGNoaWxkcmVuRWFjaCh0cmVlRGF0YSwgZGVwdGgpOwogICAgfSwKICAgIGdldFNlbmRMZXR0ZXJTdWNjZXNzZnVsOiBmdW5jdGlvbiBnZXRTZW5kTGV0dGVyU3VjY2Vzc2Z1bCgpIHsKICAgICAgdmFyIF90aGlzMTIgPSB0aGlzOwoKICAgICAgdmFyIHAxID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIF90aGlzMTIuJHJlZnNbJ2V4cHJlc3NhZ2VGb3JtJ10udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlamVjdChmYWxzZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICB2YXIgcDIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgX3RoaXMxMi4kcmVmc1sncmVjaXBpZW50c0Zvcm0nXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICByZXNvbHZlKHRydWUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVqZWN0KGZhbHNlKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIFByb21pc2UuYWxsKFtwMSwgcDJdKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICB2YXIgbGlzdCA9IFtdOwoKICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgX3RoaXMxMi5zdW1tb25lZFBlcnNvbkRhdGEubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICB2YXIgaW5mbyA9IHt9OwogICAgICAgICAgaW5mby5ldmlkSWQgPSBfdGhpczEyLmlkOwogICAgICAgICAgaW5mby5iYXNlUHJvZHVjdE5vID0gcGFyc2VJbnQoX3RoaXMxMi5leHByZXNzRGF0YS5wYXlXYXkpOwogICAgICAgICAgaW5mby5zZW5kZXJOYW1lID0gX3RoaXMxMi5zZW5kZXJEYXRhLm5hbWU7CiAgICAgICAgICBpbmZvLnNlbmRlckFkZHJlc3MgPSBfdGhpczEyLnNlbmRlckRhdGEuY2l0eVswXSArIF90aGlzMTIuc2VuZGVyRGF0YS5jaXR5WzFdICsgX3RoaXMxMi5zZW5kZXJEYXRhLmNpdHlbMl07CiAgICAgICAgICBpbmZvLnNlbmRlckRldGFpbEFkZHJlc3MgPSBfdGhpczEyLnNlbmRlckRhdGEuYWRkcmVzczsKICAgICAgICAgIGluZm8uc2VuZGVyQ29udGFjdE51bWJlciA9ICcnOwogICAgICAgICAgaW5mby5leHByZXNzTWV0aG9kID0gX3RoaXMxMi5leHByZXNzRGF0YS5leHByZXNzTWV0aG9kOwogICAgICAgICAgaW5mby5leHByZXNzQ29tcGFueSA9IF90aGlzMTIuZXhwcmVzc0RhdGEuY29tcGFueU5hbWU7CiAgICAgICAgICBpbmZvLnJlc2VydmVUaW1lID0gX3RoaXMxMi5leHByZXNzRGF0YS5yZXNlcnZlVGltZTsKICAgICAgICAgIGluZm8ucmVzZXJ2ZURhdGUgPSBfdGhpczEyLmV4cHJlc3NEYXRhLnJlc2VydmVEYXRlOwogICAgICAgICAgaW5mby5nb29kc1R5cGUgPSAxOwogICAgICAgICAgaW5mby5nb29kc0luZm8gPSBfdGhpczEyLmV4cHJlc3NEYXRhLmdvb2RzRGF0YTsKICAgICAgICAgIGluZm8uZXZpZFBlcnNvbklkID0gX3RoaXMxMi5zdW1tb25lZFBlcnNvbkRhdGFbaW5kZXhdLmlkOwogICAgICAgICAgaW5mby5zZW5kZXJSZWdpb25Db2RlID0gX3RoaXMxMi5maW5kUmVnaW9uQ29kZShfdGhpczEyLnNlbmRlckRhdGEpOyAvLyDmt7vliqDln47luILnvJbnoIEKCiAgICAgICAgICBpZiAoX3RoaXMxMi5zZW5kZXJEYXRhLnBob25lICYmICFfdGhpczEyLnNlbmRlckRhdGEuZml4UGhvbmUpIHsKICAgICAgICAgICAgaW5mby5zZW5kZXJDb250YWN0TnVtYmVyID0gX3RoaXMxMi5zZW5kZXJEYXRhLnBob25lOwogICAgICAgICAgfSBlbHNlIGlmICghX3RoaXMxMi5zZW5kZXJEYXRhLnBob25lICYmIF90aGlzMTIuc2VuZGVyRGF0YS5maXhQaG9uZSkgewogICAgICAgICAgICBpbmZvLnNlbmRlckNvbnRhY3ROdW1iZXIgPSBfdGhpczEyLnNlbmRlckRhdGEuZml4UGhvbmU7CiAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzMTIuc2VuZGVyRGF0YS5waG9uZSAmJiBfdGhpczEyLnNlbmRlckRhdGEuZml4UGhvbmUpIHsKICAgICAgICAgICAgaW5mby5zZW5kZXJDb250YWN0TnVtYmVyID0gX3RoaXMxMi5zZW5kZXJEYXRhLnBob25lOwogICAgICAgICAgfQoKICAgICAgICAgIGxpc3QucHVzaChpbmZvKTsKICAgICAgICB9CgogICAgICAgIGlmIChfdGhpczEyLnR5cGUgPT0gImJhY2siKSB7CiAgICAgICAgICBtYWlsT3JkZXJCYWNrKGxpc3QpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMsICflkbzlj6vlv6vpgJLmj73mlLYnKTsKCiAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgIC8vIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsgbmFtZTogJ3NlbmRMZXR0ZXJTdWNjZXNzZnVsJywgcXVlcnk6IHsgdHlwZTogdGhpcy50eXBlIH0gfSkKICAgICAgICAgICAgICBfdGhpczEyLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICBuYW1lOiAnY2hlY2tvdXRTdWNjZXNzJywKICAgICAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgICAgIGZyb206ICJlbnRyeURldGFpbCIsCiAgICAgICAgICAgICAgICAgIGlkczogcmVzLmRhdGEuam9pbigpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgX3RoaXMxMi4kbWVzc2FnZS5lcnJvcign5LiL5b+r6YCS6L+Q5Y2V5aSx6LSl77yM6K+36YeN6K+VJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgbWFpbE9yZGVyKGxpc3QpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgY29uc29sZS5sb2cocmVzLCAn5ZG85Y+r5b+r6YCS5o+95pS2Jyk7CgogICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgIF90aGlzMTIuJHJvdXRlci5yZXBsYWNlKHsKICAgICAgICAgICAgICBuYW1lOiAnc2VuZExldHRlclN1Y2Nlc3NmdWwnLAogICAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgICBpZHM6IHJlcy5kYXRhLmpvaW4oKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7IC8vIOS4jeWGjeWMuuWIhuWbnuWvhOWSjOWvhOS7tuaIkOWKn+eahOmhtemdogoKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzMTIuJG1lc3NhZ2UuZXJyb3IoJ+S4i+W/q+mAkui/kOWNleWksei0pe+8jOivt+mHjeivlScpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKCiAgICAgICAgX3RoaXMxMi4kbWVzc2FnZS53YXJuaW5nKCLor7flhYjlrozlloTlv4Xloavkv6Hmga8iKTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVDaGFuZ2UodmFsdWUpIHsvLyBjb25zb2xlLmxvZyh0aGlzLnNlbmRlckRhdGEuY2l0eSkKICAgICAgLy8gY29uc3Qgc2VsZWN0Q2l0eSA9IHRoaXMuJHJlZnMubXlDYXNjYWRlci5nZXRDaGVja2VkTm9kZXMoKVswXQogICAgICAvLyB2YXIgY2l0eUFycmF5ID0gc2VsZWN0Q2l0eS5wYXRoTGFiZWxzCiAgICAgIC8vIHZhciBzdHIgPSAnJwogICAgICAvLyBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgY2l0eUFycmF5Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICAvLyAgIHN0ciArPSBjaXR5QXJyYXlbaW5kZXhdCiAgICAgIC8vIH0KICAgICAgLy8gdGhpcy5hZGRyZXNzID0gc3RyCiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuYWRkcmVzcykKICAgIH0sCiAgICBmaW5kUmVnaW9uQ29kZTogZnVuY3Rpb24gZmluZFJlZ2lvbkNvZGUoc2VuZGVyKSB7CiAgICAgIHZhciBjb2RlOwogICAgICB0aGlzLm9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAocHJvdmluY2UpIHsKICAgICAgICBpZiAoc2VuZGVyLmNpdHlbMF0gPT0gcHJvdmluY2UubmFtZSkgewogICAgICAgICAgcHJvdmluY2UuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2l0eSkgewogICAgICAgICAgICBpZiAoc2VuZGVyLmNpdHlbMV0gPT0gY2l0eS5uYW1lKSB7CiAgICAgICAgICAgICAgY2l0eS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjb3VudHkpIHsKICAgICAgICAgICAgICAgIGlmIChzZW5kZXIuY2l0eVsyXSA9PSBjb3VudHkubmFtZSkgewogICAgICAgICAgICAgICAgICBjb2RlID0gY291bnR5LmNvZGU7CiAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIGNvZGU7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgImV4cHJlc3NEYXRhLmV4cHJlc3NNZXRob2QiOiBmdW5jdGlvbiBleHByZXNzRGF0YUV4cHJlc3NNZXRob2QodmFsKSB7CiAgICAgIGNvbnNvbGUubG9nKHZhbCk7CiAgICAgIHRoaXMuJHJlZnMuZXhwcmVzc2FnZUZvcm0uY2xlYXJWYWxpZGF0ZSgidGltZSIpOwoKICAgICAgaWYgKHZhbCA9PSAxKSB7CiAgICAgICAgdGhpcy5leHByZXNzRGF0YS50aW1lID0gIuS4iumXqOWPluS7tiI7CiAgICAgICAgdGhpcy50aW1lRGlzYWJsZSA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5leHByZXNzRGF0YS50aW1lID0gIiI7CiAgICAgICAgdGhpcy50aW1lRGlzYWJsZSA9IGZhbHNlOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},null]}