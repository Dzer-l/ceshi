{"remainingRequest":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/thread-loader/dist/cjs.js!/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/home/jenkins_data/workspace/页面-公证处后台/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jenkins_data/workspace/页面-公证处后台/src/components/entryTab/propertyInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jenkins_data/workspace/页面-公证处后台/src/components/entryTab/propertyInfo.vue","mtime":1634724784694},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvamVua2luc19kYXRhL3dvcmtzcGFjZS9cdTk4NzVcdTk3NjItXHU1MTZDXHU4QkMxXHU1OTA0XHU1NDBFXHU1M0YwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvciI7CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyB2YXIgX2kgPSBhcnIgPT0gbnVsbCA/IG51bGwgOiB0eXBlb2YgU3ltYm9sICE9PSAidW5kZWZpbmVkIiAmJiBhcnJbU3ltYm9sLml0ZXJhdG9yXSB8fCBhcnJbIkBAaXRlcmF0b3IiXTsgaWYgKF9pID09IG51bGwpIHJldHVybjsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfcywgX2U7IHRyeSB7IGZvciAoX2kgPSBfaS5jYWxsKGFycik7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7IH0KCmZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdCA9IHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSB8fCBvWyJAQGl0ZXJhdG9yIl07IGlmICghaXQpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgdmFyIEYgPSBmdW5jdGlvbiBGKCkge307IHJldHVybiB7IHM6IEYsIG46IGZ1bmN0aW9uIG4oKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH0sIGU6IGZ1bmN0aW9uIGUoX2UyKSB7IHRocm93IF9lMjsgfSwgZjogRiB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfSB2YXIgbm9ybWFsQ29tcGxldGlvbiA9IHRydWUsIGRpZEVyciA9IGZhbHNlLCBlcnI7IHJldHVybiB7IHM6IGZ1bmN0aW9uIHMoKSB7IGl0ID0gaXQuY2FsbChvKTsgfSwgbjogZnVuY3Rpb24gbigpIHsgdmFyIHN0ZXAgPSBpdC5uZXh0KCk7IG5vcm1hbENvbXBsZXRpb24gPSBzdGVwLmRvbmU7IHJldHVybiBzdGVwOyB9LCBlOiBmdW5jdGlvbiBlKF9lMykgeyBkaWRFcnIgPSB0cnVlOyBlcnIgPSBfZTM7IH0sIGY6IGZ1bmN0aW9uIGYoKSB7IHRyeSB7IGlmICghbm9ybWFsQ29tcGxldGlvbiAmJiBpdC5yZXR1cm4gIT0gbnVsbCkgaXQucmV0dXJuKCk7IH0gZmluYWxseSB7IGlmIChkaWRFcnIpIHRocm93IGVycjsgfSB9IH07IH0KCmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9CgpmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgcGFya2luZ0NvbnRyYWN0SW5mbywgbm90YXJ5UGFwZXJQcmV2aWV3SW1nLCBkb3duTG9hZE5vdGFyeVBhcGVyLCBtb2RpZnlQYXJraW5nQ29udHJhY3RJbmZvLCBvcmRlck5vdGFyeUxpc3QsIG5vdGFyeVBhcGVyUHJldmlldyB9IGZyb20gJy4uLy4uL2FwaS9wYXJraW5nU3BhY2UnOwppbXBvcnQgKiBhcyBuZXdIb3VzZSBmcm9tICcuLi8uLi9hcGkvbmV3aG91c2UnOwppbXBvcnQgKiBhcyBkZSBmcm9tICdAL2FwaS9kZWxlZ2F0ZSc7CmltcG9ydCBhdWRpdERvY3VtZW50c0RpYWxvZyBmcm9tICcuL2F1ZGl0RG9jdW1lbnRzLnZ1ZSc7CmltcG9ydCB7IGZpbHRlck5vdGFyeVBhcGVyVHlwZSwgZmlsdGVyQXVkaXRTdGF0dXMsIGZpbHRlclBheW1lbnRNZXRob2QgfSBmcm9tICcuLi8uLi91dGlscy9maWx0ZXJzJzsKaW1wb3J0IHsgcHJpbnRJbml0LCBwcmludCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaW50RG9jdW1lbnRzJzsKaW1wb3J0IHNldFNpZ25BcmVhIGZyb20gJy4vc2V0U2lnbkFyZWEudnVlJzsKaW1wb3J0IHsgc2hvd0xvYWRpbmcsIGhpZGVMb2FkaW5nIH0gZnJvbSAiLi4vLi4vdXRpbHMvbG9hZGluZyI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBhdWRpdERvY3VtZW50c0RpYWxvZzogYXVkaXREb2N1bWVudHNEaWFsb2csCiAgICBzZXRTaWduQXJlYTogc2V0U2lnbkFyZWEKICB9LAogIGZpbHRlcnM6IHsKICAgIGZpbHRlck5vdGFyeVBhcGVyVHlwZTogZmlsdGVyTm90YXJ5UGFwZXJUeXBlLAogICAgZmlsdGVyQXVkaXRTdGF0dXM6IGZpbHRlckF1ZGl0U3RhdHVzLAogICAgZmlsdGVyUGF5bWVudE1ldGhvZDogZmlsdGVyUGF5bWVudE1ldGhvZAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciBfcmVmOwoKICAgIHZhciB2YWxpZEFkZHJlc3MgPSBmdW5jdGlvbiB2YWxpZEFkZHJlc3MocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSB7CiAgICAgIGlmICghdmFsdWUpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+i+k+WFpeivpue7huWcsOWdgCcpKTsKICAgICAgfSBlbHNlIGlmICh2YWx1ZS5sZW5ndGggPCA1KSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfor7fovpPlhaXmraPnoa7nmoTor6bnu4blnLDlnYAnKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfSAvLyB9CgogICAgfTsKCiAgICByZXR1cm4gX3JlZiA9IHsKICAgICAgZWRpdDogdHJ1ZSwKICAgICAgYmFzaWNEYXRhOiAnJywKICAgICAgcnVsZUZvcm06IHsKICAgICAgICBwcm9wZXJ0eVNpdGU6ICcnLAogICAgICAgIGNvbnN0cnVjdGlvbkFyZWE6ICcnLAogICAgICAgIHByb3BlcnR5UHJpY2U6ICcnLAogICAgICAgIGNpdHk6IFtdLAogICAgICAgIGFkZHJlc3M6ICcnCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgcHJvcGVydHlTaXRlOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICB2YWxpZGF0b3I6IHZhbGlkQWRkcmVzcywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIGNvbnN0cnVjdGlvbkFyZWE6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmiL/kuqfpnaLnp68nLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgcHJvcGVydHlQcmljZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeaIv+S6p+S7t+agvCcsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9LAogICAgICBvcmRlcklkOiB0aGlzLiRyb3V0ZS5xdWVyeS5vcmRlcklkLAogICAgICBjaXR5QXJyOiBbXSwKICAgICAgcmVhbEVzdGF0ZURhdGE6IHt9LAogICAgICBqdXJpc2RpY3Rpb246IGZhbHNlLAogICAgICBhdWRpdERvY3VtZW50c0RpYWxvZ1Nob3c6IGZhbHNlLAogICAgICBpZnJhbWVTdGE6IGZhbHNlLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgLy8gdGFibGVEYXRhOiBbXSwKICAgICAgdGFibGVEYXRhOiBBcnJheSgyKS5maWxsKHsKICAgICAgICBub3RhcnlQYXBlclR5cGU6ICLlkIjlkIwv5Y2P6K6uIgogICAgICB9KSwKICAgICAgbm90YXJ5TnVtRm9ybTogewogICAgICAgIG5vdGFyeU51bTogIiIKICAgICAgfSwKICAgICAgbm90YXJ5TnVtRm9ybVJ1bGVzOiB7CiAgICAgICAgbm90YXJ5TnVtOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5YWs6K+B5Lmm57yW5Y+3JywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH0gLy8geyBtaW46IDMsIG1heDogNSwgbWVzc2FnZTogJ+mVv+W6puWcqCAzIOWIsCA1IOS4quWtl+espicsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXQogICAgICB9LAogICAgICBvcmRlckRlZmVuc2VQYXJraW5nQ29udHJhY3REVE86IHt9LAogICAgICAvLyDkuovpobnln7rmnKzkv6Hmga8KICAgICAgbm90YXJ5UGFwZXJEVE9MaXN0OiBbXSwKICAgICAgLy8g5a6h5qC457G75paH5Lmm5YiX6KGoCiAgICAgIG9yZGVySG91c2VFbnRydXN0RFRPOiB7fQogICAgfSwgX2RlZmluZVByb3BlcnR5KF9yZWYsICJvcmRlcklkIiwgdGhpcy4kcm91dGUucXVlcnkub3JkZXJJZCksIF9kZWZpbmVQcm9wZXJ0eShfcmVmLCAiZG9jdW1lbnRzTGlzdCIsIFtdKSwgX2RlZmluZVByb3BlcnR5KF9yZWYsICJlZGl0Um93IiwgIiIpLCBfZGVmaW5lUHJvcGVydHkoX3JlZiwgImZpbGVTaWduTGlzdCIsIFtdKSwgX2RlZmluZVByb3BlcnR5KF9yZWYsICJkb2NJbmZvIiwge30pLCBfZGVmaW5lUHJvcGVydHkoX3JlZiwgInNpZ25Cb3hTaG93IiwgZmFsc2UpLCBfZGVmaW5lUHJvcGVydHkoX3JlZiwgImxpc3RPZk9yZ2FuaXplcnMiLCBbXSksIF9kZWZpbmVQcm9wZXJ0eShfcmVmLCAic2V0VXBBQ29udHJhY3RvckRpYWxvZ1Zpc2libGUiLCBmYWxzZSksIF9kZWZpbmVQcm9wZXJ0eShfcmVmLCAidGlwc1Zpc2libGUiLCBmYWxzZSksIF9kZWZpbmVQcm9wZXJ0eShfcmVmLCAib3JnYW5pemVyIiwgIiIpLCBfZGVmaW5lUHJvcGVydHkoX3JlZiwgIm5vdGFyeVBhcGVyIiwge30pLCBfZGVmaW5lUHJvcGVydHkoX3JlZiwgInRpcHMiLCAiIiksIF9yZWY7CiAgfSwKICBjb21wdXRlZDogewogICAgZWRpdFRleHQ6IGZ1bmN0aW9uIGVkaXRUZXh0KCkgewogICAgICByZXR1cm4gdGhpcy5lZGl0ID8gJ+e8lui+kScgOiAn5L+d5a2YJzsKICAgIH0sCiAgICBhdWRpdFN0YXR1c0NvbXB1dGVkOiBmdW5jdGlvbiBhdWRpdFN0YXR1c0NvbXB1dGVkKCkgewogICAgICAvLyAwOiAi5pyq5a6h5qC4IiwKICAgICAgLy8gMTogIuWuoeaguOmAmui/hyIsCiAgICAgIC8vIDI6ICLlrqHmoLjkuI3pgJrov4ciLAogICAgICBpZiAodGhpcy5kb2N1bWVudHNMaXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICByZXR1cm4gIXRoaXMuZG9jdW1lbnRzTGlzdC5ldmVyeShmdW5jdGlvbiAoaSkgewogICAgICAgICAgcmV0dXJuIGkuYXVkaXRTdGF0dXMgPT0gMTsKICAgICAgICB9KTsgLy8gcmV0dXJuIHRoaXMuZG9jdW1lbnRzTGlzdFswXS5hdWRpdFN0YXR1cyAhPSAxCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5iYXNpY0RhdGEgPSB0aGlzLiRwYXJlbnQuJHBhcmVudC4kcGFyZW50LmJhc2ljRGF0YTsgLy8gdGhpcy5iYXNpY0RhdGEucHJvZENvZGUgPT09ICd5c2YnICYmIHRoaXMuZ2V0RGF0YSgpCQkJLy8g5LiA5omL5oi/LeaIv+S6p+S/oeaBrwoKICAgIHRoaXMuZ2V0T3JkZXJEYXRhKCk7IC8vIOS6i+mhueS/oeaBrwoKICAgIHRoaXMuanVyaXNkaWN0aW9uID0gdGhpcy4kcGFyZW50LiRwYXJlbnQuJHBhcmVudC5qdXJpc2RpY3Rpb247CiAgICB0aGlzLmdldFJldmlld0RvY3VtZW50cygpOwogICAgdGhpcy5nZXRTdGFtcFNpZ25MaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDliqDnm5bnrb7nq6AKICAgIGhhbmRsZVN0YW1wU2lnbjogZnVuY3Rpb24gaGFuZGxlU3RhbXBTaWduKHJvdykgewogICAgICB0aGlzLm9yZ2FuaXplciA9ICcnOwogICAgICB0aGlzLm5vdGFyeVBhcGVyID0gcm93OyAvLyB0aGlzLnNldFVwQUNvbnRyYWN0b3JEaWFsb2dWaXNpYmxlID0gdHJ1ZQoKICAgICAgdGhpcy5kZXRlcm1pbmVUaGVTZXR0aW5ncygpOwogICAgfSwKICAgIC8vIOWKoOebluetvueroOehruiupAogICAgZGV0ZXJtaW5lVGhlU2V0dGluZ3M6IGZ1bmN0aW9uIGRldGVybWluZVRoZVNldHRpbmdzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKCLliqDnm5bnoa7orqQiKTsKICAgICAgY29uc29sZS5sb2codGhpcy5vcmdhbml6ZXIpOyAvLyB0aGlzLnRpcHNWaXNpYmxlID0gdHJ1ZQogICAgICAvLyByZXR1cm4KCiAgICAgIG5ld0hvdXNlLmdhdGVTaWduZWRJbnRlcmZhY2UoewogICAgICAgIG5vdGFyeVBhcGVySWQ6IHRoaXMubm90YXJ5UGFwZXIuaWQsCiAgICAgICAgb3JkZXJJZDogdGhpcy5vcmRlcklkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiAn55uW56ug562+572y5oiQ5YqfJwogICAgICAgICAgfSk7CgogICAgICAgICAgX3RoaXMyLiRyb3V0ZXIuZ28oMCk7CgogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiAyMDAwMywgIuayoeaJvuWIsOiuouWNleWFrOivgeWRmOS/oeaBryIKICAgICAgICAgKiAyMDEwNiwgIuWFrOivgeWRmOiTneeroOacquS4iuS8oCIKICAgICAgICAgKiA4MDAwNywgIuWFrOivgeWkhOe6oueroOacquS4iuS8oCIKICAgICAgICAgKiAyMDQxMCwgIuivt+Whq+WGmeWFrOivgeS5pue8luWPtyIKICAgICAgICAgKi8KCgogICAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAxMDYgfHwgcmVzLmNvZGUgPT09IDgwMDA3KSB7CiAgICAgICAgICBfdGhpczIudGlwcyA9IHJlcy5tc2c7CiAgICAgICAgICBfdGhpczIudGlwc1Zpc2libGUgPSB0cnVlOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMyLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cgfHwgIueblueroOetvue9suWksei0pe+8jOivt+eojeWQjuWGjeivlSIpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDojrflj5blhazor4HlkZjliJfooagKICAgIGdldFN0YW1wU2lnbkxpc3Q6IGZ1bmN0aW9uIGdldFN0YW1wU2lnbkxpc3QoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgbmV3SG91c2UuZ2V0QUxpc3RPZk9yZ2FuaXplcnMoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIF90aGlzMy5saXN0T2ZPcmdhbml6ZXJzID0gcmVzLmRhdGE7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkgewogICAgICB0aGlzLnNpZ25Cb3hTaG93ID0gZmFsc2U7CiAgICAgIHRoaXMuZ2V0UmV2aWV3RG9jdW1lbnRzKCk7CiAgICB9LAogICAgbG9hZGluZ1N1Y2Nlc3M6IGZ1bmN0aW9uIGxvYWRpbmdTdWNjZXNzKCkgewogICAgICBoaWRlTG9hZGluZygpOwogICAgfSwKICAgIGhhbmRsZUVycm9yOiBmdW5jdGlvbiBoYW5kbGVFcnJvcihlcnIpIHsKICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgaGlkZUxvYWRpbmcoKTsKICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5omT5byA5byC5bi477yM6K+356iN5ZCO5YaN6K+VIik7CiAgICB9LAogICAgaGFuZGxlU2hvd05vdGFyeU51bTogZnVuY3Rpb24gaGFuZGxlU2hvd05vdGFyeU51bShyb3cpIHsKICAgICAgY29uc29sZS5sb2cocm93Lm5vdGFyeU51bSk7CiAgICAgIHRoaXMuJGFsZXJ0KCI8cCBzdHlsZT1cImZvbnQtc2l6ZToxNnB4O1wiPiIuY29uY2F0KHJvdy5ub3RhcnlOdW0sICI8L3A+IiksICflhazor4HkuabnvJblj7cnLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwKICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gY2FsbGJhY2soYWN0aW9uKSB7fQogICAgICB9KTsKICAgIH0sCiAgICAvLyDorr7nva7nrb7lkI3ljLrln58KICAgIGhhbmRsZVNldFNpZ25BcmVhOiBmdW5jdGlvbiBoYW5kbGVTZXRTaWduQXJlYShlKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgZGUuZ2V0RW50cnVzdEluZm8oewogICAgICAgIG9yZGVySWQ6IHRoaXMub3JkZXJJZAogICAgICB9KS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUocmVzKSB7CiAgICAgICAgICB2YXIgZmxpZUxpc3QsIGZpbGVTaWduTGlzdCwgX2l0ZXJhdG9yLCBfc3RlcCwgaSwgX2l0ZXJhdG9yMiwgX3N0ZXAyLCBfc3RlcDIkdmFsdWUsIGluZGV4LCBqOwoKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgIGZsaWVMaXN0ID0gW107CiAgICAgICAgICAgICAgICAgICAgZmlsZVNpZ25MaXN0ID0gW107CiAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIocmVzLmRhdGEuYW5uZXhEVE9MaXN0KTsKCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBfc3RlcC52YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgZmxpZUxpc3QucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogaS5vcmlnaW5GaWxlTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IGkuZmlsZU5hbWUKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICB9IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwoKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIocmVzLmRhdGEuZW50cnVzdExpc3QuZW50cmllcygpKTsKCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9zdGVwMiR2YWx1ZSA9IF9zbGljZWRUb0FycmF5KF9zdGVwMi52YWx1ZSwgMiksIGluZGV4ID0gX3N0ZXAyJHZhbHVlWzBdLCBqID0gX3N0ZXAyJHZhbHVlWzFdOwogICAgICAgICAgICAgICAgICAgICAgICBmaWxlU2lnbkxpc3QucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhbE5hbWU6IGoucmVhbE5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnblVzZXJJZDogai5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICBsb3dMZWZ0WDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICBsb3dMZWZ0WTogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcklkOiBfdGhpczQub3JkZXJJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICBub3RhcnlQYXBlcklkOiAnJywKICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlOiAnJywKICAgICAgICAgICAgICAgICAgICAgICAgICBjb3ZlclR5cGU6IDIKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBfdGhpczQuZmxpZUxpc3QgPSBmbGllTGlzdDsKICAgICAgICAgICAgICAgICAgICBfdGhpczQuZmlsZVNpZ25MaXN0ID0gZmlsZVNpZ25MaXN0OyAvLyB0aGlzLmVudHJ1c3RJbmZvID0gcmVzLmRhdGE7CgogICAgICAgICAgICAgICAgICAgIF90aGlzNC5kb2NJbmZvID0gewogICAgICAgICAgICAgICAgICAgICAgZG9jSWQ6IGUuaWQsCiAgICAgICAgICAgICAgICAgICAgICBkb2NOYW1lOiBlLm9yaWdpbmFsRmlsZW5hbWUsCiAgICAgICAgICAgICAgICAgICAgICBzaWduU3RhdHVzOiBlLnNpZ25TdGF0dXMKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSgpKTsKICAgIH0sCiAgICAvLyDlrqHmoLjmlofkuaYKICAgIGhhbmRsZUF1ZGl0RG9jdW1lbnRzOiBmdW5jdGlvbiBoYW5kbGVBdWRpdERvY3VtZW50cygpIHsKICAgICAgc2hvd0xvYWRpbmcoKTsKICAgICAgdGhpcy5hdWRpdERvY3VtZW50c0RpYWxvZ1Nob3cgPSB0cnVlOwogICAgfSwKICAgIGF1ZGl0RG9jdW1lbnRzRGlhbG9nQ2xvc2U6IGZ1bmN0aW9uIGF1ZGl0RG9jdW1lbnRzRGlhbG9nQ2xvc2UoKSB7CiAgICAgIHRoaXMuYXVkaXREb2N1bWVudHNEaWFsb2dTaG93ID0gZmFsc2U7CiAgICAgIHRoaXMuZ2V0UmV2aWV3RG9jdW1lbnRzKCk7CiAgICAgIHRoaXMuZ2V0T3JkZXJEYXRhKCk7CiAgICB9LAogICAgLy8g6I635Y+W6ZyA6KaB5a6h5qC455qE5paH5Lmm5YiX6KGoCiAgICBnZXRSZXZpZXdEb2N1bWVudHM6IGZ1bmN0aW9uIGdldFJldmlld0RvY3VtZW50cygpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBvcmRlck5vdGFyeUxpc3QoX3RoaXM1Lm9yZGVySWQpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygi6ZyA6KaB5a6h5qC455qE5paH5Lmm5YiX6KGoLS0tIiwgcmVzKTsKICAgICAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcyAmJiByZXMuZGF0YSkgewogICAgICAgICAgICAgICAgICBfdGhpczUuZG9jdW1lbnRzTGlzdCA9IHJlcy5kYXRhOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyDojrflj5bkuovpobnkv6Hmga8gLS0tIOS4gOaJi+aIv+mXtOWSjOS6uumYsui9puS9jQogICAgZ2V0T3JkZXJEYXRhOiBmdW5jdGlvbiBnZXRPcmRlckRhdGEoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciByZXMsIG9yZGVySG91c2VFbnRydXN0RFRPOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHBhcmtpbmdDb250cmFjdEluZm8oX3RoaXM2Lm9yZGVySWQpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcywgIuiOt+WPluS6i+mhueS/oeaBryIpOwoKICAgICAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcyAmJiByZXMuZGF0YSkgewogICAgICAgICAgICAgICAgICBfdGhpczYub3JkZXJEZWZlbnNlUGFya2luZ0NvbnRyYWN0RFRPID0gcmVzLmRhdGEub3JkZXJEZWZlbnNlUGFya2luZ0NvbnRyYWN0RFRPOyAvLyDkurrpmLLovabkvY3kv6Hmga8KCiAgICAgICAgICAgICAgICAgIF90aGlzNi5ub3RhcnlQYXBlckRUT0xpc3QgPSByZXMuZGF0YS5ub3RhcnlQYXBlckRUT0xpc3Q7IC8vIOWuoeaguOexu+aWh+S5puWIl+ihqAogICAgICAgICAgICAgICAgICAvLyB0aGlzLm9yZGVySG91c2VFbnRydXN0RFRPID0gcmVzLmRhdGEub3JkZXJIb3VzZUVudHJ1c3REVE8JCQkJCQkvLyDkuIDmiYvmiL/kv6Hmga8KCiAgICAgICAgICAgICAgICAgIG9yZGVySG91c2VFbnRydXN0RFRPID0gcmVzLmRhdGEub3JkZXJIb3VzZUVudHJ1c3REVE87CgogICAgICAgICAgICAgICAgICBpZiAob3JkZXJIb3VzZUVudHJ1c3REVE8pIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczYucmVhbEVzdGF0ZURhdGEgPSBvcmRlckhvdXNlRW50cnVzdERUTzsKICAgICAgICAgICAgICAgICAgICBfdGhpczYucnVsZUZvcm0ucHJvcGVydHlTaXRlID0gb3JkZXJIb3VzZUVudHJ1c3REVE8uZGV0YWlsQWRkcmVzczsKICAgICAgICAgICAgICAgICAgICBfdGhpczYucnVsZUZvcm0uY29uc3RydWN0aW9uQXJlYSA9IG9yZGVySG91c2VFbnRydXN0RFRPLmNvbnN0cnVjdGlvbkFyZWE7CiAgICAgICAgICAgICAgICAgICAgX3RoaXM2LnJ1bGVGb3JtLnByb3BlcnR5UHJpY2UgPSBvcmRlckhvdXNlRW50cnVzdERUTy50YXJnZXRBbW91bnQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g6aKE6KeI5ZCI5ZCMCiAgICBoYW5kbGVQcml2aWV3OiBmdW5jdGlvbiBoYW5kbGVQcml2aWV3KHJvdykgewogICAgICB2YXIgX2FyZ3VtZW50cyA9IGFyZ3VtZW50cywKICAgICAgICAgIF90aGlzNyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIG5lZWRSZXR1cm4sIGltYWdlbGlzdCwgcmVzLCBpbWFnZUlkTGlzdCwgX2l0ZXJhdG9yMywgX3N0ZXAzLCBpdGVtLCBpbWFnZUJhc2U2NDsKCiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBuZWVkUmV0dXJuID0gX2FyZ3VtZW50cy5sZW5ndGggPiAxICYmIF9hcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHNbMV0gOiBmYWxzZTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJvdyk7CiAgICAgICAgICAgICAgICBzaG93TG9hZGluZygpOwogICAgICAgICAgICAgICAgaW1hZ2VsaXN0ID0gW107CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gbm90YXJ5UGFwZXJQcmV2aWV3KHJvdy5pZCk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0NC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghKHJlcy5zdWNjZXNzICYmIHJlcy5kYXRhICYmIHJlcy5kYXRhLmRhdGEuaWRzLmxlbmd0aCA+IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGltYWdlSWRMaXN0ID0gcmVzLmRhdGEuZGF0YS5pZHM7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoaW1hZ2VJZExpc3QpOwogICAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSAxMDsKCiAgICAgICAgICAgICAgICBfaXRlcmF0b3IzLnMoKTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIGlmICgoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uKCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaXRlbSA9IF9zdGVwMy52YWx1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM3LmdldEltYWdlQmFzZTY0KGl0ZW0pOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgaW1hZ2VCYXNlNjQgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgIGltYWdlbGlzdC5wdXNoKGltYWdlQmFzZTY0KTsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjU7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMjI7CiAgICAgICAgICAgICAgICBfY29udGV4dDQudDAgPSBfY29udGV4dDRbImNhdGNoIl0oMTApOwoKICAgICAgICAgICAgICAgIF9pdGVyYXRvcjMuZShfY29udGV4dDQudDApOwoKICAgICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSAyNTsKCiAgICAgICAgICAgICAgICBfaXRlcmF0b3IzLmYoKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmZpbmlzaCgyNSk7CgogICAgICAgICAgICAgIGNhc2UgMjg6CiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpOwoKICAgICAgICAgICAgICAgIGlmICghbmVlZFJldHVybikgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDMxOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgaW1hZ2VsaXN0KTsKCiAgICAgICAgICAgICAgY2FzZSAzMToKICAgICAgICAgICAgICAgIF90aGlzNy4kc3RvcmUuY29tbWl0KCdhcHAvQ0hBTkdFX0lNQUdFJywgaW1hZ2VsaXN0KTsKCiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDM2OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMzQ6CiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIGZhbHNlKTsKCiAgICAgICAgICAgICAgY2FzZSAzNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCwgbnVsbCwgW1sxMCwgMjIsIDI1LCAyOF1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g5qC55o2u5p2Q5paZaWTojrflj5bmnZDmlpliYXNlNjQKICAgIGdldEltYWdlQmFzZTY0OiBmdW5jdGlvbiBnZXRJbWFnZUJhc2U2NChpZCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBub3RhcnlQYXBlclByZXZpZXdJbWcoewogICAgICAgICAgICAgICAgICBpZDogaWQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDUuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIShyZXMuc3VjY2VzcyAmJiByZXMuZGF0YSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwnICsgcmVzLmRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyDnvJbovpEKICAgIGhhbmRsZUVkaXQ6IGZ1bmN0aW9uIGhhbmRsZUVkaXQocm93KSB7CiAgICAgIGNvbnNvbGUubG9nKHJvdyk7CiAgICAgIHRoaXMuZWRpdFJvdyA9IHJvdzsgLy8gdGhpcy5pZnJhbWVTdGEgPSB0cnVlCgogICAgICB2YXIgbW9kZSA9IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9NT0RFOwoKICAgICAgaWYgKG1vZGUgPT09ICdkZXZlbG9wbWVudCcpIHsKICAgICAgICB0aGlzLmh0dHAgPSAnaHR0cDovLzE5Mi4xNjguMS4xODY6MTIwMDknOwogICAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICd0ZXN0JykgewogICAgICAgIHRoaXMuaHR0cCA9ICdodHRwczovL3Rlc3Qtb25seW9mZmljZS5sdnpoZW5neXVuLmNuJzsKICAgICAgfSBlbHNlIGlmIChtb2RlID09PSAncHJvZHVjdGlvbicpIHsKICAgICAgICB0aGlzLmh0dHAgPSAnaHR0cHM6Ly9vZmZpY2UubHZ6aGVuZ3l1bi5jbic7CiAgICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gJ3N0YWdpbmcnKSB7CiAgICAgICAgdGhpcy5odHRwID0gJ2h0dHBzOi8vdGVzdC1vbmx5b2ZmaWNlLmx2emhlbmd5dW4uY24nOwogICAgICB9CgogICAgICB3aW5kb3cub3BlbigiIi5jb25jYXQodGhpcy5odHRwLCAiL3BhZ2UvZ28tb3Blbi1ub3RhcnktcGFwZXIvIikuY29uY2F0KHRoaXMub3JkZXJJZCwgIi8iKS5jb25jYXQocm93LmlkKSwgJ3Rlc3QnKTsgLy8gd2luZG93Lm9wZW4oYGh0dHBzOi8vdGVzdC1vbmx5b2ZmaWNlLmx2emhlbmd5dW4uY24vcGFnZS9nby1vcGVuLW5vdGFyeS1wYXBlci8xNDI4MjQyOTg2ODcxNjAzMjAyLzE0MjgyNDU3MTQ2NDk3OTI1MTRgLCAndGVzdCcpCgogICAgICB2YXIgd2Vic29ja2V0OwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICgnV2ViU29ja2V0JyBpbiB3aW5kb3cpIHsKICAgICAgICB3ZWJzb2NrZXQgPSBuZXcgV2ViU29ja2V0KHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9XRUJTT0NLRVRfV1NTICsgJy93ZWJzb2NrZXQvJyArIHJvdy5pZCk7CiAgICAgIH0KCiAgICAgIHdlYnNvY2tldC5vbm9wZW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc29sZS5sb2coJ+i/nuaOpeaIkOWKnycpOwogICAgICB9OwoKICAgICAgd2Vic29ja2V0Lm9uY2xvc2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc29sZS5sb2coJ+mAgOWHuui/nuaOpScpOwogICAgICB9OwoKICAgICAgd2Vic29ja2V0Lm9ubWVzc2FnZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9yZWYzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygi5pS25Yiw5raI5oGvLS0tLS0iICsgZXZlbnQuZGF0YSk7CiAgICAgICAgICAgICAgICAgIGlmIChldmVudC5kYXRhICE9PSAn6L+e5o6l5oiQ5YqfJykgewogICAgICAgICAgICAgICAgICAgIGlmIChKU09OLnBhcnNlKGV2ZW50LmRhdGEpID09ICJzdWNjZXNzIikgewogICAgICAgICAgICAgICAgICAgICAgLy8g5paH5Lu25bey57uP5L+d5a2Y55qE5qCH6K6wCiAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5nZXRPcmRlckRhdGEoKTsKCiAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5nZXRSZXZpZXdEb2N1bWVudHMoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgICB9KSk7CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gyKSB7CiAgICAgICAgICByZXR1cm4gX3JlZjMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCk7CgogICAgICB3ZWJzb2NrZXQub25lcnJvciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zb2xlLmxvZygn6L+e5o6l5Ye66ZSZJyk7CiAgICAgIH07CiAgICB9LAogICAgLy8g5aGr5YaZ5YWs6K+B5Lmm57yW5Y+3CiAgICBoYW5kbGVGaWxsOiBmdW5jdGlvbiBoYW5kbGVGaWxsKHJvdykgewogICAgICB0aGlzLmVkaXRSb3cgPSByb3c7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgaGFuZGxlU3VibWl0OiBmdW5jdGlvbiBoYW5kbGVTdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2codGhpcy5lZGl0Um93KTsKICAgICAgdGhpcy4kcmVmcy5ub3RhcnlOdW1Gb3JtLnZhbGlkYXRlKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmNCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KHZhbGlkKSB7CiAgICAgICAgICB2YXIgcmVzOwogICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIGlmICghdmFsaWQpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIHJldHVybiBtb2RpZnlQYXJraW5nQ29udHJhY3RJbmZvKHsKICAgICAgICAgICAgICAgICAgICBpZDogX3RoaXM4LmVkaXRSb3cuaWQsCiAgICAgICAgICAgICAgICAgICAgbm90YXJ5TnVtOiBfdGhpczgubm90YXJ5TnVtRm9ybS5ub3RhcnlOdW0KICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDcuc2VudDsKCiAgICAgICAgICAgICAgICAgIGlmICghcmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBfdGhpczguJG1lc3NhZ2Uuc3VjY2Vzcygi5aGr5YaZ5YWs6K+B5Lmm57yW5Y+35oiQ5Yqf77yBIik7CgogICAgICAgICAgICAgICAgICBfdGhpczguZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgX3RoaXM4LmdldE9yZGVyRGF0YSgpOwoKICAgICAgICAgICAgICAgICAgX3RoaXM4LmdldFJldmlld0RvY3VtZW50cygpOwoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICAgIF90aGlzOC4kbWVzc2FnZS5lcnJvcihyZXMubXNnIHx8ICLloavlhpnlhazor4HkuabnvJblj7flpLHotKXvvIzor7fnqI3lkI7lho3or5XvvIEiKTsKCiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZTcpOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDMpIHsKICAgICAgICAgIHJldHVybiBfcmVmNC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKSk7CiAgICB9LAogICAgLy8g5omT5Y2w5ZCI5ZCMCiAgICBoYW5kbGVQcmludDogZnVuY3Rpb24gaGFuZGxlUHJpbnQocm93KSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KCkgewogICAgICAgIHZhciBpbWFnZUxpc3Q7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyb3cpOwogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzOS5oYW5kbGVQcml2aWV3KHJvdywgdHJ1ZSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGltYWdlTGlzdCA9IF9jb250ZXh0OC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghaW1hZ2VMaXN0KSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIHByaW50SW5pdChpbWFnZUxpc3QpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBwcmludCgpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBfdGhpczkuJG1lc3NhZ2UuZXJyb3IoIuaJk+WNsOWksei0pSIpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU4KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g5LiL6L295ZCI5ZCMCiAgICBoYW5kbGVEb3dubG9hZDogZnVuY3Rpb24gaGFuZGxlRG93bmxvYWQocm93KSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOSgpIHsKICAgICAgICB2YXIgZGF0YSwgcmVzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0OSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgb3JkZXJJZDogX3RoaXMxMC5vcmRlcklkLAogICAgICAgICAgICAgICAgICBub3RhcnlQYXBlcklkOiByb3cuaWQKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gZG93bkxvYWROb3RhcnlQYXBlcihkYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ5LnNlbnQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgICAgICAgICAgIGlmICghKHJlcy50eXBlID09PSAiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczEwLiRtZXNzYWdlLnN1Y2Nlc3MoIuS4i+i9veaIkOWKnyIpOwoKICAgICAgICAgICAgICAgIF90aGlzMTAuc2F2ZUFzKHJlcywgcm93Lm9yaWdpbmFsRmlsZW5hbWUpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgX3RoaXMxMC4kbWVzc2FnZS5lcnJvcihyZXMubXNnIHx8ICLkuIvovb3lpLHotKXvvIzor7fnqI3lkI7lho3or5UiKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIOiOt+WPlnRhZ+exu+WeiwogICAgZ2V0VGFnVHlwZTogZnVuY3Rpb24gZ2V0VGFnVHlwZSh2YWwpIHsKICAgICAgdmFyIHR5cGUgPSB7CiAgICAgICAgMDogewogICAgICAgICAgbGFiZWw6ICLmnKrnrb7nvbIiLAogICAgICAgICAgY2xhc3M6ICJkYW5nZXIiCiAgICAgICAgfSwKICAgICAgICAxOiB7CiAgICAgICAgICBsYWJlbDogIumDqOWIhuetvue9siIsCiAgICAgICAgICBjbGFzczogIndhcm5pbmciCiAgICAgICAgfSwKICAgICAgICAyOiB7CiAgICAgICAgICBsYWJlbDogIuW3suetvue9siIsCiAgICAgICAgICBjbGFzczogInN1Y2Nlc3MiCiAgICAgICAgfSwKICAgICAgICBkZWZhdWx0OiB7CiAgICAgICAgICBsYWJlbDogIi0iLAogICAgICAgICAgY2xhc3M6ICJpbmZvIgogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGlmICh0eXBlW3ZhbF0pIHsKICAgICAgICByZXR1cm4gdHlwZVt2YWxdOwogICAgICB9CgogICAgICByZXR1cm4gdHlwZS5kZWZhdWx0OwogICAgfSwKICAgIC8vIOiOt+WPlnRhZ+exu+WeiwogICAgZ2V0QXVkaXRTdGF0dXM6IGZ1bmN0aW9uIGdldEF1ZGl0U3RhdHVzKHZhbCkgewogICAgICB2YXIgdHlwZSA9IHsKICAgICAgICAwOiAid2FybmluZyIsCiAgICAgICAgMTogInN1Y2Nlc3MiLAogICAgICAgIDI6ICJkYW5nZXIiLAogICAgICAgIGRlZmF1bHQ6ICJpbmZvIgogICAgICB9OwoKICAgICAgaWYgKHR5cGVbdmFsXSkgewogICAgICAgIHJldHVybiB0eXBlW3ZhbF07CiAgICAgIH0KCiAgICAgIHJldHVybiB0eXBlLmRlZmF1bHQ7CiAgICB9LAogICAgLy8g5LiL6L295paH5Lu25Ye95pWwCiAgICBzYXZlQXM6IGZ1bmN0aW9uIHNhdmVBcyhibG9iLCBmaWxlTmFtZSkgewogICAgICBpZiAod2luZG93Lm5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKSB7CiAgICAgICAgbmF2aWdhdG9yLm1zU2F2ZUJsb2IoYmxvYiwgZmlsZU5hbWUpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIHZhciBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpOwogICAgICAgIGxpbmsuaHJlZiA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOyAvLyDliJvlu7rlr7nosaF1cmwKCiAgICAgICAgbGluay5kb3dubG9hZCA9IGZpbGVOYW1lOyAvLyBmaXggRmlyZWZveAoKICAgICAgICBsaW5rLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgYm9keS5hcHBlbmRDaGlsZChsaW5rKTsKICAgICAgICBsaW5rLmNsaWNrKCk7CiAgICAgICAgYm9keS5yZW1vdmVDaGlsZChsaW5rKTsKICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTChsaW5rLmhyZWYpOyAvLyDpgJrov4fosIPnlKggVVJMLmNyZWF0ZU9iamVjdFVSTCgpIOWIm+W7uueahCBVUkwg5a+56LGhCiAgICAgIH0KICAgIH0sCiAgICAvLyDml6fnmoTojrflj5bkuIDmiYvmiL/kv6Hmga8KICAgIC8vIGdldERhdGEoKSB7CiAgICAvLyAJbmV3SG91c2UuZ2V0UmVhbEVzdGF0ZUluZm9ybWF0aW9uKHsgb3JkZXJJZDogdGhpcy5vcmRlcklkIH0pLnRoZW4ocmVzID0+IHsKICAgIC8vIAkJaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAvLyAJCQl0aGlzLnJlYWxFc3RhdGVEYXRhID0gcmVzLmRhdGEKICAgIC8vIAkJCW5ld0hvdXNlLmdldFVyYmFuQXJlYVRyZWUoKS50aGVuKHZhbCA9PiB7CiAgICAvLyAJCQkgIGlmICh2YWwuZGF0YSAmJiB2YWwuc3VjY2VzcykgewogICAgLy8gCQkJICAgIHRoaXMuY2l0eUFyciA9IHZhbC5kYXRhWzBdLmNoaWxkcmVuCiAgICAvLyAJCQkgICAgY29uc3QgYXJyID0gdGhpcy5maW5kQW5BcnJheU9mQ2l0aWVzKHRoaXMuY2l0eUFyciwgcmVzLmRhdGEucmVnaW9uQ29kZSkKICAgIC8vIAkJCSAgICB0aGlzLnJ1bGVGb3JtLmNpdHkgPSBhcnIubGVuZ3RoICE9PSAwID8gKGFyci5sZW5ndGggPT09IDIgPyBbYXJyWzBdLmNvZGUsIGFyclsxXS5jb2RlXSA6IFthcnJbMF0uY29kZSwgYXJyWzFdLmNvZGUsIGFyclsyXS5jb2RlXSkgOiAnJwogICAgLy8gCQkJICB9CiAgICAvLyAJCQl9KQogICAgLy8gCQkJdGhpcy5ydWxlRm9ybS5wcm9wZXJ0eVNpdGUgPSByZXMuZGF0YS5kZXRhaWxBZGRyZXNzCiAgICAvLyAJCQl0aGlzLnJ1bGVGb3JtLmNvbnN0cnVjdGlvbkFyZWEgPSByZXMuZGF0YS5jb25zdHJ1Y3Rpb25BcmVhCiAgICAvLyAJCQl0aGlzLnJ1bGVGb3JtLnByb3BlcnR5UHJpY2UgPSByZXMuZGF0YS50YXJnZXRBbW91bnQKICAgIC8vIAkJCXRoaXMucnVsZUZvcm0uYWRkcmVzcyA9IHJlcy5kYXRhLmFkZHJlc3MKICAgIC8vIAkJfQogICAgLy8gCX0pCiAgICAvLyB9LAogICAgZWRpdFByb3BlcnR5SW5mb3JtYXRpb246IGZ1bmN0aW9uIGVkaXRQcm9wZXJ0eUluZm9ybWF0aW9uKCkgewogICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7CgogICAgICBpZiAodGhpcy5lZGl0KSB7CiAgICAgICAgdGhpcy5lZGl0ID0gIXRoaXMuZWRpdDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyZWZzWydydWxlRm9ybSddLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICAgIC8vIGxldCBjaXR5TGlzdCA9IHRoaXMuY2l0eUFycgogICAgICAgICAgICAvLyBjb25zdCBhcnIgPSB0aGlzLnJ1bGVGb3JtLmNpdHkubWFwKGZ1bmN0aW9uKHZhbCwgaSwgYXJyKSB7CiAgICAgICAgICAgIC8vICAgZm9yICh2YXIgaXRtIG9mIGNpdHlMaXN0KSB7CiAgICAgICAgICAgIC8vICAgICBpZiAoaXRtLmNvZGUgPT09IHZhbCkgewogICAgICAgICAgICAvLyAgICAgICBjaXR5TGlzdCA9IGl0bS5jaGlsZHJlbgogICAgICAgICAgICAvLyAgICAgICByZXR1cm4gaXRtCiAgICAgICAgICAgIC8vICAgICB9CiAgICAgICAgICAgIC8vICAgfQogICAgICAgICAgICAvLyB9KQogICAgICAgICAgICAvLyBjb25zdCBhZGRyRGVzYyA9IGFyci5sZW5ndGggPT09IDIgPyBhcnJbMF0ubmFtZSArIGFyclsxXS5uYW1lIDogYXJyWzBdLm5hbWUgKyBhcnJbMV0ubmFtZSArIGFyclsyXS5uYW1lCiAgICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICAgIGlkOiBfdGhpczExLnJlYWxFc3RhdGVEYXRhLmlkLAogICAgICAgICAgICAgIG9yZGVySWQ6IF90aGlzMTEub3JkZXJJZCwKICAgICAgICAgICAgICByZWdpb25Db2RlOiBudWxsLAogICAgICAgICAgICAgIGRldGFpbEFkZHJlc3M6IF90aGlzMTEucnVsZUZvcm0ucHJvcGVydHlTaXRlLAogICAgICAgICAgICAgIGFkZHJlc3M6IG51bGwsCiAgICAgICAgICAgICAgdGFyZ2V0QW1vdW50OiBfdGhpczExLnJ1bGVGb3JtLnByb3BlcnR5UHJpY2UsCiAgICAgICAgICAgICAgY29uc3RydWN0aW9uQXJlYTogX3RoaXMxMS5ydWxlRm9ybS5jb25zdHJ1Y3Rpb25BcmVhCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIG5ld0hvdXNlLmVkaXRQcm9wZXJ0eUluZm9ybWF0aW9uKGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgICAgX3RoaXMxMS5nZXRPcmRlckRhdGEoKTsKCiAgICAgICAgICAgICAgICBfdGhpczExLmVkaXQgPSAhX3RoaXMxMS5lZGl0OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0gLy8gZmluZEFuQXJyYXlPZkNpdGllcyhhcnIxLCBjb2RlKSB7CiAgICAvLyAgIGNvbnN0IHRlbXAgPSBbXQogICAgLy8gICBpZiAoIWNvZGUpIHsKICAgIC8vICAgICByZXR1cm4gdGVtcAogICAgLy8gICB9CiAgICAvLyAgIHZhciBmb3JGbiA9IGZ1bmN0aW9uKGFyciwgY29kZSkgewogICAgLy8gICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAvLyAgICAgICB2YXIgaXRlbSA9IGFycltpXQogICAgLy8gICAgICAgaWYgKGl0ZW0uY29kZSA9PT0gY29kZSkgewogICAgLy8gICAgICAgICB0ZW1wLnB1c2goaXRlbSkKICAgIC8vICAgICAgICAgYnJlYWsKICAgIC8vICAgICAgIH0gZWxzZSB7CiAgICAvLyAgICAgICAgIGlmIChpdGVtLmNoaWxkcmVuKSB7CiAgICAvLyAgICAgICAgICAgZm9yRm4oaXRlbS5jaGlsZHJlbiwgY29kZSkKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgICAgfQogICAgLy8gICAgIH0KICAgIC8vICAgfQogICAgLy8gICBmb3JGbihhcnIxLCBjb2RlKQogICAgLy8gICBjb25zdCBuYW1lID0gW10KICAgIC8vICAgdmFyIGZvck5hbWUgPSBmdW5jdGlvbihhcnJhciwgaWQpIHsKICAgIC8vICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmFyLmxlbmd0aDsgaSsrKSB7CiAgICAvLyAgICAgICB2YXIgaXRlbSA9IGFycmFyW2ldCiAgICAvLyAgICAgICBpZiAoaXRlbS5pZCA9PT0gaWQpIHsKICAgIC8vICAgICAgICAgbmFtZS51bnNoaWZ0KGl0ZW0pCiAgICAvLyAgICAgICAgIGZvck5hbWUoYXJyMSwgaXRlbS5wYXJlbnRJZCkKICAgIC8vICAgICAgIH0gZWxzZSB7CiAgICAvLyAgICAgICAgIGlmIChpdGVtLmNoaWxkcmVuKSB7CiAgICAvLyAgICAgICAgICAgZm9yTmFtZShpdGVtLmNoaWxkcmVuLCBpZCkKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgICAgfQogICAgLy8gICAgIH0KICAgIC8vICAgfQogICAgLy8gICBmb3JOYW1lKGFycjEsIHRlbXBbMF0uaWQpCiAgICAvLyAgIHJldHVybiBuYW1lCiAgICAvLyB9CgogIH0sCiAgd2F0Y2g6IHsKICAgIGRpYWxvZ1Zpc2libGU6IGZ1bmN0aW9uIGRpYWxvZ1Zpc2libGUodmFsKSB7CiAgICAgIGlmICghdmFsKSB7CiAgICAgICAgdGhpcy4kcmVmcy5ub3RhcnlOdW1Gb3JtLmNsZWFyVmFsaWRhdGUoKTsKICAgICAgICB0aGlzLm5vdGFyeU51bUZvcm0ubm90YXJ5TnVtID0gIiI7CiAgICAgIH0KICAgIH0sCiAgICBub3RhcnlQYXBlckRUT0xpc3Q6IGZ1bmN0aW9uIG5vdGFyeVBhcGVyRFRPTGlzdCh2YWwpIHsKICAgICAgdmFyIHJlc3VsdCA9IHZhbC5ldmVyeShmdW5jdGlvbiAoaSkgewogICAgICAgIHJldHVybiBpLnNpZ25TdGF0dXMgIT09IDA7CiAgICAgIH0pOwogICAgICB0aGlzLiRlbWl0KCJzaWduU3RhdHVzRmluaXNoIiwgcmVzdWx0KTsKICAgIH0KICB9Cn07"},null]}