{"remainingRequest":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/thread-loader/dist/cjs.js!/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/home/jenkins_data/workspace/页面-公证处后台/node_modules/element-ui/lib/input.js","dependencies":[{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/element-ui/lib/input.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9Cgptb2R1bGUuZXhwb3J0cyA9Ci8qKioqKiovCmZ1bmN0aW9uIChtb2R1bGVzKSB7CiAgLy8gd2VicGFja0Jvb3RzdHJhcAoKICAvKioqKioqLwogIC8vIFRoZSBtb2R1bGUgY2FjaGUKCiAgLyoqKioqKi8KICB2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9OwogIC8qKioqKiovCgogIC8qKioqKiovCiAgLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb24KCiAgLyoqKioqKi8KCiAgZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkgewogICAgLyoqKioqKi8KCiAgICAvKioqKioqLwogICAgLy8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlCgogICAgLyoqKioqKi8KICAgIGlmIChpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkgewogICAgICAvKioqKioqLwogICAgICByZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0czsKICAgICAgLyoqKioqKi8KICAgIH0KICAgIC8qKioqKiovCiAgICAvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKQoKICAgIC8qKioqKiovCgoKICAgIHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHsKICAgICAgLyoqKioqKi8KICAgICAgaTogbW9kdWxlSWQsCgogICAgICAvKioqKioqLwogICAgICBsOiBmYWxzZSwKCiAgICAgIC8qKioqKiovCiAgICAgIGV4cG9ydHM6IHt9CiAgICAgIC8qKioqKiovCgogICAgfTsKICAgIC8qKioqKiovCgogICAgLyoqKioqKi8KICAgIC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvbgoKICAgIC8qKioqKiovCgogICAgbW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7CiAgICAvKioqKioqLwoKICAgIC8qKioqKiovCiAgICAvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkCgogICAgLyoqKioqKi8KCiAgICBtb2R1bGUubCA9IHRydWU7CiAgICAvKioqKioqLwoKICAgIC8qKioqKiovCiAgICAvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZQoKICAgIC8qKioqKiovCgogICAgcmV0dXJuIG1vZHVsZS5leHBvcnRzOwogICAgLyoqKioqKi8KICB9CiAgLyoqKioqKi8KCiAgLyoqKioqKi8KCiAgLyoqKioqKi8KICAvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKQoKICAvKioqKioqLwoKCiAgX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlczsKICAvKioqKioqLwoKICAvKioqKioqLwogIC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlCgogIC8qKioqKiovCgogIF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7CiAgLyoqKioqKi8KCiAgLyoqKioqKi8KICAvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHMKCiAgLyoqKioqKi8KCiAgX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24gKGV4cG9ydHMsIG5hbWUsIGdldHRlcikgewogICAgLyoqKioqKi8KICAgIGlmICghX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7CiAgICAgIC8qKioqKiovCiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7CiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICBnZXQ6IGdldHRlcgogICAgICB9KTsKICAgICAgLyoqKioqKi8KICAgIH0KICAgIC8qKioqKiovCgogIH07CiAgLyoqKioqKi8KCiAgLyoqKioqKi8KICAvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzCgogIC8qKioqKiovCgoKICBfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbiAoZXhwb3J0cykgewogICAgLyoqKioqKi8KICAgIGlmICh0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHsKICAgICAgLyoqKioqKi8KICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgewogICAgICAgIHZhbHVlOiAnTW9kdWxlJwogICAgICB9KTsKICAgICAgLyoqKioqKi8KICAgIH0KICAgIC8qKioqKiovCgoKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsKICAgICAgdmFsdWU6IHRydWUKICAgIH0pOwogICAgLyoqKioqKi8KICB9OwogIC8qKioqKiovCgogIC8qKioqKiovCiAgLy8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0CgogIC8qKioqKiovCiAgLy8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0CgogIC8qKioqKiovCiAgLy8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zCgogIC8qKioqKiovCiAgLy8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0CgogIC8qKioqKiovCiAgLy8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZQoKICAvKioqKioqLwoKCiAgX193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24gKHZhbHVlLCBtb2RlKSB7CiAgICAvKioqKioqLwogICAgaWYgKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpOwogICAgLyoqKioqKi8KCiAgICBpZiAobW9kZSAmIDgpIHJldHVybiB2YWx1ZTsKICAgIC8qKioqKiovCgogICAgaWYgKG1vZGUgJiA0ICYmIF90eXBlb2YodmFsdWUpID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7CiAgICAvKioqKioqLwoKICAgIHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAvKioqKioqLwoKICAgIF9fd2VicGFja19yZXF1aXJlX18ucihucyk7CiAgICAvKioqKioqLwoKCiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgewogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICB2YWx1ZTogdmFsdWUKICAgIH0pOwogICAgLyoqKioqKi8KCiAgICBpZiAobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHsKICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICByZXR1cm4gdmFsdWVba2V5XTsKICAgICAgfS5iaW5kKG51bGwsIGtleSkpOwogICAgfQogICAgLyoqKioqKi8KCiAgICByZXR1cm4gbnM7CiAgICAvKioqKioqLwogIH07CiAgLyoqKioqKi8KCiAgLyoqKioqKi8KICAvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlcwoKICAvKioqKioqLwoKCiAgX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24gKG1vZHVsZSkgewogICAgLyoqKioqKi8KICAgIHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgPwogICAgLyoqKioqKi8KICAgIGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7CiAgICAgIHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsKICAgIH0gOgogICAgLyoqKioqKi8KICAgIGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7CiAgICAgIHJldHVybiBtb2R1bGU7CiAgICB9OwogICAgLyoqKioqKi8KCiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7CiAgICAvKioqKioqLwoKCiAgICByZXR1cm4gZ2V0dGVyOwogICAgLyoqKioqKi8KICB9OwogIC8qKioqKiovCgogIC8qKioqKiovCiAgLy8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsCgogIC8qKioqKiovCgoKICBfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbiAob2JqZWN0LCBwcm9wZXJ0eSkgewogICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsKICB9OwogIC8qKioqKiovCgogIC8qKioqKiovCiAgLy8gX193ZWJwYWNrX3B1YmxpY19wYXRoX18KCiAgLyoqKioqKi8KCgogIF9fd2VicGFja19yZXF1aXJlX18ucCA9ICIvZGlzdC8iOwogIC8qKioqKiovCgogIC8qKioqKiovCgogIC8qKioqKiovCiAgLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzCgogIC8qKioqKiovCgogIHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDc2KTsKICAvKioqKioqLwp9Ci8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgovKioqKioqLwooewogIC8qKiovCiAgMDoKICAvKioqLwogIGZ1bmN0aW9uIF8obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8KCiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgImEiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBub3JtYWxpemVDb21wb25lbnQ7CiAgICB9KTsKICAgIC8qIGdsb2JhbHMgX19WVUVfU1NSX0NPTlRFWFRfXyAqLwogICAgLy8gSU1QT1JUQU5UOiBEbyBOT1QgdXNlIEVTMjAxNSBmZWF0dXJlcyBpbiB0aGlzIGZpbGUgKGV4Y2VwdCBmb3IgbW9kdWxlcykuCiAgICAvLyBUaGlzIG1vZHVsZSBpcyBhIHJ1bnRpbWUgdXRpbGl0eSBmb3IgY2xlYW5lciBjb21wb25lbnQgbW9kdWxlIG91dHB1dCBhbmQgd2lsbAogICAgLy8gYmUgaW5jbHVkZWQgaW4gdGhlIGZpbmFsIHdlYnBhY2sgdXNlciBidW5kbGUuCgoKICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZUNvbXBvbmVudChzY3JpcHRFeHBvcnRzLCByZW5kZXIsIHN0YXRpY1JlbmRlckZucywgZnVuY3Rpb25hbFRlbXBsYXRlLCBpbmplY3RTdHlsZXMsIHNjb3BlSWQsIG1vZHVsZUlkZW50aWZpZXIsCiAgICAvKiBzZXJ2ZXIgb25seSAqLwogICAgc2hhZG93TW9kZQogICAgLyogdnVlLWNsaSBvbmx5ICovCiAgICApIHsKICAgICAgLy8gVnVlLmV4dGVuZCBjb25zdHJ1Y3RvciBleHBvcnQgaW50ZXJvcAogICAgICB2YXIgb3B0aW9ucyA9IHR5cGVvZiBzY3JpcHRFeHBvcnRzID09PSAnZnVuY3Rpb24nID8gc2NyaXB0RXhwb3J0cy5vcHRpb25zIDogc2NyaXB0RXhwb3J0czsgLy8gcmVuZGVyIGZ1bmN0aW9ucwoKICAgICAgaWYgKHJlbmRlcikgewogICAgICAgIG9wdGlvbnMucmVuZGVyID0gcmVuZGVyOwogICAgICAgIG9wdGlvbnMuc3RhdGljUmVuZGVyRm5zID0gc3RhdGljUmVuZGVyRm5zOwogICAgICAgIG9wdGlvbnMuX2NvbXBpbGVkID0gdHJ1ZTsKICAgICAgfSAvLyBmdW5jdGlvbmFsIHRlbXBsYXRlCgoKICAgICAgaWYgKGZ1bmN0aW9uYWxUZW1wbGF0ZSkgewogICAgICAgIG9wdGlvbnMuZnVuY3Rpb25hbCA9IHRydWU7CiAgICAgIH0gLy8gc2NvcGVkSWQKCgogICAgICBpZiAoc2NvcGVJZCkgewogICAgICAgIG9wdGlvbnMuX3Njb3BlSWQgPSAnZGF0YS12LScgKyBzY29wZUlkOwogICAgICB9CgogICAgICB2YXIgaG9vazsKCiAgICAgIGlmIChtb2R1bGVJZGVudGlmaWVyKSB7CiAgICAgICAgLy8gc2VydmVyIGJ1aWxkCiAgICAgICAgaG9vayA9IGZ1bmN0aW9uIGhvb2soY29udGV4dCkgewogICAgICAgICAgLy8gMi4zIGluamVjdGlvbgogICAgICAgICAgY29udGV4dCA9IGNvbnRleHQgfHwgLy8gY2FjaGVkIGNhbGwKICAgICAgICAgIHRoaXMuJHZub2RlICYmIHRoaXMuJHZub2RlLnNzckNvbnRleHQgfHwgLy8gc3RhdGVmdWwKICAgICAgICAgIHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50LiR2bm9kZSAmJiB0aGlzLnBhcmVudC4kdm5vZGUuc3NyQ29udGV4dDsgLy8gZnVuY3Rpb25hbAogICAgICAgICAgLy8gMi4yIHdpdGggcnVuSW5OZXdDb250ZXh0OiB0cnVlCgogICAgICAgICAgaWYgKCFjb250ZXh0ICYmIHR5cGVvZiBfX1ZVRV9TU1JfQ09OVEVYVF9fICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICBjb250ZXh0ID0gX19WVUVfU1NSX0NPTlRFWFRfXzsKICAgICAgICAgIH0gLy8gaW5qZWN0IGNvbXBvbmVudCBzdHlsZXMKCgogICAgICAgICAgaWYgKGluamVjdFN0eWxlcykgewogICAgICAgICAgICBpbmplY3RTdHlsZXMuY2FsbCh0aGlzLCBjb250ZXh0KTsKICAgICAgICAgIH0gLy8gcmVnaXN0ZXIgY29tcG9uZW50IG1vZHVsZSBpZGVudGlmaWVyIGZvciBhc3luYyBjaHVuayBpbmZlcnJlbmNlCgoKICAgICAgICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHQuX3JlZ2lzdGVyZWRDb21wb25lbnRzKSB7CiAgICAgICAgICAgIGNvbnRleHQuX3JlZ2lzdGVyZWRDb21wb25lbnRzLmFkZChtb2R1bGVJZGVudGlmaWVyKTsKICAgICAgICAgIH0KICAgICAgICB9OyAvLyB1c2VkIGJ5IHNzciBpbiBjYXNlIGNvbXBvbmVudCBpcyBjYWNoZWQgYW5kIGJlZm9yZUNyZWF0ZQogICAgICAgIC8vIG5ldmVyIGdldHMgY2FsbGVkCgoKICAgICAgICBvcHRpb25zLl9zc3JSZWdpc3RlciA9IGhvb2s7CiAgICAgIH0gZWxzZSBpZiAoaW5qZWN0U3R5bGVzKSB7CiAgICAgICAgaG9vayA9IHNoYWRvd01vZGUgPyBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpbmplY3RTdHlsZXMuY2FsbCh0aGlzLCB0aGlzLiRyb290LiRvcHRpb25zLnNoYWRvd1Jvb3QpOwogICAgICAgIH0gOiBpbmplY3RTdHlsZXM7CiAgICAgIH0KCiAgICAgIGlmIChob29rKSB7CiAgICAgICAgaWYgKG9wdGlvbnMuZnVuY3Rpb25hbCkgewogICAgICAgICAgLy8gZm9yIHRlbXBsYXRlLW9ubHkgaG90LXJlbG9hZCBiZWNhdXNlIGluIHRoYXQgY2FzZSB0aGUgcmVuZGVyIGZuIGRvZXNuJ3QKICAgICAgICAgIC8vIGdvIHRocm91Z2ggdGhlIG5vcm1hbGl6ZXIKICAgICAgICAgIG9wdGlvbnMuX2luamVjdFN0eWxlcyA9IGhvb2s7IC8vIHJlZ2lzdGVyIGZvciBmdW5jdGlvYWwgY29tcG9uZW50IGluIHZ1ZSBmaWxlCgogICAgICAgICAgdmFyIG9yaWdpbmFsUmVuZGVyID0gb3B0aW9ucy5yZW5kZXI7CgogICAgICAgICAgb3B0aW9ucy5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXJXaXRoU3R5bGVJbmplY3Rpb24oaCwgY29udGV4dCkgewogICAgICAgICAgICBob29rLmNhbGwoY29udGV4dCk7CiAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbFJlbmRlcihoLCBjb250ZXh0KTsKICAgICAgICAgIH07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIGluamVjdCBjb21wb25lbnQgcmVnaXN0cmF0aW9uIGFzIGJlZm9yZUNyZWF0ZSBob29rCiAgICAgICAgICB2YXIgZXhpc3RpbmcgPSBvcHRpb25zLmJlZm9yZUNyZWF0ZTsKICAgICAgICAgIG9wdGlvbnMuYmVmb3JlQ3JlYXRlID0gZXhpc3RpbmcgPyBbXS5jb25jYXQoZXhpc3RpbmcsIGhvb2spIDogW2hvb2tdOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBleHBvcnRzOiBzY3JpcHRFeHBvcnRzLAogICAgICAgIG9wdGlvbnM6IG9wdGlvbnMKICAgICAgfTsKICAgIH0KICAgIC8qKiovCgogIH0sCgogIC8qKiovCiAgMTE6CiAgLyoqKi8KICBmdW5jdGlvbiBfKG1vZHVsZSwgZXhwb3J0cykgewogICAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCJlbGVtZW50LXVpL2xpYi9taXhpbnMvbWlncmF0aW5nIik7CiAgICAvKioqLwogIH0sCgogIC8qKiovCiAgMjE6CiAgLyoqKi8KICBmdW5jdGlvbiBfKG1vZHVsZSwgZXhwb3J0cykgewogICAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCJlbGVtZW50LXVpL2xpYi91dGlscy9zaGFyZWQiKTsKICAgIC8qKiovCiAgfSwKCiAgLyoqKi8KICA0OgogIC8qKiovCiAgZnVuY3Rpb24gXyhtb2R1bGUsIGV4cG9ydHMpIHsKICAgIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgiZWxlbWVudC11aS9saWIvbWl4aW5zL2VtaXR0ZXIiKTsKICAgIC8qKiovCiAgfSwKCiAgLyoqKi8KICA3NjoKICAvKioqLwogIGZ1bmN0aW9uIF8obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOyAvLyBDT05DQVRFTkFURUQgTU9EVUxFOiAuL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9sb2FkZXJzL3RlbXBsYXRlTG9hZGVyLmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWI/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL3BhY2thZ2VzL2lucHV0L3NyYy9pbnB1dC52dWU/dnVlJnR5cGU9dGVtcGxhdGUmaWQ9MzQzZGQ3NzQmCgoKICAgIHZhciByZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdm0gPSB0aGlzOwoKICAgICAgdmFyIF9oID0gX3ZtLiRjcmVhdGVFbGVtZW50OwoKICAgICAgdmFyIF9jID0gX3ZtLl9zZWxmLl9jIHx8IF9oOwoKICAgICAgcmV0dXJuIF9jKCJkaXYiLCB7CiAgICAgICAgY2xhc3M6IFtfdm0udHlwZSA9PT0gInRleHRhcmVhIiA/ICJlbC10ZXh0YXJlYSIgOiAiZWwtaW5wdXQiLCBfdm0uaW5wdXRTaXplID8gImVsLWlucHV0LS0iICsgX3ZtLmlucHV0U2l6ZSA6ICIiLCB7CiAgICAgICAgICAiaXMtZGlzYWJsZWQiOiBfdm0uaW5wdXREaXNhYmxlZCwKICAgICAgICAgICJpcy1leGNlZWQiOiBfdm0uaW5wdXRFeGNlZWQsCiAgICAgICAgICAiZWwtaW5wdXQtZ3JvdXAiOiBfdm0uJHNsb3RzLnByZXBlbmQgfHwgX3ZtLiRzbG90cy5hcHBlbmQsCiAgICAgICAgICAiZWwtaW5wdXQtZ3JvdXAtLWFwcGVuZCI6IF92bS4kc2xvdHMuYXBwZW5kLAogICAgICAgICAgImVsLWlucHV0LWdyb3VwLS1wcmVwZW5kIjogX3ZtLiRzbG90cy5wcmVwZW5kLAogICAgICAgICAgImVsLWlucHV0LS1wcmVmaXgiOiBfdm0uJHNsb3RzLnByZWZpeCB8fCBfdm0ucHJlZml4SWNvbiwKICAgICAgICAgICJlbC1pbnB1dC0tc3VmZml4IjogX3ZtLiRzbG90cy5zdWZmaXggfHwgX3ZtLnN1ZmZpeEljb24gfHwgX3ZtLmNsZWFyYWJsZSB8fCBfdm0uc2hvd1Bhc3N3b3JkCiAgICAgICAgfV0sCiAgICAgICAgb246IHsKICAgICAgICAgIG1vdXNlZW50ZXI6IGZ1bmN0aW9uIG1vdXNlZW50ZXIoJGV2ZW50KSB7CiAgICAgICAgICAgIF92bS5ob3ZlcmluZyA9IHRydWU7CiAgICAgICAgICB9LAogICAgICAgICAgbW91c2VsZWF2ZTogZnVuY3Rpb24gbW91c2VsZWF2ZSgkZXZlbnQpIHsKICAgICAgICAgICAgX3ZtLmhvdmVyaW5nID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBbX3ZtLnR5cGUgIT09ICJ0ZXh0YXJlYSIgPyBbX3ZtLiRzbG90cy5wcmVwZW5kID8gX2MoImRpdiIsIHsKICAgICAgICBzdGF0aWNDbGFzczogImVsLWlucHV0LWdyb3VwX19wcmVwZW5kIgogICAgICB9LCBbX3ZtLl90KCJwcmVwZW5kIildLCAyKSA6IF92bS5fZSgpLCBfdm0udHlwZSAhPT0gInRleHRhcmVhIiA/IF9jKCJpbnB1dCIsIF92bS5fYih7CiAgICAgICAgcmVmOiAiaW5wdXQiLAogICAgICAgIHN0YXRpY0NsYXNzOiAiZWwtaW5wdXRfX2lubmVyIiwKICAgICAgICBhdHRyczogewogICAgICAgICAgdGFiaW5kZXg6IF92bS50YWJpbmRleCwKICAgICAgICAgIHR5cGU6IF92bS5zaG93UGFzc3dvcmQgPyBfdm0ucGFzc3dvcmRWaXNpYmxlID8gInRleHQiIDogInBhc3N3b3JkIiA6IF92bS50eXBlLAogICAgICAgICAgZGlzYWJsZWQ6IF92bS5pbnB1dERpc2FibGVkLAogICAgICAgICAgcmVhZG9ubHk6IF92bS5yZWFkb25seSwKICAgICAgICAgIGF1dG9jb21wbGV0ZTogX3ZtLmF1dG9Db21wbGV0ZSB8fCBfdm0uYXV0b2NvbXBsZXRlLAogICAgICAgICAgImFyaWEtbGFiZWwiOiBfdm0ubGFiZWwKICAgICAgICB9LAogICAgICAgIG9uOiB7CiAgICAgICAgICBjb21wb3NpdGlvbnN0YXJ0OiBfdm0uaGFuZGxlQ29tcG9zaXRpb25TdGFydCwKICAgICAgICAgIGNvbXBvc2l0aW9udXBkYXRlOiBfdm0uaGFuZGxlQ29tcG9zaXRpb25VcGRhdGUsCiAgICAgICAgICBjb21wb3NpdGlvbmVuZDogX3ZtLmhhbmRsZUNvbXBvc2l0aW9uRW5kLAogICAgICAgICAgaW5wdXQ6IF92bS5oYW5kbGVJbnB1dCwKICAgICAgICAgIGZvY3VzOiBfdm0uaGFuZGxlRm9jdXMsCiAgICAgICAgICBibHVyOiBfdm0uaGFuZGxlQmx1ciwKICAgICAgICAgIGNoYW5nZTogX3ZtLmhhbmRsZUNoYW5nZQogICAgICAgIH0KICAgICAgfSwgImlucHV0IiwgX3ZtLiRhdHRycywgZmFsc2UpKSA6IF92bS5fZSgpLCBfdm0uJHNsb3RzLnByZWZpeCB8fCBfdm0ucHJlZml4SWNvbiA/IF9jKCJzcGFuIiwgewogICAgICAgIHN0YXRpY0NsYXNzOiAiZWwtaW5wdXRfX3ByZWZpeCIKICAgICAgfSwgW192bS5fdCgicHJlZml4IiksIF92bS5wcmVmaXhJY29uID8gX2MoImkiLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICJlbC1pbnB1dF9faWNvbiIsCiAgICAgICAgY2xhc3M6IF92bS5wcmVmaXhJY29uCiAgICAgIH0pIDogX3ZtLl9lKCldLCAyKSA6IF92bS5fZSgpLCBfdm0uZ2V0U3VmZml4VmlzaWJsZSgpID8gX2MoInNwYW4iLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICJlbC1pbnB1dF9fc3VmZml4IgogICAgICB9LCBbX2MoInNwYW4iLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICJlbC1pbnB1dF9fc3VmZml4LWlubmVyIgogICAgICB9LCBbIV92bS5zaG93Q2xlYXIgfHwgIV92bS5zaG93UHdkVmlzaWJsZSB8fCAhX3ZtLmlzV29yZExpbWl0VmlzaWJsZSA/IFtfdm0uX3QoInN1ZmZpeCIpLCBfdm0uc3VmZml4SWNvbiA/IF9jKCJpIiwgewogICAgICAgIHN0YXRpY0NsYXNzOiAiZWwtaW5wdXRfX2ljb24iLAogICAgICAgIGNsYXNzOiBfdm0uc3VmZml4SWNvbgogICAgICB9KSA6IF92bS5fZSgpXSA6IF92bS5fZSgpLCBfdm0uc2hvd0NsZWFyID8gX2MoImkiLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICJlbC1pbnB1dF9faWNvbiBlbC1pY29uLWNpcmNsZS1jbG9zZSBlbC1pbnB1dF9fY2xlYXIiLAogICAgICAgIG9uOiB7CiAgICAgICAgICBtb3VzZWRvd246IGZ1bmN0aW9uIG1vdXNlZG93bigkZXZlbnQpIHsKICAgICAgICAgICAgJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICB9LAogICAgICAgICAgY2xpY2s6IF92bS5jbGVhcgogICAgICAgIH0KICAgICAgfSkgOiBfdm0uX2UoKSwgX3ZtLnNob3dQd2RWaXNpYmxlID8gX2MoImkiLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICJlbC1pbnB1dF9faWNvbiBlbC1pY29uLXZpZXcgZWwtaW5wdXRfX2NsZWFyIiwKICAgICAgICBvbjogewogICAgICAgICAgY2xpY2s6IF92bS5oYW5kbGVQYXNzd29yZFZpc2libGUKICAgICAgICB9CiAgICAgIH0pIDogX3ZtLl9lKCksIF92bS5pc1dvcmRMaW1pdFZpc2libGUgPyBfYygic3BhbiIsIHsKICAgICAgICBzdGF0aWNDbGFzczogImVsLWlucHV0X19jb3VudCIKICAgICAgfSwgW19jKCJzcGFuIiwgewogICAgICAgIHN0YXRpY0NsYXNzOiAiZWwtaW5wdXRfX2NvdW50LWlubmVyIgogICAgICB9LCBbX3ZtLl92KCJcbiAgICAgICAgICAgICIgKyBfdm0uX3MoX3ZtLnRleHRMZW5ndGgpICsgIi8iICsgX3ZtLl9zKF92bS51cHBlckxpbWl0KSArICJcbiAgICAgICAgICAiKV0pXSkgOiBfdm0uX2UoKV0sIDIpLCBfdm0udmFsaWRhdGVTdGF0ZSA/IF9jKCJpIiwgewogICAgICAgIHN0YXRpY0NsYXNzOiAiZWwtaW5wdXRfX2ljb24iLAogICAgICAgIGNsYXNzOiBbImVsLWlucHV0X192YWxpZGF0ZUljb24iLCBfdm0udmFsaWRhdGVJY29uXQogICAgICB9KSA6IF92bS5fZSgpXSkgOiBfdm0uX2UoKSwgX3ZtLiRzbG90cy5hcHBlbmQgPyBfYygiZGl2IiwgewogICAgICAgIHN0YXRpY0NsYXNzOiAiZWwtaW5wdXQtZ3JvdXBfX2FwcGVuZCIKICAgICAgfSwgW192bS5fdCgiYXBwZW5kIildLCAyKSA6IF92bS5fZSgpXSA6IF9jKCJ0ZXh0YXJlYSIsIF92bS5fYih7CiAgICAgICAgcmVmOiAidGV4dGFyZWEiLAogICAgICAgIHN0YXRpY0NsYXNzOiAiZWwtdGV4dGFyZWFfX2lubmVyIiwKICAgICAgICBzdHlsZTogX3ZtLnRleHRhcmVhU3R5bGUsCiAgICAgICAgYXR0cnM6IHsKICAgICAgICAgIHRhYmluZGV4OiBfdm0udGFiaW5kZXgsCiAgICAgICAgICBkaXNhYmxlZDogX3ZtLmlucHV0RGlzYWJsZWQsCiAgICAgICAgICByZWFkb25seTogX3ZtLnJlYWRvbmx5LAogICAgICAgICAgYXV0b2NvbXBsZXRlOiBfdm0uYXV0b0NvbXBsZXRlIHx8IF92bS5hdXRvY29tcGxldGUsCiAgICAgICAgICAiYXJpYS1sYWJlbCI6IF92bS5sYWJlbAogICAgICAgIH0sCiAgICAgICAgb246IHsKICAgICAgICAgIGNvbXBvc2l0aW9uc3RhcnQ6IF92bS5oYW5kbGVDb21wb3NpdGlvblN0YXJ0LAogICAgICAgICAgY29tcG9zaXRpb251cGRhdGU6IF92bS5oYW5kbGVDb21wb3NpdGlvblVwZGF0ZSwKICAgICAgICAgIGNvbXBvc2l0aW9uZW5kOiBfdm0uaGFuZGxlQ29tcG9zaXRpb25FbmQsCiAgICAgICAgICBpbnB1dDogX3ZtLmhhbmRsZUlucHV0LAogICAgICAgICAgZm9jdXM6IF92bS5oYW5kbGVGb2N1cywKICAgICAgICAgIGJsdXI6IF92bS5oYW5kbGVCbHVyLAogICAgICAgICAgY2hhbmdlOiBfdm0uaGFuZGxlQ2hhbmdlCiAgICAgICAgfQogICAgICB9LCAidGV4dGFyZWEiLCBfdm0uJGF0dHJzLCBmYWxzZSkpLCBfdm0uaXNXb3JkTGltaXRWaXNpYmxlICYmIF92bS50eXBlID09PSAidGV4dGFyZWEiID8gX2MoInNwYW4iLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICJlbC1pbnB1dF9fY291bnQiCiAgICAgIH0sIFtfdm0uX3YoX3ZtLl9zKF92bS50ZXh0TGVuZ3RoKSArICIvIiArIF92bS5fcyhfdm0udXBwZXJMaW1pdCkpXSkgOiBfdm0uX2UoKV0sIDIpOwogICAgfTsKCiAgICB2YXIgc3RhdGljUmVuZGVyRm5zID0gW107CiAgICByZW5kZXIuX3dpdGhTdHJpcHBlZCA9IHRydWU7IC8vIENPTkNBVEVOQVRFRCBNT0RVTEU6IC4vcGFja2FnZXMvaW5wdXQvc3JjL2lucHV0LnZ1ZT92dWUmdHlwZT10ZW1wbGF0ZSZpZD0zNDNkZDc3NCYKICAgIC8vIEVYVEVSTkFMIE1PRFVMRTogZXh0ZXJuYWwgImVsZW1lbnQtdWkvbGliL21peGlucy9lbWl0dGVyIgoKICAgIHZhciBlbWl0dGVyXyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7CgogICAgdmFyIGVtaXR0ZXJfZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4oZW1pdHRlcl8pOyAvLyBFWFRFUk5BTCBNT0RVTEU6IGV4dGVybmFsICJlbGVtZW50LXVpL2xpYi9taXhpbnMvbWlncmF0aW5nIgoKCiAgICB2YXIgbWlncmF0aW5nXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpOwoKICAgIHZhciBtaWdyYXRpbmdfZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4obWlncmF0aW5nXyk7IC8vIENPTkNBVEVOQVRFRCBNT0RVTEU6IC4vcGFja2FnZXMvaW5wdXQvc3JjL2NhbGNUZXh0YXJlYUhlaWdodC5qcwoKCiAgICB2YXIgaGlkZGVuVGV4dGFyZWEgPSB2b2lkIDA7CiAgICB2YXIgSElEREVOX1NUWUxFID0gJ1xuICBoZWlnaHQ6MCAhaW1wb3J0YW50O1xuICB2aXNpYmlsaXR5OmhpZGRlbiAhaW1wb3J0YW50O1xuICBvdmVyZmxvdzpoaWRkZW4gIWltcG9ydGFudDtcbiAgcG9zaXRpb246YWJzb2x1dGUgIWltcG9ydGFudDtcbiAgei1pbmRleDotMTAwMCAhaW1wb3J0YW50O1xuICB0b3A6MCAhaW1wb3J0YW50O1xuICByaWdodDowICFpbXBvcnRhbnRcbic7CiAgICB2YXIgQ09OVEVYVF9TVFlMRSA9IFsnbGV0dGVyLXNwYWNpbmcnLCAnbGluZS1oZWlnaHQnLCAncGFkZGluZy10b3AnLCAncGFkZGluZy1ib3R0b20nLCAnZm9udC1mYW1pbHknLCAnZm9udC13ZWlnaHQnLCAnZm9udC1zaXplJywgJ3RleHQtcmVuZGVyaW5nJywgJ3RleHQtdHJhbnNmb3JtJywgJ3dpZHRoJywgJ3RleHQtaW5kZW50JywgJ3BhZGRpbmctbGVmdCcsICdwYWRkaW5nLXJpZ2h0JywgJ2JvcmRlci13aWR0aCcsICdib3gtc2l6aW5nJ107CgogICAgZnVuY3Rpb24gY2FsY3VsYXRlTm9kZVN0eWxpbmcodGFyZ2V0RWxlbWVudCkgewogICAgICB2YXIgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXRFbGVtZW50KTsKICAgICAgdmFyIGJveFNpemluZyA9IHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ2JveC1zaXppbmcnKTsKICAgICAgdmFyIHBhZGRpbmdTaXplID0gcGFyc2VGbG9hdChzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLWJvdHRvbScpKSArIHBhcnNlRmxvYXQoc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgncGFkZGluZy10b3AnKSk7CiAgICAgIHZhciBib3JkZXJTaXplID0gcGFyc2VGbG9hdChzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdib3JkZXItYm90dG9tLXdpZHRoJykpICsgcGFyc2VGbG9hdChzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdib3JkZXItdG9wLXdpZHRoJykpOwogICAgICB2YXIgY29udGV4dFN0eWxlID0gQ09OVEVYVF9TVFlMRS5tYXAoZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICByZXR1cm4gbmFtZSArICc6JyArIHN0eWxlLmdldFByb3BlcnR5VmFsdWUobmFtZSk7CiAgICAgIH0pLmpvaW4oJzsnKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBjb250ZXh0U3R5bGU6IGNvbnRleHRTdHlsZSwKICAgICAgICBwYWRkaW5nU2l6ZTogcGFkZGluZ1NpemUsCiAgICAgICAgYm9yZGVyU2l6ZTogYm9yZGVyU2l6ZSwKICAgICAgICBib3hTaXppbmc6IGJveFNpemluZwogICAgICB9OwogICAgfQoKICAgIGZ1bmN0aW9uIGNhbGNUZXh0YXJlYUhlaWdodCh0YXJnZXRFbGVtZW50KSB7CiAgICAgIHZhciBtaW5Sb3dzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAxOwogICAgICB2YXIgbWF4Um93cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogbnVsbDsKCiAgICAgIGlmICghaGlkZGVuVGV4dGFyZWEpIHsKICAgICAgICBoaWRkZW5UZXh0YXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChoaWRkZW5UZXh0YXJlYSk7CiAgICAgIH0KCiAgICAgIHZhciBfY2FsY3VsYXRlTm9kZVN0eWxpbmcgPSBjYWxjdWxhdGVOb2RlU3R5bGluZyh0YXJnZXRFbGVtZW50KSwKICAgICAgICAgIHBhZGRpbmdTaXplID0gX2NhbGN1bGF0ZU5vZGVTdHlsaW5nLnBhZGRpbmdTaXplLAogICAgICAgICAgYm9yZGVyU2l6ZSA9IF9jYWxjdWxhdGVOb2RlU3R5bGluZy5ib3JkZXJTaXplLAogICAgICAgICAgYm94U2l6aW5nID0gX2NhbGN1bGF0ZU5vZGVTdHlsaW5nLmJveFNpemluZywKICAgICAgICAgIGNvbnRleHRTdHlsZSA9IF9jYWxjdWxhdGVOb2RlU3R5bGluZy5jb250ZXh0U3R5bGU7CgogICAgICBoaWRkZW5UZXh0YXJlYS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgY29udGV4dFN0eWxlICsgJzsnICsgSElEREVOX1NUWUxFKTsKICAgICAgaGlkZGVuVGV4dGFyZWEudmFsdWUgPSB0YXJnZXRFbGVtZW50LnZhbHVlIHx8IHRhcmdldEVsZW1lbnQucGxhY2Vob2xkZXIgfHwgJyc7CiAgICAgIHZhciBoZWlnaHQgPSBoaWRkZW5UZXh0YXJlYS5zY3JvbGxIZWlnaHQ7CiAgICAgIHZhciByZXN1bHQgPSB7fTsKCiAgICAgIGlmIChib3hTaXppbmcgPT09ICdib3JkZXItYm94JykgewogICAgICAgIGhlaWdodCA9IGhlaWdodCArIGJvcmRlclNpemU7CiAgICAgIH0gZWxzZSBpZiAoYm94U2l6aW5nID09PSAnY29udGVudC1ib3gnKSB7CiAgICAgICAgaGVpZ2h0ID0gaGVpZ2h0IC0gcGFkZGluZ1NpemU7CiAgICAgIH0KCiAgICAgIGhpZGRlblRleHRhcmVhLnZhbHVlID0gJyc7CiAgICAgIHZhciBzaW5nbGVSb3dIZWlnaHQgPSBoaWRkZW5UZXh0YXJlYS5zY3JvbGxIZWlnaHQgLSBwYWRkaW5nU2l6ZTsKCiAgICAgIGlmIChtaW5Sb3dzICE9PSBudWxsKSB7CiAgICAgICAgdmFyIG1pbkhlaWdodCA9IHNpbmdsZVJvd0hlaWdodCAqIG1pblJvd3M7CgogICAgICAgIGlmIChib3hTaXppbmcgPT09ICdib3JkZXItYm94JykgewogICAgICAgICAgbWluSGVpZ2h0ID0gbWluSGVpZ2h0ICsgcGFkZGluZ1NpemUgKyBib3JkZXJTaXplOwogICAgICAgIH0KCiAgICAgICAgaGVpZ2h0ID0gTWF0aC5tYXgobWluSGVpZ2h0LCBoZWlnaHQpOwogICAgICAgIHJlc3VsdC5taW5IZWlnaHQgPSBtaW5IZWlnaHQgKyAncHgnOwogICAgICB9CgogICAgICBpZiAobWF4Um93cyAhPT0gbnVsbCkgewogICAgICAgIHZhciBtYXhIZWlnaHQgPSBzaW5nbGVSb3dIZWlnaHQgKiBtYXhSb3dzOwoKICAgICAgICBpZiAoYm94U2l6aW5nID09PSAnYm9yZGVyLWJveCcpIHsKICAgICAgICAgIG1heEhlaWdodCA9IG1heEhlaWdodCArIHBhZGRpbmdTaXplICsgYm9yZGVyU2l6ZTsKICAgICAgICB9CgogICAgICAgIGhlaWdodCA9IE1hdGgubWluKG1heEhlaWdodCwgaGVpZ2h0KTsKICAgICAgfQoKICAgICAgcmVzdWx0LmhlaWdodCA9IGhlaWdodCArICdweCc7CiAgICAgIGhpZGRlblRleHRhcmVhLnBhcmVudE5vZGUgJiYgaGlkZGVuVGV4dGFyZWEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChoaWRkZW5UZXh0YXJlYSk7CiAgICAgIGhpZGRlblRleHRhcmVhID0gbnVsbDsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICA7IC8vIEVYVEVSTkFMIE1PRFVMRTogZXh0ZXJuYWwgImVsZW1lbnQtdWkvbGliL3V0aWxzL21lcmdlIgoKICAgIHZhciBtZXJnZV8gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpOwoKICAgIHZhciBtZXJnZV9kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihtZXJnZV8pOyAvLyBFWFRFUk5BTCBNT0RVTEU6IGV4dGVybmFsICJlbGVtZW50LXVpL2xpYi91dGlscy9zaGFyZWQiCgoKICAgIHZhciBzaGFyZWRfID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7IC8vIENPTkNBVEVOQVRFRCBNT0RVTEU6IC4vbm9kZV9tb2R1bGVzL2JhYmVsLWxvYWRlci9saWIhLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWI/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL3BhY2thZ2VzL2lucHV0L3NyYy9pbnB1dC52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9anMmCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwogICAgLy8KICAgIC8vCiAgICAvLwoKICAgIC8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8KCgogICAgdmFyIGlucHV0dnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfID0gewogICAgICBuYW1lOiAnRWxJbnB1dCcsCiAgICAgIGNvbXBvbmVudE5hbWU6ICdFbElucHV0JywKICAgICAgbWl4aW5zOiBbZW1pdHRlcl9kZWZhdWx0LmEsIG1pZ3JhdGluZ19kZWZhdWx0LmFdLAogICAgICBpbmhlcml0QXR0cnM6IGZhbHNlLAogICAgICBpbmplY3Q6IHsKICAgICAgICBlbEZvcm06IHsKICAgICAgICAgIGRlZmF1bHQ6ICcnCiAgICAgICAgfSwKICAgICAgICBlbEZvcm1JdGVtOiB7CiAgICAgICAgICBkZWZhdWx0OiAnJwogICAgICAgIH0KICAgICAgfSwKICAgICAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdGV4dGFyZWFDYWxjU3R5bGU6IHt9LAogICAgICAgICAgaG92ZXJpbmc6IGZhbHNlLAogICAgICAgICAgZm9jdXNlZDogZmFsc2UsCiAgICAgICAgICBpc0NvbXBvc2luZzogZmFsc2UsCiAgICAgICAgICBwYXNzd29yZFZpc2libGU6IGZhbHNlCiAgICAgICAgfTsKICAgICAgfSwKICAgICAgcHJvcHM6IHsKICAgICAgICB2YWx1ZTogW1N0cmluZywgTnVtYmVyXSwKICAgICAgICBzaXplOiBTdHJpbmcsCiAgICAgICAgcmVzaXplOiBTdHJpbmcsCiAgICAgICAgZm9ybTogU3RyaW5nLAogICAgICAgIGRpc2FibGVkOiBCb29sZWFuLAogICAgICAgIHJlYWRvbmx5OiBCb29sZWFuLAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICAgIGRlZmF1bHQ6ICd0ZXh0JwogICAgICAgIH0sCiAgICAgICAgYXV0b3NpemU6IHsKICAgICAgICAgIHR5cGU6IFtCb29sZWFuLCBPYmplY3RdLAogICAgICAgICAgZGVmYXVsdDogZmFsc2UKICAgICAgICB9LAogICAgICAgIGF1dG9jb21wbGV0ZTogewogICAgICAgICAgdHlwZTogU3RyaW5nLAogICAgICAgICAgZGVmYXVsdDogJ29mZicKICAgICAgICB9LAoKICAgICAgICAvKiogQERlcHJlY2F0ZWQgaW4gbmV4dCBtYWpvciB2ZXJzaW9uICovCiAgICAgICAgYXV0b0NvbXBsZXRlOiB7CiAgICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uIHZhbGlkYXRvcih2YWwpIHsKICAgICAgICAgICAgZmFsc2UgJiYgZmFsc2U7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdmFsaWRhdGVFdmVudDogewogICAgICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgICAgIGRlZmF1bHQ6IHRydWUKICAgICAgICB9LAogICAgICAgIHN1ZmZpeEljb246IFN0cmluZywKICAgICAgICBwcmVmaXhJY29uOiBTdHJpbmcsCiAgICAgICAgbGFiZWw6IFN0cmluZywKICAgICAgICBjbGVhcmFibGU6IHsKICAgICAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgICAgICBkZWZhdWx0OiBmYWxzZQogICAgICAgIH0sCiAgICAgICAgc2hvd1Bhc3N3b3JkOiB7CiAgICAgICAgICB0eXBlOiBCb29sZWFuLAogICAgICAgICAgZGVmYXVsdDogZmFsc2UKICAgICAgICB9LAogICAgICAgIHNob3dXb3JkTGltaXQ6IHsKICAgICAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgICAgICBkZWZhdWx0OiBmYWxzZQogICAgICAgIH0sCiAgICAgICAgdGFiaW5kZXg6IFN0cmluZwogICAgICB9LAogICAgICBjb21wdXRlZDogewogICAgICAgIF9lbEZvcm1JdGVtU2l6ZTogZnVuY3Rpb24gX2VsRm9ybUl0ZW1TaXplKCkgewogICAgICAgICAgcmV0dXJuICh0aGlzLmVsRm9ybUl0ZW0gfHwge30pLmVsRm9ybUl0ZW1TaXplOwogICAgICAgIH0sCiAgICAgICAgdmFsaWRhdGVTdGF0ZTogZnVuY3Rpb24gdmFsaWRhdGVTdGF0ZSgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLmVsRm9ybUl0ZW0gPyB0aGlzLmVsRm9ybUl0ZW0udmFsaWRhdGVTdGF0ZSA6ICcnOwogICAgICAgIH0sCiAgICAgICAgbmVlZFN0YXR1c0ljb246IGZ1bmN0aW9uIG5lZWRTdGF0dXNJY29uKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuZWxGb3JtID8gdGhpcy5lbEZvcm0uc3RhdHVzSWNvbiA6IGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgdmFsaWRhdGVJY29uOiBmdW5jdGlvbiB2YWxpZGF0ZUljb24oKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICB2YWxpZGF0aW5nOiAnZWwtaWNvbi1sb2FkaW5nJywKICAgICAgICAgICAgc3VjY2VzczogJ2VsLWljb24tY2lyY2xlLWNoZWNrJywKICAgICAgICAgICAgZXJyb3I6ICdlbC1pY29uLWNpcmNsZS1jbG9zZScKICAgICAgICAgIH1bdGhpcy52YWxpZGF0ZVN0YXRlXTsKICAgICAgICB9LAogICAgICAgIHRleHRhcmVhU3R5bGU6IGZ1bmN0aW9uIHRleHRhcmVhU3R5bGUoKSB7CiAgICAgICAgICByZXR1cm4gbWVyZ2VfZGVmYXVsdCgpKHt9LCB0aGlzLnRleHRhcmVhQ2FsY1N0eWxlLCB7CiAgICAgICAgICAgIHJlc2l6ZTogdGhpcy5yZXNpemUKICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgaW5wdXRTaXplOiBmdW5jdGlvbiBpbnB1dFNpemUoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5zaXplIHx8IHRoaXMuX2VsRm9ybUl0ZW1TaXplIHx8ICh0aGlzLiRFTEVNRU5UIHx8IHt9KS5zaXplOwogICAgICAgIH0sCiAgICAgICAgaW5wdXREaXNhYmxlZDogZnVuY3Rpb24gaW5wdXREaXNhYmxlZCgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVkIHx8ICh0aGlzLmVsRm9ybSB8fCB7fSkuZGlzYWJsZWQ7CiAgICAgICAgfSwKICAgICAgICBuYXRpdmVJbnB1dFZhbHVlOiBmdW5jdGlvbiBuYXRpdmVJbnB1dFZhbHVlKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG51bGwgfHwgdGhpcy52YWx1ZSA9PT0gdW5kZWZpbmVkID8gJycgOiBTdHJpbmcodGhpcy52YWx1ZSk7CiAgICAgICAgfSwKICAgICAgICBzaG93Q2xlYXI6IGZ1bmN0aW9uIHNob3dDbGVhcigpIHsKICAgICAgICAgIHJldHVybiB0aGlzLmNsZWFyYWJsZSAmJiAhdGhpcy5pbnB1dERpc2FibGVkICYmICF0aGlzLnJlYWRvbmx5ICYmIHRoaXMubmF0aXZlSW5wdXRWYWx1ZSAmJiAodGhpcy5mb2N1c2VkIHx8IHRoaXMuaG92ZXJpbmcpOwogICAgICAgIH0sCiAgICAgICAgc2hvd1B3ZFZpc2libGU6IGZ1bmN0aW9uIHNob3dQd2RWaXNpYmxlKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuc2hvd1Bhc3N3b3JkICYmICF0aGlzLmlucHV0RGlzYWJsZWQgJiYgIXRoaXMucmVhZG9ubHkgJiYgKCEhdGhpcy5uYXRpdmVJbnB1dFZhbHVlIHx8IHRoaXMuZm9jdXNlZCk7CiAgICAgICAgfSwKICAgICAgICBpc1dvcmRMaW1pdFZpc2libGU6IGZ1bmN0aW9uIGlzV29yZExpbWl0VmlzaWJsZSgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLnNob3dXb3JkTGltaXQgJiYgdGhpcy4kYXR0cnMubWF4bGVuZ3RoICYmICh0aGlzLnR5cGUgPT09ICd0ZXh0JyB8fCB0aGlzLnR5cGUgPT09ICd0ZXh0YXJlYScpICYmICF0aGlzLmlucHV0RGlzYWJsZWQgJiYgIXRoaXMucmVhZG9ubHkgJiYgIXRoaXMuc2hvd1Bhc3N3b3JkOwogICAgICAgIH0sCiAgICAgICAgdXBwZXJMaW1pdDogZnVuY3Rpb24gdXBwZXJMaW1pdCgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLiRhdHRycy5tYXhsZW5ndGg7CiAgICAgICAgfSwKICAgICAgICB0ZXh0TGVuZ3RoOiBmdW5jdGlvbiB0ZXh0TGVuZ3RoKCkgewogICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnZhbHVlID09PSAnbnVtYmVyJykgewogICAgICAgICAgICByZXR1cm4gU3RyaW5nKHRoaXMudmFsdWUpLmxlbmd0aDsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gKHRoaXMudmFsdWUgfHwgJycpLmxlbmd0aDsKICAgICAgICB9LAogICAgICAgIGlucHV0RXhjZWVkOiBmdW5jdGlvbiBpbnB1dEV4Y2VlZCgpIHsKICAgICAgICAgIC8vIHNob3cgZXhjZWVkIHN0eWxlIGlmIGxlbmd0aCBvZiBpbml0aWFsIHZhbHVlIGdyZWF0ZXIgdGhlbiBtYXhsZW5ndGgKICAgICAgICAgIHJldHVybiB0aGlzLmlzV29yZExpbWl0VmlzaWJsZSAmJiB0aGlzLnRleHRMZW5ndGggPiB0aGlzLnVwcGVyTGltaXQ7CiAgICAgICAgfQogICAgICB9LAogICAgICB3YXRjaDogewogICAgICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZSh2YWwpIHsKICAgICAgICAgIHRoaXMuJG5leHRUaWNrKHRoaXMucmVzaXplVGV4dGFyZWEpOwoKICAgICAgICAgIGlmICh0aGlzLnZhbGlkYXRlRXZlbnQpIHsKICAgICAgICAgICAgdGhpcy5kaXNwYXRjaCgnRWxGb3JtSXRlbScsICdlbC5mb3JtLmNoYW5nZScsIFt2YWxdKTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIC8vIG5hdGl2ZSBpbnB1dCB2YWx1ZSBpcyBzZXQgZXhwbGljaXRseQogICAgICAgIC8vIGRvIG5vdCB1c2Ugdi1tb2RlbCAvIDp2YWx1ZSBpbiB0ZW1wbGF0ZQogICAgICAgIC8vIHNlZTogaHR0cHM6Ly9naXRodWIuY29tL0VsZW1lRkUvZWxlbWVudC9pc3N1ZXMvMTQ1MjEKICAgICAgICBuYXRpdmVJbnB1dFZhbHVlOiBmdW5jdGlvbiBuYXRpdmVJbnB1dFZhbHVlKCkgewogICAgICAgICAgdGhpcy5zZXROYXRpdmVJbnB1dFZhbHVlKCk7CiAgICAgICAgfSwKICAgICAgICAvLyB3aGVuIGNoYW5nZSBiZXR3ZWVuIDxpbnB1dD4gYW5kIDx0ZXh0YXJlYT4sCiAgICAgICAgLy8gdXBkYXRlIERPTSBkZXBlbmRlbnQgdmFsdWUgYW5kIHN0eWxlcwogICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9FbGVtZUZFL2VsZW1lbnQvaXNzdWVzLzE0ODU3CiAgICAgICAgdHlwZTogZnVuY3Rpb24gdHlwZSgpIHsKICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpcy5zZXROYXRpdmVJbnB1dFZhbHVlKCk7CgogICAgICAgICAgICBfdGhpcy5yZXNpemVUZXh0YXJlYSgpOwoKICAgICAgICAgICAgX3RoaXMudXBkYXRlSWNvbk9mZnNldCgpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBtZXRob2RzOiB7CiAgICAgICAgZm9jdXM6IGZ1bmN0aW9uIGZvY3VzKCkgewogICAgICAgICAgdGhpcy5nZXRJbnB1dCgpLmZvY3VzKCk7CiAgICAgICAgfSwKICAgICAgICBibHVyOiBmdW5jdGlvbiBibHVyKCkgewogICAgICAgICAgdGhpcy5nZXRJbnB1dCgpLmJsdXIoKTsKICAgICAgICB9LAogICAgICAgIGdldE1pZ3JhdGluZ0NvbmZpZzogZnVuY3Rpb24gZ2V0TWlncmF0aW5nQ29uZmlnKCkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICAnaWNvbic6ICdpY29uIGlzIHJlbW92ZWQsIHVzZSBzdWZmaXgtaWNvbiAvIHByZWZpeC1pY29uIGluc3RlYWQuJywKICAgICAgICAgICAgICAnb24taWNvbi1jbGljayc6ICdvbi1pY29uLWNsaWNrIGlzIHJlbW92ZWQuJwogICAgICAgICAgICB9LAogICAgICAgICAgICBldmVudHM6IHsKICAgICAgICAgICAgICAnY2xpY2snOiAnY2xpY2sgaXMgcmVtb3ZlZC4nCiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVCbHVyOiBmdW5jdGlvbiBoYW5kbGVCbHVyKGV2ZW50KSB7CiAgICAgICAgICB0aGlzLmZvY3VzZWQgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJGVtaXQoJ2JsdXInLCBldmVudCk7CgogICAgICAgICAgaWYgKHRoaXMudmFsaWRhdGVFdmVudCkgewogICAgICAgICAgICB0aGlzLmRpc3BhdGNoKCdFbEZvcm1JdGVtJywgJ2VsLmZvcm0uYmx1cicsIFt0aGlzLnZhbHVlXSk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBzZWxlY3Q6IGZ1bmN0aW9uIHNlbGVjdCgpIHsKICAgICAgICAgIHRoaXMuZ2V0SW5wdXQoKS5zZWxlY3QoKTsKICAgICAgICB9LAogICAgICAgIHJlc2l6ZVRleHRhcmVhOiBmdW5jdGlvbiByZXNpemVUZXh0YXJlYSgpIHsKICAgICAgICAgIGlmICh0aGlzLiRpc1NlcnZlcikgcmV0dXJuOwogICAgICAgICAgdmFyIGF1dG9zaXplID0gdGhpcy5hdXRvc2l6ZSwKICAgICAgICAgICAgICB0eXBlID0gdGhpcy50eXBlOwogICAgICAgICAgaWYgKHR5cGUgIT09ICd0ZXh0YXJlYScpIHJldHVybjsKCiAgICAgICAgICBpZiAoIWF1dG9zaXplKSB7CiAgICAgICAgICAgIHRoaXMudGV4dGFyZWFDYWxjU3R5bGUgPSB7CiAgICAgICAgICAgICAgbWluSGVpZ2h0OiBjYWxjVGV4dGFyZWFIZWlnaHQodGhpcy4kcmVmcy50ZXh0YXJlYSkubWluSGVpZ2h0CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgbWluUm93cyA9IGF1dG9zaXplLm1pblJvd3M7CiAgICAgICAgICB2YXIgbWF4Um93cyA9IGF1dG9zaXplLm1heFJvd3M7CiAgICAgICAgICB0aGlzLnRleHRhcmVhQ2FsY1N0eWxlID0gY2FsY1RleHRhcmVhSGVpZ2h0KHRoaXMuJHJlZnMudGV4dGFyZWEsIG1pblJvd3MsIG1heFJvd3MpOwogICAgICAgIH0sCiAgICAgICAgc2V0TmF0aXZlSW5wdXRWYWx1ZTogZnVuY3Rpb24gc2V0TmF0aXZlSW5wdXRWYWx1ZSgpIHsKICAgICAgICAgIHZhciBpbnB1dCA9IHRoaXMuZ2V0SW5wdXQoKTsKICAgICAgICAgIGlmICghaW5wdXQpIHJldHVybjsKICAgICAgICAgIGlmIChpbnB1dC52YWx1ZSA9PT0gdGhpcy5uYXRpdmVJbnB1dFZhbHVlKSByZXR1cm47CiAgICAgICAgICBpbnB1dC52YWx1ZSA9IHRoaXMubmF0aXZlSW5wdXRWYWx1ZTsKICAgICAgICB9LAogICAgICAgIGhhbmRsZUZvY3VzOiBmdW5jdGlvbiBoYW5kbGVGb2N1cyhldmVudCkgewogICAgICAgICAgdGhpcy5mb2N1c2VkID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuJGVtaXQoJ2ZvY3VzJywgZXZlbnQpOwogICAgICAgIH0sCiAgICAgICAgaGFuZGxlQ29tcG9zaXRpb25TdGFydDogZnVuY3Rpb24gaGFuZGxlQ29tcG9zaXRpb25TdGFydCgpIHsKICAgICAgICAgIHRoaXMuaXNDb21wb3NpbmcgPSB0cnVlOwogICAgICAgIH0sCiAgICAgICAgaGFuZGxlQ29tcG9zaXRpb25VcGRhdGU6IGZ1bmN0aW9uIGhhbmRsZUNvbXBvc2l0aW9uVXBkYXRlKGV2ZW50KSB7CiAgICAgICAgICB2YXIgdGV4dCA9IGV2ZW50LnRhcmdldC52YWx1ZTsKICAgICAgICAgIHZhciBsYXN0Q2hhcmFjdGVyID0gdGV4dFt0ZXh0Lmxlbmd0aCAtIDFdIHx8ICcnOwogICAgICAgICAgdGhpcy5pc0NvbXBvc2luZyA9ICFPYmplY3Qoc2hhcmVkX1siaXNLb3JlYW4iXSkobGFzdENoYXJhY3Rlcik7CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVDb21wb3NpdGlvbkVuZDogZnVuY3Rpb24gaGFuZGxlQ29tcG9zaXRpb25FbmQoZXZlbnQpIHsKICAgICAgICAgIGlmICh0aGlzLmlzQ29tcG9zaW5nKSB7CiAgICAgICAgICAgIHRoaXMuaXNDb21wb3NpbmcgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5oYW5kbGVJbnB1dChldmVudCk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVJbnB1dDogZnVuY3Rpb24gaGFuZGxlSW5wdXQoZXZlbnQpIHsKICAgICAgICAgIC8vIHNob3VsZCBub3QgZW1pdCBpbnB1dCBkdXJpbmcgY29tcG9zaXRpb24KICAgICAgICAgIC8vIHNlZTogaHR0cHM6Ly9naXRodWIuY29tL0VsZW1lRkUvZWxlbWVudC9pc3N1ZXMvMTA1MTYKICAgICAgICAgIGlmICh0aGlzLmlzQ29tcG9zaW5nKSByZXR1cm47IC8vIGhhY2sgZm9yIGh0dHBzOi8vZ2l0aHViLmNvbS9FbGVtZUZFL2VsZW1lbnQvaXNzdWVzLzg1NDgKICAgICAgICAgIC8vIHNob3VsZCByZW1vdmUgdGhlIGZvbGxvd2luZyBsaW5lIHdoZW4gd2UgZG9uJ3Qgc3VwcG9ydCBJRQoKICAgICAgICAgIGlmIChldmVudC50YXJnZXQudmFsdWUgPT09IHRoaXMubmF0aXZlSW5wdXRWYWx1ZSkgcmV0dXJuOwogICAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCBldmVudC50YXJnZXQudmFsdWUpOyAvLyBlbnN1cmUgbmF0aXZlIGlucHV0IHZhbHVlIGlzIGNvbnRyb2xsZWQKICAgICAgICAgIC8vIHNlZTogaHR0cHM6Ly9naXRodWIuY29tL0VsZW1lRkUvZWxlbWVudC9pc3N1ZXMvMTI4NTAKCiAgICAgICAgICB0aGlzLiRuZXh0VGljayh0aGlzLnNldE5hdGl2ZUlucHV0VmFsdWUpOwogICAgICAgIH0sCiAgICAgICAgaGFuZGxlQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVDaGFuZ2UoZXZlbnQpIHsKICAgICAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsIGV2ZW50LnRhcmdldC52YWx1ZSk7CiAgICAgICAgfSwKICAgICAgICBjYWxjSWNvbk9mZnNldDogZnVuY3Rpb24gY2FsY0ljb25PZmZzZXQocGxhY2UpIHsKICAgICAgICAgIHZhciBlbExpc3QgPSBbXS5zbGljZS5jYWxsKHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lbC1pbnB1dF9fJyArIHBsYWNlKSB8fCBbXSk7CiAgICAgICAgICBpZiAoIWVsTGlzdC5sZW5ndGgpIHJldHVybjsKICAgICAgICAgIHZhciBlbCA9IG51bGw7CgogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbExpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKGVsTGlzdFtpXS5wYXJlbnROb2RlID09PSB0aGlzLiRlbCkgewogICAgICAgICAgICAgIGVsID0gZWxMaXN0W2ldOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCFlbCkgcmV0dXJuOwogICAgICAgICAgdmFyIHBlbmRhbnRNYXAgPSB7CiAgICAgICAgICAgIHN1ZmZpeDogJ2FwcGVuZCcsCiAgICAgICAgICAgIHByZWZpeDogJ3ByZXBlbmQnCiAgICAgICAgICB9OwogICAgICAgICAgdmFyIHBlbmRhbnQgPSBwZW5kYW50TWFwW3BsYWNlXTsKCiAgICAgICAgICBpZiAodGhpcy4kc2xvdHNbcGVuZGFudF0pIHsKICAgICAgICAgICAgZWwuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVgoJyArIChwbGFjZSA9PT0gJ3N1ZmZpeCcgPyAnLScgOiAnJykgKyB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcuZWwtaW5wdXQtZ3JvdXBfXycgKyBwZW5kYW50KS5vZmZzZXRXaWR0aCArICdweCknOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdXBkYXRlSWNvbk9mZnNldDogZnVuY3Rpb24gdXBkYXRlSWNvbk9mZnNldCgpIHsKICAgICAgICAgIHRoaXMuY2FsY0ljb25PZmZzZXQoJ3ByZWZpeCcpOwogICAgICAgICAgdGhpcy5jYWxjSWNvbk9mZnNldCgnc3VmZml4Jyk7CiAgICAgICAgfSwKICAgICAgICBjbGVhcjogZnVuY3Rpb24gY2xlYXIoKSB7CiAgICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsICcnKTsKICAgICAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsICcnKTsKICAgICAgICAgIHRoaXMuJGVtaXQoJ2NsZWFyJyk7CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVQYXNzd29yZFZpc2libGU6IGZ1bmN0aW9uIGhhbmRsZVBhc3N3b3JkVmlzaWJsZSgpIHsKICAgICAgICAgIHRoaXMucGFzc3dvcmRWaXNpYmxlID0gIXRoaXMucGFzc3dvcmRWaXNpYmxlOwogICAgICAgICAgdGhpcy5mb2N1cygpOwogICAgICAgIH0sCiAgICAgICAgZ2V0SW5wdXQ6IGZ1bmN0aW9uIGdldElucHV0KCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuJHJlZnMuaW5wdXQgfHwgdGhpcy4kcmVmcy50ZXh0YXJlYTsKICAgICAgICB9LAogICAgICAgIGdldFN1ZmZpeFZpc2libGU6IGZ1bmN0aW9uIGdldFN1ZmZpeFZpc2libGUoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy4kc2xvdHMuc3VmZml4IHx8IHRoaXMuc3VmZml4SWNvbiB8fCB0aGlzLnNob3dDbGVhciB8fCB0aGlzLnNob3dQYXNzd29yZCB8fCB0aGlzLmlzV29yZExpbWl0VmlzaWJsZSB8fCB0aGlzLnZhbGlkYXRlU3RhdGUgJiYgdGhpcy5uZWVkU3RhdHVzSWNvbjsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICAgICAgdGhpcy4kb24oJ2lucHV0U2VsZWN0JywgdGhpcy5zZWxlY3QpOwogICAgICB9LAogICAgICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgICAgIHRoaXMuc2V0TmF0aXZlSW5wdXRWYWx1ZSgpOwogICAgICAgIHRoaXMucmVzaXplVGV4dGFyZWEoKTsKICAgICAgICB0aGlzLnVwZGF0ZUljb25PZmZzZXQoKTsKICAgICAgfSwKICAgICAgdXBkYXRlZDogZnVuY3Rpb24gdXBkYXRlZCgpIHsKICAgICAgICB0aGlzLiRuZXh0VGljayh0aGlzLnVwZGF0ZUljb25PZmZzZXQpOwogICAgICB9CiAgICB9OyAvLyBDT05DQVRFTkFURUQgTU9EVUxFOiAuL3BhY2thZ2VzL2lucHV0L3NyYy9pbnB1dC52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9anMmCgogICAgLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLwoKICAgIHZhciBzcmNfaW5wdXR2dWVfdHlwZV9zY3JpcHRfbGFuZ19qc18gPSBpbnB1dHZ1ZV90eXBlX3NjcmlwdF9sYW5nX2pzXzsgLy8gRVhURVJOQUwgTU9EVUxFOiAuL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9ydW50aW1lL2NvbXBvbmVudE5vcm1hbGl6ZXIuanMKCiAgICB2YXIgY29tcG9uZW50Tm9ybWFsaXplciA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7IC8vIENPTkNBVEVOQVRFRCBNT0RVTEU6IC4vcGFja2FnZXMvaW5wdXQvc3JjL2lucHV0LnZ1ZQoKICAgIC8qIG5vcm1hbGl6ZSBjb21wb25lbnQgKi8KCgogICAgdmFyIGNvbXBvbmVudCA9IE9iamVjdChjb21wb25lbnROb3JtYWxpemVyWyJhIgogICAgLyogZGVmYXVsdCAqLwogICAgXSkoc3JjX2lucHV0dnVlX3R5cGVfc2NyaXB0X2xhbmdfanNfLCByZW5kZXIsIHN0YXRpY1JlbmRlckZucywgZmFsc2UsIG51bGwsIG51bGwsIG51bGwpOwogICAgLyogaG90IHJlbG9hZCAqLwoKICAgIGlmIChmYWxzZSkgewogICAgICB2YXIgYXBpOwogICAgfQoKICAgIGNvbXBvbmVudC5vcHRpb25zLl9fZmlsZSA9ICJwYWNrYWdlcy9pbnB1dC9zcmMvaW5wdXQudnVlIjsKICAgIC8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8KCiAgICB2YXIgaW5wdXQgPSBjb21wb25lbnQuZXhwb3J0czsgLy8gQ09OQ0FURU5BVEVEIE1PRFVMRTogLi9wYWNrYWdlcy9pbnB1dC9pbmRleC5qcwoKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgogICAgaW5wdXQuaW5zdGFsbCA9IGZ1bmN0aW9uIChWdWUpIHsKICAgICAgVnVlLmNvbXBvbmVudChpbnB1dC5uYW1lLCBpbnB1dCk7CiAgICB9OwogICAgLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLwoKCiAgICB2YXIgcGFja2FnZXNfaW5wdXQgPSBfX3dlYnBhY2tfZXhwb3J0c19fWyJkZWZhdWx0Il0gPSBpbnB1dDsKICAgIC8qKiovCiAgfSwKCiAgLyoqKi8KICA5OgogIC8qKiovCiAgZnVuY3Rpb24gXyhtb2R1bGUsIGV4cG9ydHMpIHsKICAgIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgiZWxlbWVudC11aS9saWIvdXRpbHMvbWVyZ2UiKTsKICAgIC8qKiovCiAgfQogIC8qKioqKiovCgp9KTs="},null]}