{"remainingRequest":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/thread-loader/dist/cjs.js!/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/home/jenkins_data/workspace/页面-公证处后台/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jenkins_data/workspace/页面-公证处后台/src/views/business/reviewMaterials.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jenkins_data/workspace/页面-公证处后台/src/views/business/reviewMaterials.vue","mtime":1634724784705},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvamVua2luc19kYXRhL3dvcmtzcGFjZS9cdTk4NzVcdTk3NjItXHU1MTZDXHU4QkMxXHU1OTA0XHU1NDBFXHU1M0YwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvciI7CgpmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7IHRyeSB7IHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsgfSBjYXRjaCAoZXJyb3IpIHsgcmVqZWN0KGVycm9yKTsgcmV0dXJuOyB9IGlmIChpbmZvLmRvbmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0gZWxzZSB7IFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTsgfSB9CgpmdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyB2YXIgc2VsZiA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTsgZnVuY3Rpb24gX25leHQodmFsdWUpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAibmV4dCIsIHZhbHVlKTsgfSBmdW5jdGlvbiBfdGhyb3coZXJyKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgInRocm93IiwgZXJyKTsgfSBfbmV4dCh1bmRlZmluZWQpOyB9KTsgfTsgfQoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgcHJldmlld01hdGVyaWFscywgcmV2aWV3U2luZ2xlTWF0ZXJpYWwsIGdldE1hdGVyaWFsRGVwb3QgfSBmcm9tICcuLi8uLi9hcGkvY2xvdWRNYWlsJzsKaW1wb3J0ICogYXMgZHMgZnJvbSAnQC9hcGkvZGV0YWlscyc7CmltcG9ydCBFbEltYWdlVmlld2VyIGZyb20gJ2VsZW1lbnQtdWkvcGFja2FnZXMvaW1hZ2Uvc3JjL2ltYWdlLXZpZXdlcic7CmltcG9ydCB7IHNob3dMb2FkaW5nLCBoaWRlTG9hZGluZyB9IGZyb20gJy4uLy4uL3V0aWxzL2xvYWRpbmcnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgRWxJbWFnZVZpZXdlcjogRWxJbWFnZVZpZXdlcgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG9yZGVySWQ6ICcnLAogICAgICB2YWx1ZTogJy0xJywKICAgICAgaW5pdGlhbERhdGE6IFtdLAogICAgICBzZWFyY2hCYXJEYXRhOiBbXSwKICAgICAgaW1hZ2VEYXRhOiB7fSwKICAgICAgcHJldmlld0RpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBkaXNxdWFsaWZpY2F0aW9uU3RhdHU6IGZhbHNlLAogICAgICBmb3JtSW5saW5lOiB7CiAgICAgICAgY2F1c2U6ICcnCiAgICAgIH0sCiAgICAgIGZvcm1JbmxpbmVSdWxzZTogewogICAgICAgIGNhdXNlOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5LiN5ZCI5qC85Y6f5ZugJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH0sIHsKICAgICAgICAgIG1pbjogMiwKICAgICAgICAgIG1heDogNTAsCiAgICAgICAgICBtZXNzYWdlOiAn6ZW/5bqm5ZyoMuWIsDUw5Liq5a2XJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIHByZXNlbnRtZW50UGFydHk6IGZhbHNlLAogICAgICBhcnJheTogW10sCiAgICAgIGZ1bGxzY3JlZW5Mb2FkaW5nOiBmYWxzZSwKICAgICAgc3JjTGlzdDogW10sCiAgICAgIG9wZXJhdGluZ0F1dGhvcml6YXRpb246IHRydWUsCiAgICAgIHZpZXdlckltYWdlRGF0YTogW10sCiAgICAgIGFycjogW10sCiAgICAgIG1hdGVyaWFsc0RpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBhY3RpdmVOYW1lOiAnZmlyc3QnLAogICAgICBzZWFyY2hNYXRlcmlhbDogJycsCiAgICAgIGNoZWNrTGlzdDogW10sCiAgICAgIGFkZE1hdGVyaWFsOiB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgcmVtYXJrOiAnJwogICAgICB9LAogICAgICBhZGRNYXRlcmlhbERhdGE6IFt7CiAgICAgICAgaWQ6IDEsCiAgICAgICAgbmV3TmFtZTogJ+aWsOadkOaWmeWQjeensCcsCiAgICAgICAgbmV3UmVtYXJrOiAn5p2Q5paZ5aSH5rOoJywKICAgICAgICBidG46ICfmt7vliqAnLAogICAgICAgIG1vZGVsOiB7CiAgICAgICAgICBuYW1lOiAnJywKICAgICAgICAgIHJlbWFyazogJycKICAgICAgICB9CiAgICAgIH1dLAogICAgICB0YWJBY3RpdmVOYW1lOiAnZmlyc3QnLAogICAgICBtYXRlcmlhbERhdGE6IFtdLAogICAgICBzdWJtaXRTdGF0dTogZmFsc2UsCiAgICAgIGFsbDogdHJ1ZQogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICAvLyBpbml0aWFsRGF0YTogewogICAgLy8gICBoYW5kbGVyKG5ld3ZhbCkgewogICAgLy8gICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBuZXd2YWwubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAvLyAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld3ZhbFtpbmRleF0ub3JkZXJOZWVkTWF0ZXJpYWxEVE9TLmxlbmd0aDsgaSsrKSB7CiAgICAvLyAgICAgICAgIGlmIChuZXd2YWxbaW5kZXhdLm9yZGVyTmVlZE1hdGVyaWFsRFRPU1tpXS5vcmRlclByb3Bvc2VyTWF0ZXJpYWxEVE9TLmxlbmd0aCA9PT0gMCkgewogICAgLy8gICAgICAgICAgIHRoaXMub3BlcmF0aW5nQXV0aG9yaXphdGlvbiA9IHRydWUKICAgIC8vICAgICAgICAgfSBlbHNlIHsKICAgIC8vICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG5ld3ZhbFtpbmRleF0ub3JkZXJOZWVkTWF0ZXJpYWxEVE9TW2ldLm9yZGVyUHJvcG9zZXJNYXRlcmlhbERUT1MubGVuZ3RoOyBqKyspIHsKICAgIC8vICAgICAgICAgICAgIGlmIChuZXd2YWxbaW5kZXhdLm9yZGVyTmVlZE1hdGVyaWFsRFRPU1tpXS5vcmRlclByb3Bvc2VyTWF0ZXJpYWxEVE9TW2pdLnN0YXR1cyA9PT0gMCkgewogICAgLy8gICAgICAgICAgICAgICB0aGlzLm9wZXJhdGluZ0F1dGhvcml6YXRpb24gPSB0cnVlCiAgICAvLyAgICAgICAgICAgICB9CiAgICAvLyAgICAgICAgICAgfQogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgICB9CiAgICAvLyAgICAgfQogICAgLy8gICB9LAogICAgLy8gICBkZWVwOiB0cnVlCiAgICAvLyB9LAogICAgcHJlc2VudG1lbnRQYXJ0eTogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKG5ld1ZhbCkge30KICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLm9yZGVySWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5vcmRlcklkOwogICAgdGhpcy4kc3RvcmUuY29tbWl0KCdhcHAvQ0hBTkdFX09SREVSSUQnLCB0aGlzLiRyb3V0ZS5xdWVyeS5vcmRlcklkKTsKICAgIHRoaXMuZ2V0RGF0YSgpOyAvLyBnZXRBbGxUeXBlTWF0ZXJpYWwoeyBvcmRlcklkOiB0aGlzLm9yZGVySWQgfSkudGhlbihhc3luYyhyZXMpID0+IHsKICAgIC8vIH0pCiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXREYXRhOiBmdW5jdGlvbiBnZXREYXRhKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgc2hvd0xvYWRpbmcoKTsKICAgICAgdGhpcy4kYXhpb3MoIm9yZy9tYWlsLW9yZGVyLW1hdGVyaWFsLWxpc3QvIi5jb25jYXQodGhpcy5vcmRlcklkKSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUocmVzKSB7CiAgICAgICAgICB2YXIgdTsKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcywgJ+adkOaWmeWIl+ihqCcpOwogICAgICAgICAgICAgICAgICB1ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXMuZGF0YSkpOwogICAgICAgICAgICAgICAgICB1LnNwbGljZSh1Lmxlbmd0aCAtIDEpOwogICAgICAgICAgICAgICAgICBfdGhpcy5zZWFyY2hCYXJEYXRhID0gdTsgLy8gdGhpcy5pbml0aWFsRGF0YSA9IHJlcy5kYXRhCgogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdldEltYWdlVXJsKHJlcy5kYXRhKTsKCiAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgIF90aGlzLmluaXRpYWxEYXRhID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTsgLy8gY29uc3QgdXJsID0gdGhpcy5pbml0aWFsRGF0YVswXS5vcmRlck5lZWRNYXRlcmlhbERUT1NbMF0ub3JkZXJQcm9wb3Nlck1hdGVyaWFsRFRPU1swXS51cmwuc3BsaXQoJywnKVsxXQoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBjb25zb2xlOwogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZXRJbWFnZVVybChyZXMuZGF0YSk7CgogICAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgICAgX2NvbnRleHQudDEgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQudDAubG9nLmNhbGwoX2NvbnRleHQudDAsIF9jb250ZXh0LnQxKTsKCiAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCkpOwogICAgfSwKICAgIC8vIOWOn+eQhu+8muWIqeeUqFVSTC5jcmVhdGVPYmplY3RVUkzkuLpibG9i5a+56LGh5Yib5bu65Li05pe255qEVVJMCiAgICBiYXNlNjRUb0Jsb2I6IGZ1bmN0aW9uIGJhc2U2NFRvQmxvYigpIHsKICAgICAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgX3JlZjIsIF9yZWYyJGI2NGRhdGEsIGI2NGRhdGEsIF9yZWYyJGNvbnRlbnRUeXBlLCBjb250ZW50VHlwZSwgX3JlZjIkc2xpY2VTaXplLCBzbGljZVNpemU7CgogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3JlZjIgPSBfYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgX2FyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50c1swXSA6IHt9LCBfcmVmMiRiNjRkYXRhID0gX3JlZjIuYjY0ZGF0YSwgYjY0ZGF0YSA9IF9yZWYyJGI2NGRhdGEgPT09IHZvaWQgMCA/ICcnIDogX3JlZjIkYjY0ZGF0YSwgX3JlZjIkY29udGVudFR5cGUgPSBfcmVmMi5jb250ZW50VHlwZSwgY29udGVudFR5cGUgPSBfcmVmMiRjb250ZW50VHlwZSA9PT0gdm9pZCAwID8gJycgOiBfcmVmMiRjb250ZW50VHlwZSwgX3JlZjIkc2xpY2VTaXplID0gX3JlZjIuc2xpY2VTaXplLCBzbGljZVNpemUgPSBfcmVmMiRzbGljZVNpemUgPT09IHZvaWQgMCA/IDUxMiA6IF9yZWYyJHNsaWNlU2l6ZTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgICAgIC8vIOS9v+eUqCBhdG9iKCkg5pa55rOV5bCG5pWw5o2u6Kej56CBCiAgICAgICAgICAgICAgICAgIHZhciBieXRlQ2hhcmFjdGVycyA9IGF0b2IoYjY0ZGF0YSk7CiAgICAgICAgICAgICAgICAgIHZhciBieXRlQXJyYXlzID0gW107CgogICAgICAgICAgICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBieXRlQ2hhcmFjdGVycy5sZW5ndGg7IG9mZnNldCArPSBzbGljZVNpemUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc2xpY2UgPSBieXRlQ2hhcmFjdGVycy5zbGljZShvZmZzZXQsIG9mZnNldCArIHNsaWNlU2l6ZSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGJ5dGVOdW1iZXJzID0gW107CgogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2xpY2UubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgIGJ5dGVOdW1iZXJzLnB1c2goc2xpY2UuY2hhckNvZGVBdChpKSk7CiAgICAgICAgICAgICAgICAgICAgfSAvLyA4IOS9jeaXoOespuWPt+aVtOaVsOWAvOeahOexu+Wei+WMluaVsOe7hOOAguWGheWuueWwhuWIneWni+WMluS4uiAw44CCCiAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5peg5rOV5YiG6YWN6K+35rGC5pWw55uu55qE5a2X6IqC77yM5YiZ5bCG5byV5Y+R5byC5bi444CCCgoKICAgICAgICAgICAgICAgICAgICAvLyA4IOS9jeaXoOespuWPt+aVtOaVsOWAvOeahOexu+Wei+WMluaVsOe7hOOAguWGheWuueWwhuWIneWni+WMluS4uiAw44CCCiAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5peg5rOV5YiG6YWN6K+35rGC5pWw55uu55qE5a2X6IqC77yM5YiZ5bCG5byV5Y+R5byC5bi444CCCiAgICAgICAgICAgICAgICAgICAgYnl0ZUFycmF5cy5wdXNoKG5ldyBVaW50OEFycmF5KGJ5dGVOdW1iZXJzKSk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBuZXcgQmxvYihieXRlQXJyYXlzLCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogY29udGVudFR5cGUKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IE9iamVjdC5hc3NpZ24ocmVzdWx0LCB7CiAgICAgICAgICAgICAgICAgICAgLy8gamFydHRvOiDov5nph4zkuIDlrpropoHlpITnkIbkuIDkuIsgVVJMLmNyZWF0ZU9iamVjdFVSTAogICAgICAgICAgICAgICAgICAgIHByZXZpZXc6IFVSTC5jcmVhdGVPYmplY3RVUkwocmVzdWx0KSwKICAgICAgICAgICAgICAgICAgICBuYW1lOiAiXHU1NkZFXHU3MjQ3XHU3OTNBXHU0RjhCLnBuZyIKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTsKICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgdmlld2VySW1nOiBmdW5jdGlvbiB2aWV3ZXJJbWcodmFsKSB7CiAgICAgIGNvbnNvbGUubG9nKHZhbCk7CiAgICAgIHRoaXMudmlld2VySW1hZ2VEYXRhID0gdmFsOwogICAgfSwKICAgIGNsb3NlVmlld2VyOiBmdW5jdGlvbiBjbG9zZVZpZXdlcigpIHsKICAgICAgdGhpcy52aWV3ZXJJbWFnZURhdGEgPSBbXTsKICAgIH0sCiAgICAvLyBmY2codmFsKSB7CiAgICAvLyAgIHN1cHBsZW1lbnRhcnlNYXRlcmlhbHModmFsKS50aGVuKChyZXMpID0+IHsKICAgIC8vICAgICBjb25zb2xlLmxvZyhyZXMpCiAgICAvLyAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAvLyAgICAgICB0aGlzLnNlYXJjaEF0dHJpYnV0aW9uKCkKICAgIC8vICAgICB9CiAgICAvLyAgIH0pCiAgICAvLyB9LAogICAgc2VhcmNoQXR0cmlidXRpb246IGZ1bmN0aW9uIHNlYXJjaEF0dHJpYnV0aW9uKHZhbCkgewogICAgICB0aGlzLnZhbHVlID0gdmFsOwogICAgICB0aGlzLmNoZWNrTGlzdCA9IFtdOwogICAgICB0aGlzLmFsbCA9IHZhbCA9PT0gJy0xJzsKICAgICAgdGhpcy5vcGVuVGhlU3VwcGxlbWVudGFsTWF0ZXJpYWxGcmFtZSgpOwogICAgfSwKICAgIGdldEltYWdlVXJsOiBmdW5jdGlvbiBnZXRJbWFnZVVybCh2YWwpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIHZhbERhdGEsIGluZGV4LCBpLCBqLCBkYXRhLCB1cmwsIGltOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdmFsRGF0YSA9IHZhbDsKICAgICAgICAgICAgICAgIGluZGV4ID0gMDsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgaWYgKCEoaW5kZXggPCB2YWwubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDMwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoISh2YWxEYXRhW2luZGV4XS5vcmRlck5lZWRNYXRlcmlhbERUT1MubGVuZ3RoID4gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaSA9IDA7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGlmICghKGkgPCB2YWxEYXRhW2luZGV4XS5vcmRlck5lZWRNYXRlcmlhbERUT1MubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoIXZhbERhdGFbaW5kZXhdLm9yZGVyTmVlZE1hdGVyaWFsRFRPU1tpXS5vcmRlclByb3Bvc2VyTWF0ZXJpYWxEVE9TKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGogPSAwOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBpZiAoIShqIDwgdmFsRGF0YVtpbmRleF0ub3JkZXJOZWVkTWF0ZXJpYWxEVE9TW2ldLm9yZGVyUHJvcG9zZXJNYXRlcmlhbERUT1MubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBkYXRhID0gewogICAgICAgICAgICAgICAgICBpZDogdmFsRGF0YVtpbmRleF0ub3JkZXJOZWVkTWF0ZXJpYWxEVE9TW2ldLm9yZGVyUHJvcG9zZXJNYXRlcmlhbERUT1Nbal0uaWQKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXMyLmdldEZpbGVUeXBlKHZhbERhdGFbaW5kZXhdLm9yZGVyTmVlZE1hdGVyaWFsRFRPU1tpXS5vcmRlclByb3Bvc2VyTWF0ZXJpYWxEVE9TW2pdLm9yaWdpbkZpbGVOYW1lKSA9PT0gJ2ltYWdlJykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMzsKICAgICAgICAgICAgICAgIHJldHVybiBwcmV2aWV3TWF0ZXJpYWxzKGRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgdXJsID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5iYXNlNjRUb0Jsb2IoewogICAgICAgICAgICAgICAgICBiNjRkYXRhOiB1cmwuZGF0YSwKICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdpbWFnZS9wbmcnCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIGltID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgICB2YWxEYXRhW2luZGV4XS5vcmRlck5lZWRNYXRlcmlhbERUT1NbaV0ub3JkZXJQcm9wb3Nlck1hdGVyaWFsRFRPU1tqXS51cmwgPSBpbS5wcmV2aWV3OwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyMTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgICAgaWYgKF90aGlzMi5nZXRGaWxlVHlwZSh2YWxEYXRhW2luZGV4XS5vcmRlck5lZWRNYXRlcmlhbERUT1NbaV0ub3JkZXJQcm9wb3Nlck1hdGVyaWFsRFRPU1tqXS5vcmlnaW5GaWxlTmFtZSkgPT09ICdwZGYnKSB7CiAgICAgICAgICAgICAgICAgIHZhbERhdGFbaW5kZXhdLm9yZGVyTmVlZE1hdGVyaWFsRFRPU1tpXS5vcmRlclByb3Bvc2VyTWF0ZXJpYWxEVE9TW2pdLnVybCA9IHJlcXVpcmUoJ0AvYXNzZXRzL2ltZ3MvcGRmLnBuZycpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpczIuZ2V0RmlsZVR5cGUodmFsRGF0YVtpbmRleF0ub3JkZXJOZWVkTWF0ZXJpYWxEVE9TW2ldLm9yZGVyUHJvcG9zZXJNYXRlcmlhbERUT1Nbal0ub3JpZ2luRmlsZU5hbWUpID09PSAnd29yZCcpIHsKICAgICAgICAgICAgICAgICAgdmFsRGF0YVtpbmRleF0ub3JkZXJOZWVkTWF0ZXJpYWxEVE9TW2ldLm9yZGVyUHJvcG9zZXJNYXRlcmlhbERUT1Nbal0udXJsID0gcmVxdWlyZSgnQC9hc3NldHMvaW1ncy9ET0NYLnBuZycpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpczIuZ2V0RmlsZVR5cGUodmFsRGF0YVtpbmRleF0ub3JkZXJOZWVkTWF0ZXJpYWxEVE9TW2ldLm9yZGVyUHJvcG9zZXJNYXRlcmlhbERUT1Nbal0ub3JpZ2luRmlsZU5hbWUpID09PSAnZXhjZWwnKSB7CiAgICAgICAgICAgICAgICAgIHZhbERhdGFbaW5kZXhdLm9yZGVyTmVlZE1hdGVyaWFsRFRPU1tpXS5vcmRlclByb3Bvc2VyTWF0ZXJpYWxEVE9TW2pdLnVybCA9IHJlcXVpcmUoJ0AvYXNzZXRzL2ltZ3MveGxzLnBuZycpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpczIuZ2V0RmlsZVR5cGUodmFsRGF0YVtpbmRleF0ub3JkZXJOZWVkTWF0ZXJpYWxEVE9TW2ldLm9yZGVyUHJvcG9zZXJNYXRlcmlhbERUT1Nbal0ub3JpZ2luRmlsZU5hbWUpID09PSAndmlkZW8nKSB7CiAgICAgICAgICAgICAgICAgIHZhbERhdGFbaW5kZXhdLm9yZGVyTmVlZE1hdGVyaWFsRFRPU1tpXS5vcmRlclByb3Bvc2VyTWF0ZXJpYWxEVE9TW2pdLnVybCA9IHJlcXVpcmUoJ0AvYXNzZXRzL2ltZ3MvTVA0LnBuZycpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgaisrOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA4OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgICBpKys7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDU7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgICAgIGluZGV4Kys7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAzMDoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCB2YWxEYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSAzMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldEZpbGVUeXBlOiBmdW5jdGlvbiBnZXRGaWxlVHlwZShmaWxlTmFtZSkgewogICAgICAvLyDlkI7nvIDojrflj5YKICAgICAgdmFyIHN1ZmZpeCA9ICcnOyAvLyDojrflj5bnsbvlnovnu5PmnpwKCiAgICAgIHZhciByZXN1bHQgPSAnJzsKCiAgICAgIHRyeSB7CiAgICAgICAgdmFyIGZsaWVBcnIgPSBmaWxlTmFtZS5zcGxpdCgnLicpOwogICAgICAgIHN1ZmZpeCA9IGZsaWVBcnJbZmxpZUFyci5sZW5ndGggLSAxXTsKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgc3VmZml4ID0gJyc7CiAgICAgIH0gLy8gZmlsZU5hbWXml6DlkI7nvIDov5Tlm54gZmFsc2UKCgogICAgICBpZiAoIXN1ZmZpeCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgc3VmZml4ID0gc3VmZml4LnRvTG9jYWxlTG93ZXJDYXNlKCk7IC8vIOWbvueJh+agvOW8jwoKICAgICAgdmFyIGltZ2xpc3QgPSBbJ3BuZycsICdqcGcnLCAnanBlZycsICdibXAnLCAnZ2lmJ107IC8vIOi/m+ihjOWbvueJh+WMuemFjQoKICAgICAgcmVzdWx0ID0gaW1nbGlzdC5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0gPT09IHN1ZmZpeDsKICAgICAgfSk7CgogICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgcmV0dXJuICdpbWFnZSc7CiAgICAgIH0gLy8g5Yy56YWNdHh0CgoKICAgICAgdmFyIHR4dGxpc3QgPSBbJ3R4dCddOwogICAgICByZXN1bHQgPSB0eHRsaXN0LmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbSA9PT0gc3VmZml4OwogICAgICB9KTsKCiAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICByZXR1cm4gJ3R4dCc7CiAgICAgIH0gLy8g5Yy56YWNIGV4Y2VsCgoKICAgICAgdmFyIGV4Y2VsaXN0ID0gWyd4bHMnLCAneGxzeCddOwogICAgICByZXN1bHQgPSBleGNlbGlzdC5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0gPT09IHN1ZmZpeDsKICAgICAgfSk7CgogICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgcmV0dXJuICdleGNlbCc7CiAgICAgIH0gLy8g5Yy56YWNIHdvcmQKCgogICAgICB2YXIgd29yZGxpc3QgPSBbJ2RvYycsICdkb2N4J107CiAgICAgIHJlc3VsdCA9IHdvcmRsaXN0LmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbSA9PT0gc3VmZml4OwogICAgICB9KTsKCiAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICByZXR1cm4gJ3dvcmQnOwogICAgICB9IC8vIOWMuemFjSBwZGYKCgogICAgICB2YXIgcGRmbGlzdCA9IFsncGRmJ107CiAgICAgIHJlc3VsdCA9IHBkZmxpc3QuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtID09PSBzdWZmaXg7CiAgICAgIH0pOwoKICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgIHJldHVybiAncGRmJzsKICAgICAgfSAvLyDljLnphY0gcHB0CgoKICAgICAgdmFyIHBwdGxpc3QgPSBbJ3BwdCcsICdwcHR4J107CiAgICAgIHJlc3VsdCA9IHBwdGxpc3QuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtID09PSBzdWZmaXg7CiAgICAgIH0pOwoKICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgIHJldHVybiAncHB0JzsKICAgICAgfSAvLyDljLnphY0g6KeG6aKRCgoKICAgICAgdmFyIHZpZGVvbGlzdCA9IFsnbXA0JywgJ20ydicsICdta3YnLCAncm12YicsICd3bXYnLCAnYXZpJywgJ2ZsdicsICdtb3YnLCAnbTR2J107CiAgICAgIHJlc3VsdCA9IHZpZGVvbGlzdC5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0gPT09IHN1ZmZpeDsKICAgICAgfSk7CgogICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgcmV0dXJuICd2aWRlbyc7CiAgICAgIH0gLy8g5Yy56YWNIOmfs+mikQoKCiAgICAgIHZhciByYWRpb2xpc3QgPSBbJ21wMycsICd3YXYnLCAnd212J107CiAgICAgIHJlc3VsdCA9IHJhZGlvbGlzdC5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0gPT09IHN1ZmZpeDsKICAgICAgfSk7CgogICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgcmV0dXJuICdyYWRpbyc7CiAgICAgIH0gLy8g5YW25LuWIOaWh+S7tuexu+WeiwoKCiAgICAgIHJldHVybiAnb3RoZXInOwogICAgfSwKICAgIGNsaWNrUHJldmlld0ltYWdlOiBmdW5jdGlvbiBjbGlja1ByZXZpZXdJbWFnZSh2YWwsIGl0ZW1zLCBpdGVtKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2coaXRlbXMsIGl0ZW0pOwogICAgICB2YXIgYSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodmFsKSk7CiAgICAgIGEucmVhbE5hbWUgPSBpdGVtLnByb3Bvc2VyTmFtZTsKICAgICAgYS5tYXRlcmlhbE5hbWUgPSBpdGVtcy5tYXRlcmlhbE5hbWU7CiAgICAgIGEubWF0ZXJpYWxDb2RlID0gaXRlbXMubWF0ZXJpYWxDb2RlOwogICAgICB0aGlzLmZ1bGxzY3JlZW5Mb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy5pbWFnZURhdGEgPSB7fTsKICAgICAgYS5pbWdVcmwgPSBbXTsKCiAgICAgIGlmICh0aGlzLmdldEZpbGVUeXBlKHZhbC5vcmlnaW5GaWxlTmFtZSkgIT09ICdpbWFnZScpIHsKICAgICAgICBkcy5nZXRNYXRlcmlhUHJvcG9zZXJsTGlzdCh7CiAgICAgICAgICBpZDogdmFsLmlkCiAgICAgICAgfSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBfcmVmMyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KHJlcykgewogICAgICAgICAgICB2YXIgaW1nbGlzdCwgbGlzdCwgaSwgaW1nVXJsOwogICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgICAgICAgICAgIGltZ2xpc3QgPSBbXTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzLmRhdGEuc3VjY2VzcyA9PT0gdHJ1ZSkpIHsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGxpc3QgPSByZXMuZGF0YS5kYXRhLmlkczsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQudDAgPSBfcmVnZW5lcmF0b3JSdW50aW1lLmtleXMobGlzdCk7CgogICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgaWYgKChfY29udGV4dDQudDEgPSBfY29udGV4dDQudDAoKSkuZG9uZSkgewogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaSA9IF9jb250ZXh0NC50MS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5nZXRJbWcobGlzdFtpXSwgMik7CgogICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgaW1nVXJsID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgaW1nbGlzdC5wdXNoKGltZ1VybCk7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgICBhLmltZ1VybCA9IGltZ2xpc3Q7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmZ1bGxzY3JlZW5Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMzLnByZXZpZXdEaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBfdGhpczMuaW1hZ2VEYXRhID0gYTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgICAgICB9KSk7CgogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDIpIHsKICAgICAgICAgICAgcmV0dXJuIF9yZWYzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9OwogICAgICAgIH0oKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYS5pbWdVcmwucHVzaCh2YWwudXJsKTsKICAgICAgICB0aGlzLmZ1bGxzY3JlZW5Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy5wcmV2aWV3RGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgICAgdGhpcy5pbWFnZURhdGEgPSBhOwogICAgICB9CiAgICB9LAogICAgZ2V0SW1nOiBmdW5jdGlvbiBnZXRJbWcoaWQsIHR5cGUpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgdmFyIHVybDsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHVybCA9IHR5cGUgPT09IDEgPyAib3JnL29yZGVyLWRvY3VtZW50LXByZXZpZXctaW1nLyIuY29uY2F0KGlkKSA6ICJvcmcvb3JkZXItcHJvcG9zZXItbWF0ZXJpYWwtcHJldmlldy13b3JkLWltZy8iLmNvbmNhdChpZCk7IC8vIGNvbnNvbGUubG9nKHR5cGUpCgogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNC4kYXhpb3ModXJsKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB2YXIgX3JlZjQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNShyZXMpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwnICsgcmVzLmRhdGEpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmNC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0Ni5zZW50KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgbGFyZ2VyUHJldmlldzogZnVuY3Rpb24gbGFyZ2VyUHJldmlldygpIHsKICAgICAgLy8gdGhpcy5wcmV2aWV3RGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICAgIHRoaXMuc3JjTGlzdCA9IHRoaXMuaW1hZ2VEYXRhOyAvLyB0aGlzLiRzdG9yZS5jb21taXQoJ2FwcC9DSEFOR0VfSU1BR0UnLCB0aGlzLmltYWdlRGF0YSkKICAgIH0sCiAgICBkaXNxdWFsaWZpY2F0aW9uT3BlcmF0aW9uOiBmdW5jdGlvbiBkaXNxdWFsaWZpY2F0aW9uT3BlcmF0aW9uKCkgewogICAgICB0aGlzLmRpc3F1YWxpZmljYXRpb25TdGF0dSA9IHRydWU7CiAgICB9LAogICAgc3VibWl0Q2F1c2U6IGZ1bmN0aW9uIHN1Ym1pdENhdXNlKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnNbJ2Rpc3F1YWxpZmljYXRpb25Gb3JtJ10udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkLCBvYmopIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIF90aGlzNS5pbWFnZURhdGEuc3RhdHVzID0gMjsKICAgICAgICAgIF90aGlzNS5pbWFnZURhdGEucmVtYXJrc0NvbnRlbnQgPSBfdGhpczUuZm9ybUlubGluZS5jYXVzZTsKICAgICAgICAgIHJldmlld1NpbmdsZU1hdGVyaWFsKF90aGlzNS5pbWFnZURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgX3RoaXM1LiRyb3V0ZXIuZ28oMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gLy8gdGhpcy5mb3JtSW5saW5lLmNhdXNlID0gIiI7CgogICAgICB9KTsKICAgIH0sCiAgICBnZXRBcHByb3ZlZDogZnVuY3Rpb24gZ2V0QXBwcm92ZWQoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2codGhpcy5pbWFnZURhdGEpOwogICAgICB0aGlzLmltYWdlRGF0YS5zdGF0dXMgPSAxOwogICAgICByZXZpZXdTaW5nbGVNYXRlcmlhbCh0aGlzLmltYWdlRGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKCiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICBfdGhpczYuJHJvdXRlci5nbygwKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHN1Ym1pdFJldmlld1Jlc3VsdDogZnVuY3Rpb24gc3VibWl0UmV2aWV3UmVzdWx0KCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHZhciBzdGF0dXMgPSB0cnVlOwoKICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuaW5pdGlhbERhdGEubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgaWYgKHRoaXMuaW5pdGlhbERhdGFbaW5kZXhdLm9yZGVyTmVlZE1hdGVyaWFsRFRPUykgewogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmluaXRpYWxEYXRhW2luZGV4XS5vcmRlck5lZWRNYXRlcmlhbERUT1MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKHRoaXMuaW5pdGlhbERhdGFbaW5kZXhdLm9yZGVyTmVlZE1hdGVyaWFsRFRPU1tpXS5zdGF0dXMgPT09IDEpIHsKICAgICAgICAgICAgICBzdGF0dXMgPSBmYWxzZTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZiAodGhpcy5pbml0aWFsRGF0YVtpbmRleF0ub3JkZXJOZWVkTWF0ZXJpYWxEVE9TW2ldLm9yZGVyUHJvcG9zZXJNYXRlcmlhbERUT1MpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy5pbml0aWFsRGF0YVtpbmRleF0ub3JkZXJOZWVkTWF0ZXJpYWxEVE9TW2ldLm9yZGVyUHJvcG9zZXJNYXRlcmlhbERUT1MubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5pdGlhbERhdGFbaW5kZXhdLm9yZGVyTmVlZE1hdGVyaWFsRFRPU1tpXS5vcmRlclByb3Bvc2VyTWF0ZXJpYWxEVE9TW2pdLnN0YXR1cyA9PT0gMikgewogICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIHRoaXMuJGNvbmZpcm0oCiAgICAgIC8vICAgc3RhdHVzID8gJ+ehruiupOadkOaWmeWujOaVtOS4lOaXoOivr++8n+ehruWumuWQjuWJqeS9meadkOaWmeWdh+inhuS4uuWuoeaguOmAmui/hycgOiAn5piv5ZCm56Gu6K6k5p2Q5paZ5a6h5qC457uT5p6c77yf56Gu6K6k5ZCO77yM5bCG6YCa55+l5b2T5LqL5Lq66KGl5YWF5p2Q5paZJywKICAgICAgLy8gICAn5o+Q56S6JywKICAgICAgLy8gICB7CiAgICAgIC8vICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgIC8vICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgLy8gICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAvLyAgIH0KICAgICAgLy8gKQogICAgICAvLyAgIC50aGVuKCgpID0+IHsKICAgICAgLy8gICAgIHRoaXMuJGF4aW9zKGBvcmcvb3JkZXItbWF0ZXJpYWwtYXBwcm92ZWQvJHt0aGlzLm9yZGVySWR9YCkudGhlbihyZXMgPT4gewogICAgICAvLyAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZyhyZXMpCiAgICAgIC8vICAgICAgICAgdGhpcy4kcm91dGVyLmdvKDApCiAgICAgIC8vICAgICAgIH0KICAgICAgLy8gICAgIH0pCiAgICAgIC8vICAgfSkKICAgICAgLy8gICAuY2F0Y2goKCkgPT4gewogICAgICAvLyAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgIC8vICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgLy8gICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOaTjeS9nCcKICAgICAgLy8gICAgIH0pCiAgICAgIC8vICAgfSkKCgogICAgICB2YXIgaCA9IHRoaXMuJGNyZWF0ZUVsZW1lbnQ7CiAgICAgIHRoaXMuJG1zZ2JveCh7CiAgICAgICAgdGl0bGU6ICfmj5DnpLonLAogICAgICAgIG1lc3NhZ2U6IGgoJ3AnLCBudWxsLCBbaCgnc3BhbicsIG51bGwsIHN0YXR1cyA/ICfnoa7orqTmnZDmlpnlrozmlbTkuJTml6Dor6/vvJ8nIDogJ+aYr+WQpuehruiupOadkOaWmeWuoeaguOe7k+aenO+8nycpLCBoKCdkaXYnLCB7CiAgICAgICAgICBzdHlsZTogJ2NvbG9yOiAjRjU2QzZDJwogICAgICAgIH0sIHN0YXR1cyA/ICfnoa7lrprlkI7liankvZnmnZDmlpnlnYfop4bkuLrlrqHmoLjpgJrov4cnIDogJ+ehruiupOWQju+8jOWwhumAmuefpeW9k+S6i+S6uuihpeWFheadkOaWmScpXSksCiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgYmVmb3JlQ2xvc2U6IGZ1bmN0aW9uIGJlZm9yZUNsb3NlKGFjdGlvbiwgaW5zdGFuY2UsIGRvbmUpIHsKICAgICAgICAgIGlmIChhY3Rpb24gPT09ICdjb25maXJtJykgewogICAgICAgICAgICBfdGhpczcuJGF4aW9zKCJvcmcvb3JkZXItbWF0ZXJpYWwtYXBwcm92ZWQvIi5jb25jYXQoX3RoaXM3Lm9yZGVySWQpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgICAgICBkb25lKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRvbmUoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGFjdGlvbikgewogICAgICAgIF90aGlzNy4kc3RvcmUuY29tbWl0KCdhcHAvQ0hBTkdFX09SREVSSUQnLCBfdGhpczcub3JkZXJJZCk7CgogICAgICAgIF90aGlzNy4kcm91dGVyLnJlcGxhY2UoewogICAgICAgICAgbmFtZTogJ2V4YW1pbmVNYXRlcmlhbHMnLAogICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgb3JkZXJJZDogX3RoaXM3Lm9yZGVySWQKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge30pOwogICAgfSwKICAgIHN1cHBsZW1lbnRhcnk6IGZ1bmN0aW9uIHN1cHBsZW1lbnRhcnkodmFsLCB2YWwyKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2codmFsLCB2YWwyKTsKICAgICAgdmFyIGRhdGEgPSBbSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmluaXRpYWxEYXRhW3ZhbF0ub3JkZXJOZWVkTWF0ZXJpYWxEVE9TW3ZhbDJdKSldOwogICAgICBkYXRhWzBdLnN0YXR1cyA9IGRhdGFbMF0uc3RhdHVzID09PSAxID8gMCA6IDE7CiAgICAgIGRhdGFbMF0ucHJvcG9zZXJJZCA9IHRoaXMuaW5pdGlhbERhdGFbdmFsXS5wcm9wb3NlcklkOwogICAgICB0aGlzLiRheGlvcygib3JnL29yZGVyLW5lZWQtbWF0ZXJpYWwtdXBkYXRlIiwgZGF0YSwgewogICAgICAgIG1ldGhvZDogJ1BPU1QnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgX3RoaXM4LmluaXRpYWxEYXRhW3ZhbF0ub3JkZXJOZWVkTWF0ZXJpYWxEVE9TW3ZhbDJdLnN0YXR1cyA9IF90aGlzOC5pbml0aWFsRGF0YVt2YWxdLm9yZGVyTmVlZE1hdGVyaWFsRFRPU1t2YWwyXS5zdGF0dXMgPT09IDAgPyAxIDogMDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGdvQmFja1RvVGhlTGFzdFBhZ2U6IGZ1bmN0aW9uIGdvQmFja1RvVGhlTGFzdFBhZ2UoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsKICAgICAgICBuYW1lOiAnZW50cnlEZXRhaWxzT3JkZXInLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBvcmRlcklkOiB0aGlzLm9yZGVySWQKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGJsYW5rUmVzZXQ6IGZ1bmN0aW9uIGJsYW5rUmVzZXQodmFsKSB7CiAgICAgIGlmICh2YWwubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5vcGVuVGhlU3VwcGxlbWVudGFsTWF0ZXJpYWxGcmFtZSgpOwogICAgICB9CiAgICB9LAogICAgcmVqZWN0ZWRNYXRlcmlhbDogZnVuY3Rpb24gcmVqZWN0ZWRNYXRlcmlhbCgpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgICB0aGlzLnN1Ym1pdFN0YXR1ID0gZmFsc2U7CiAgICAgIGdldE1hdGVyaWFsRGVwb3QoewogICAgICAgIG9yZGVySWQ6IHRoaXMub3JkZXJJZCwKICAgICAgICBtYXRlcmlhbE5hbWU6ICcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcywgJ+adkOaWmeW6kycpOwogICAgICAgIF90aGlzOS5tYXRlcmlhbERhdGEgPSByZXMuZGF0YTsKICAgICAgICBfdGhpczkuc2VhcmNoTWF0ZXJpYWwgPSAnJzsKICAgICAgICBfdGhpczkuY2hlY2tMaXN0ID0gW107CiAgICAgICAgX3RoaXM5LmFkZE1hdGVyaWFsRGF0YSA9IFt7CiAgICAgICAgICBpZDogMSwKICAgICAgICAgIG5ld05hbWU6ICfmlrDmnZDmlpnlkI3np7AnLAogICAgICAgICAgbmV3UmVtYXJrOiAn5p2Q5paZ5aSH5rOoJywKICAgICAgICAgIGJ0bjogJ+a3u+WKoCcsCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICBuYW1lOiAnJywKICAgICAgICAgICAgcmVtYXJrOiAnJwogICAgICAgICAgfQogICAgICAgIH1dOwogICAgICAgIF90aGlzOS5tYXRlcmlhbHNEaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgfSk7CiAgICB9LAogICAgc2VhcmNoTWF0ZXJpYWxOYW1lOiBmdW5jdGlvbiBzZWFyY2hNYXRlcmlhbE5hbWUoKSB7CiAgICAgIHRoaXMub3BlblRoZVN1cHBsZW1lbnRhbE1hdGVyaWFsRnJhbWUoKTsKICAgIH0sCiAgICBhZGRGb3JtOiBmdW5jdGlvbiBhZGRGb3JtKHZhbCwgaW5kZXgpIHsKICAgICAgaWYgKHZhbC5idG4gPT09ICfmt7vliqAnKSB7CiAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICBpZDogdGhpcy5hZGRNYXRlcmlhbERhdGEubGVuZ3RoICsgMSwKICAgICAgICAgIG5ld05hbWU6ICfmlrDmnZDmlpnlkI3np7AnLAogICAgICAgICAgbmV3UmVtYXJrOiAn5p2Q5paZ5aSH5rOoJywKICAgICAgICAgIGJ0bjogJ+WIoOmZpCcsCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICBuYW1lOiAnJywKICAgICAgICAgICAgcmVtYXJrOiAnJwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgdGhpcy5hZGRNYXRlcmlhbERhdGEucHVzaChkYXRhKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFkZE1hdGVyaWFsRGF0YS5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9CgogICAgICBjb25zb2xlLmxvZyh2YWwpOwogICAgfSwKICAgIG9wZW5UaGVTdXBwbGVtZW50YWxNYXRlcmlhbEZyYW1lOiBmdW5jdGlvbiBvcGVuVGhlU3VwcGxlbWVudGFsTWF0ZXJpYWxGcmFtZSgpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgdGhpcy4kYXhpb3MoIm9yZy9vcmctbWF0ZXJpYWwtbGlzdC8iLmNvbmNhdCh0aGlzLm9yZGVySWQpLCB7CiAgICAgICAgbWF0ZXJpYWxOYW1lOiB0aGlzLnNlYXJjaE1hdGVyaWFsLAogICAgICAgIHByb3Bvc2VySWQ6IHRoaXMudmFsdWUKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMxMC5tYXRlcmlhbERhdGEgPSByZXMuZGF0YTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXMuZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgZm9yICh2YXIgbSA9IDA7IG0gPCByZXMuZGF0YVtpXS5vcmdNYXRlcmlhbERUT1MubGVuZ3RoOyBtKyspIHsKICAgICAgICAgICAgaWYgKHJlcy5kYXRhW2ldLm9yZ01hdGVyaWFsRFRPU1ttXS5pc0ZsYWcgPT09IDEpIHsKICAgICAgICAgICAgICByZXMuZGF0YVtpXS5vcmdNYXRlcmlhbERUT1NbbV0uZGlzYWJsZSA9IHRydWU7CgogICAgICAgICAgICAgIF90aGlzMTAuY2hlY2tMaXN0LnB1c2gocmVzLmRhdGFbaV0ub3JnTWF0ZXJpYWxEVE9TW21dLmlkKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXMuZGF0YVtpXS5vcmdNYXRlcmlhbERUT1NbbV0uZGlzYWJsZSA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBfdGhpczEwLmFkZE1hdGVyaWFsRGF0YSA9IFt7CiAgICAgICAgICBpZDogMSwKICAgICAgICAgIG5ld05hbWU6ICfmlrDmnZDmlpnlkI3np7AnLAogICAgICAgICAgbmV3UmVtYXJrOiAn5p2Q5paZ5aSH5rOoJywKICAgICAgICAgIGJ0bjogJ+a3u+WKoCcsCiAgICAgICAgICBtb2RlbDogewogICAgICAgICAgICBuYW1lOiAnJywKICAgICAgICAgICAgcmVtYXJrOiAnJwogICAgICAgICAgfQogICAgICAgIH1dOwogICAgICAgIF90aGlzMTAubWF0ZXJpYWxzRGlhbG9nVmlzaWJsZSA9IHRydWU7IC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKQogICAgICB9KTsKICAgIH0sCiAgICBjb25maXJtQWRkOiBmdW5jdGlvbiBjb25maXJtQWRkKCkgewogICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7CgogICAgICBpZiAodGhpcy5hY3RpdmVOYW1lID09PSAnZmlyc3QnKSB7CiAgICAgICAgaWYgKHRoaXMuYWxsKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup5p2Q5paZ5omA5bGeJwogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICB2YXIgcCA9IFtdOwoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubWF0ZXJpYWxEYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMubWF0ZXJpYWxEYXRhW2ldLm9yZ01hdGVyaWFsRFRPUy5sZW5ndGg7IGorKykgewogICAgICAgICAgICBpZiAodGhpcy5tYXRlcmlhbERhdGFbaV0ub3JnTWF0ZXJpYWxEVE9TW2pdLmlzRmxhZykgewogICAgICAgICAgICAgIHAucHVzaCh0aGlzLm1hdGVyaWFsRGF0YVtpXS5vcmdNYXRlcmlhbERUT1Nbal0uaWQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAocC5sZW5ndGggPT09IHRoaXMuY2hlY2tMaXN0Lmxlbmd0aCkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7foh7PlsJHpgInmi6nkuIDpobknLAogICAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgdmFyIHMyID0gbmV3IFNldChwKTsKICAgICAgICB2YXIgaW50ZXJzZWN0ID0gdGhpcy5jaGVja0xpc3QuZmlsdGVyKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICByZXR1cm4gIXMyLmhhcyh4KTsKICAgICAgICB9KTsKICAgICAgICB2YXIgX2FyciA9IFtdOwoKICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5tYXRlcmlhbERhdGEpIHsKICAgICAgICAgIGZvciAodmFyIF9pIGluIHRoaXMubWF0ZXJpYWxEYXRhW2tleV0ub3JnTWF0ZXJpYWxEVE9TKSB7CiAgICAgICAgICAgIGlmIChpbnRlcnNlY3QuaW5kZXhPZih0aGlzLm1hdGVyaWFsRGF0YVtrZXldLm9yZ01hdGVyaWFsRFRPU1tfaV0uaWQpID4gLTEpIHsKICAgICAgICAgICAgICBfYXJyLnB1c2godGhpcy5tYXRlcmlhbERhdGFba2V5XS5vcmdNYXRlcmlhbERUT1NbX2ldKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIHkgPSB7fTsKICAgICAgICB2YXIgdCA9IFtdOwoKICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgX2Fyci5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgIHkubWF0ZXJpYWxDb2RlID0gX2FycltpbmRleF0ubWF0ZXJpYWxDb2RlOwogICAgICAgICAgeS5tYXRlcmlhbE5hbWUgPSBfYXJyW2luZGV4XS5tYXRlcmlhbE5hbWU7CiAgICAgICAgICB5LnByb3Bvc2VySWQgPSBwYXJzZUludCh0aGlzLnZhbHVlKSA9PT0gMCA/IG51bGwgOiB0aGlzLnZhbHVlOwogICAgICAgICAgeS50eXBlID0gMTsKICAgICAgICAgIHkuc3RhdHVzID0gMTsKICAgICAgICAgIHQucHVzaCh5KTsKICAgICAgICB9IC8vIGNvbnNvbGUubG9nKHQpCgoKICAgICAgICB0aGlzLiRheGlvcygib3JnL2FkZC1vcmctbmVlZC1tYXRlcmlhbC8iLmNvbmNhdCh0aGlzLm9yZGVySWQpLCB0LCB7CiAgICAgICAgICBtZXRob2Q6ICdQT1NUJwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgIF90aGlzMTEuJHJvdXRlci5nbygwKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgYXJyID0gW107CgogICAgICAgIGZvciAodmFyIF9pbmRleCA9IDA7IF9pbmRleCA8IHRoaXMuYWRkTWF0ZXJpYWxEYXRhLmxlbmd0aDsgX2luZGV4KyspIHsKICAgICAgICAgIGlmICh0aGlzLmFkZE1hdGVyaWFsRGF0YVtfaW5kZXhdLm1vZGVsLm5hbWUubGVuZ3RoID4gMCkgewogICAgICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgICAgICBvcmRlcklkOiB0aGlzLm9yZGVySWQsCiAgICAgICAgICAgICAgbWF0ZXJpYWxOYW1lOiB0aGlzLmFkZE1hdGVyaWFsRGF0YVtfaW5kZXhdLm1vZGVsLm5hbWUsCiAgICAgICAgICAgICAgdHlwZTogMiwKICAgICAgICAgICAgICBzdGF0dXM6IDAsCiAgICAgICAgICAgICAgY29udGVudDogdGhpcy5hZGRNYXRlcmlhbERhdGFbX2luZGV4XS5tb2RlbC5yZW1hcmssCiAgICAgICAgICAgICAgcHJvcG9zZXJJZDogbnVsbAogICAgICAgICAgICB9OwogICAgICAgICAgICBhcnIucHVzaChkYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGNvbnNvbGUubG9nKGFycik7CgogICAgICAgIGlmIChhcnIubGVuZ3RoID4gMCkgewogICAgICAgICAgaWYgKHRoaXMuc3VibWl0U3RhdHUpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuc3VibWl0U3RhdHUgPSB0cnVlOwogICAgICAgICAgdGhpcy4kYXhpb3MoIm9yZy9hZGQtb3JkZXItbmVlZC1tYXRlcmlhbC8iLmNvbmNhdCh0aGlzLm9yZGVySWQpLCBhcnIsIHsKICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcKICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICBfdGhpczExLiRyb3V0ZXIuZ28oMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+a3u+WKoOS4tOaXtuadkOaWmScsCiAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgdGlwU3VwcGxlbWVudEJsYW5rTWF0ZXJpYWw6IGZ1bmN0aW9uIHRpcFN1cHBsZW1lbnRCbGFua01hdGVyaWFsKCkgewogICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7CgogICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5pbml0aWFsRGF0YSkpOwogICAgICB2YXIgc3RhID0gdGhpcy5wcmVzZW50bWVudFBhcnR5ID8gMSA6IDA7CiAgICAgIHZhciBhcnIgPSBbXTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGF0YVtpXS5vcmRlck5lZWRNYXRlcmlhbERUT1MubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGlmIChkYXRhW2ldLm9yZGVyTmVlZE1hdGVyaWFsRFRPU1tqXS5vcmRlclByb3Bvc2VyTWF0ZXJpYWxEVE9TLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICBkYXRhW2ldLm9yZGVyTmVlZE1hdGVyaWFsRFRPU1tqXS5zdGF0dXMgPSBzdGE7CiAgICAgICAgICAgIGFyci5wdXNoKGRhdGFbaV0ub3JkZXJOZWVkTWF0ZXJpYWxEVE9TW2pdKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuJGF4aW9zKCJvcmcvb3JkZXItbmVlZC1tYXRlcmlhbC11cGRhdGUiLCBhcnIsIHsKICAgICAgICBtZXRob2Q6ICdQT1NUJwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IF90aGlzMTIuaW5pdGlhbERhdGEubGVuZ3RoOyBfaTIrKykgewogICAgICAgICAgICBmb3IgKHZhciBfaiA9IDA7IF9qIDwgX3RoaXMxMi5pbml0aWFsRGF0YVtfaTJdLm9yZGVyTmVlZE1hdGVyaWFsRFRPUy5sZW5ndGg7IF9qKyspIHsKICAgICAgICAgICAgICBpZiAoX3RoaXMxMi5pbml0aWFsRGF0YVtfaTJdLm9yZGVyTmVlZE1hdGVyaWFsRFRPU1tfal0ub3JkZXJQcm9wb3Nlck1hdGVyaWFsRFRPUy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgIF90aGlzMTIuaW5pdGlhbERhdGFbX2kyXS5vcmRlck5lZWRNYXRlcmlhbERUT1NbX2pdLnN0YXR1cyA9IHN0YTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZU1hdGVyaWFsVHlwZTogZnVuY3Rpb24gZGVsZXRlTWF0ZXJpYWxUeXBlKHZhbCkgewogICAgICB2YXIgX3RoaXMxMyA9IHRoaXM7CgogICAgICB0aGlzLiRjb25maXJtKCfnoa7orqTliKDpmaTor6XnsbvmnZDmlpnvvJ/liKDpmaTlkI7pnIDph43mlrDmt7vliqDvvIEnLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMxMy4kYXhpb3MoIm9yZy9kZWwtb3JkZXItbmVlZC1tYXRlcmlhbC8iLmNvbmNhdCh2YWwuaWQpLCB7fSwgewogICAgICAgICAgbWV0aG9kOiAnZGVsZXRlJwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKCiAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgX3RoaXMxMy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip8nCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgX3RoaXMxMy4kcm91dGVyLmdvKDApOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMxMy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5Yig6ZmkJwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9Cn07"},null]}