{"remainingRequest":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/thread-loader/dist/cjs.js!/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/home/jenkins_data/workspace/页面-公证处后台/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jenkins_data/workspace/页面-公证处后台/src/views/mailManage/expressDelivery.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jenkins_data/workspace/页面-公证处后台/src/views/mailManage/expressDelivery.vue","mtime":1634724784710},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9CgpmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09ICJzdHJpbmciKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gIk9iamVjdCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09ICJNYXAiIHx8IG4gPT09ICJTZXQiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09ICJBcmd1bWVudHMiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmICh0eXBlb2YgU3ltYm9sICE9PSAidW5kZWZpbmVkIiAmJiBpdGVyW1N5bWJvbC5pdGVyYXRvcl0gIT0gbnVsbCB8fCBpdGVyWyJAQGl0ZXJhdG9yIl0gIT0gbnVsbCkgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KGFycik7IH0KCmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgeyBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IH0ga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICIvaG9tZS9qZW5raW5zX2RhdGEvd29ya3NwYWNlL1x1OTg3NVx1OTc2Mi1cdTUxNkNcdThCQzFcdTU5MDRcdTU0MEVcdTUzRjAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yIjsKCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9CgovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBnZXRDaXR5UmVnaW9uVHJlZSwgZ2V0Q2l0eVBhcmVudHMsIGdldEFkZHJlc3NCb29rTGlzdCwgdXBkYXRlRXhwcmVzc0FkZHJlc3MsIGRlbGV0ZUV4cHJlc3NBZGRyZXNzIH0gZnJvbSAnLi4vLi4vYXBpL2FkZHJlc3NCb29rJzsKaW1wb3J0IHsgZ2V0UmVjZWl2ZXJBZGRyZXNzTGlzdCwgdXBkYXRlRXhwcmVzc1JlY2VpdmVyQWRkcmVzcywgZ2V0T25saW5lTWFpbExpc3REZXRhaWwsIGNhbGxFeHByZXNzIGFzIF9jYWxsRXhwcmVzcywgZ2V0RGVhZnVsdFNlbmRlckFkZHJlc3MgfSBmcm9tICcuLi8uLi9hcGkvbWFpbE1hbmFnZSc7CmltcG9ydCB7IGFkZHJlc3NGb3JtUnVsZXMsIHJlY2VpdmVySW1wcm92ZUZvcm1SdWxlcywgZXhwcmVzc0luZm9Gb3JtUnVsZXMsIHZhbGlkUGhvbmVDb21wdXRlZCwgdmFsaWRGaXhsaW5lQ29tcHV0ZWQgfSBmcm9tICcuLi8uLi91dGlscy92YWxpZGF0ZSc7CmltcG9ydCBhcHBsaWNhbnREaWFsb2cgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9tYWlsTWFuYWdlL2FwcGxpY2FudERpYWxvZyc7Cgp2YXIgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgYXBwbGljYW50RGlhbG9nOiBhcHBsaWNhbnREaWFsb2cKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZW5kZXJEYXRhOiB7CiAgICAgICAgLy8g5a+E5Lu25Lq65L+h5oGvCiAgICAgICAgbmFtZTogIiIsCiAgICAgICAgY29tcGFueU5hbWU6ICIiLAogICAgICAgIGNvbnRhY3ROdW1iZXI6ICIiLAogICAgICAgIGZpeGVkTGluZTogIiIsCiAgICAgICAgZGV0YWlsQWRkcmVzczogIiIsCiAgICAgICAgYWRkcmVzczogIiIsCiAgICAgICAgcmVnaW9uQ29kZTogIiIsCiAgICAgICAgcmVnaW9uQ29kZUFycjogW10KICAgICAgfSwKICAgICAgcmVjZWl2ZXJUYWJsZURhdGE6IFtdLAogICAgICAvLyDmlLbku7bkurrliJfooajkv6Hmga8KICAgICAgLy8g5Zyw5Z2AYnUKICAgICAgYWRkcmVzc0RpYWxvZzogZmFsc2UsCiAgICAgIGFkZHJlc3NJbm5lclZpc2libGU6IGZhbHNlLAogICAgICBhZGRyZXNzTGlzdDogW10sCiAgICAgIC8vIOWcsOWdgGJ15YiX6KGoCiAgICAgIGFkZHJlc3NQYWdpbmF0aW9uOiB7CiAgICAgICAgLy8g5Zyw5Z2AYnXliIbpobUKICAgICAgICBwYWdlTnVtOiAxLAogICAgICAgIHBhZ2VTaXplOiA4CiAgICAgIH0sCiAgICAgIGFkZHJlc3NUb3RhbDogNTAsCiAgICAgIHNlbGVjdEFkZHJlc3M6ICIiLAogICAgICAvLyDpgInkuK3nmoTlnLDlnYAKICAgICAgLy/lhoXlsYLlvLnnqpfmlbDmja4KICAgICAgYWRkcmVzc0lubmVyRm9ybURhdGE6IHsKICAgICAgICBuYW1lOiAiIiwKICAgICAgICBjb250YWN0TnVtYmVyOiAiIiwKICAgICAgICBmaXhlZExpbmU6ICIiLAogICAgICAgIGNvbXBhbnlOYW1lOiAiIiwKICAgICAgICBkZXRhaWxBZGRyZXNzOiAiIiwKICAgICAgICByZWdpb25Db2RlOiAiIiwKICAgICAgICByZWdpb25Db2RlQXJyOiBbXQogICAgICB9LAogICAgICBhZGRyZXNzRm9ybVJ1bGVzOiBhZGRyZXNzRm9ybVJ1bGVzLAogICAgICAvLyDlhoXlsYLlvLnnqpcgLyDlr4Tku7bkurrooajljZUg5qCh6aqMCiAgICAgIC8vIOWujOWWhOS/ruaUueW8ueeql+aVsOaNrgogICAgICBpbXByb3ZlRGlhbG9nOiBmYWxzZSwKICAgICAgcmVjZWl2ZXJJbXByb3ZlRGlhbG9nRGF0YTogewogICAgICAgIHJlY2VpdmVOYW1lOiAiIiwKICAgICAgICByZWNlaXZlTW9iaWxlOiAiIiwKICAgICAgICByZWNlaXZlRml4ZWRMaW5lOiAiIiwKICAgICAgICByZWNlaXZlQ29tcGFueTogIiIsCiAgICAgICAgcmVjZWl2ZUFkZHJlc3M6ICIiLAogICAgICAgIHJlY2VpdmVEZXRhaWxBZGRyZXNzOiAiIiwKICAgICAgICByZWNlaXZlUmVnaW9uQ29kZTogIiIsCiAgICAgICAgcmVjZWl2ZVJlZ2lvbkNvZGVBcnI6IFtdCiAgICAgIH0sCiAgICAgIHJlY2VpdmVySW1wcm92ZUZvcm1SdWxlczogcmVjZWl2ZXJJbXByb3ZlRm9ybVJ1bGVzLAogICAgICAvLyDlrozlloTkv67mlLnlvLnnqpfmoKHpqowKICAgICAgYXBwbGljYW50U2hvdzogZmFsc2UsCiAgICAgIC8vIOeUs+ivt+S6uuS/oeaBr+W8ueeqlwogICAgICBsaXRpZ2FudFRhYmxlRGF0YTogW10sCiAgICAgIGNpdHlMaXN0OiBbXSwKICAgICAgZXhwcmVzc1RpbWVNYXJrOiAxLAogICAgICAvLyDku4rlpKnmmI7lpKnlkI7lpKnmoIforrAKICAgICAgdGltZVNlbGVjdEluZGV4OiBudWxsLAogICAgICBwcmVNYXJrOiAiIiwKICAgICAgdGltZUxpc3Q6IFtdLAogICAgICAvLyDlv6vpgJLlj6/pgInml7bpl7TmrrUKICAgICAgc2VsZWN0VGltZTogIiIsCiAgICAgIC8vIOW/q+mAkumAieaLqeeahOaXtumXtOautQogICAgICBzZWxlY3REYXk6ICIiLAogICAgICAvLyDlv6vpgJLpgInmi6nnmoTml6XmnJ8KICAgICAgZXhwcmVzc0luZm86IHsKICAgICAgICAvLyDlv6vpgJLmj5DkuqTooajljZUKICAgICAgICBleHByZXNzQ29tcGFueTogIiIsCiAgICAgICAgZXhwcmVzc01ldGhvZDogIiIsCiAgICAgICAgc2VsZWN0VGltZTogIiIsCiAgICAgICAgcGF5TWV0aG9kOiAiIiwKICAgICAgICBwYWNrYWdlQ2F0ZWdvcnk6IDAsCiAgICAgICAgcmVtYXJrOiAiIiwKICAgICAgICByYW5nZTogIiIsCiAgICAgICAgLy8g5pe26Ze06IyD5Zu0CiAgICAgICAgZXhwcmVzc01ldGhvZFN0cjogIuS4iumXqOWPluS7tiIKICAgICAgfSwKICAgICAgZXhwcmVzc0luZm9Gb3JtUnVsZXM6IGV4cHJlc3NJbmZvRm9ybVJ1bGVzLAogICAgICAvLyDlv6vpgJLmj5DkuqTooajljZXmoKHpqowKICAgICAgZXhwcmVzc0NvbXBhbnlMaXN0OiAiIiwKICAgICAgLy8gZXhwcmVzc0NvbXBhbnlMaXN0OiBbCS8vIOW/q+mAkuWFrOWPuAogICAgICAvLyAJeyBsYWJlbDogIuS4reWbvemCruaUvyIsIHZhbHVlOiAiZW1zIiB9LAogICAgICAvLyAJeyBsYWJlbDogIumhuuS4sOmAn+i/kCIsIHZhbHVlOiAic2h1bmZlbmciIH0sCiAgICAgIC8vIF0sCiAgICAgIGV4cHJlc3NNZXRob2RMaXN0OiBbLy8g5Y+W5Lu25pa55byPCiAgICAgIHsKICAgICAgICBsYWJlbDogIuWbuuWumuWcsOWdgOaPveaUtiIsCiAgICAgICAgdmFsdWU6IDAKICAgICAgfSwgewogICAgICAgIGxhYmVsOiAi6aKE57qm5LiK6Zeo5o+95pS2IiwKICAgICAgICB2YWx1ZTogMQogICAgICB9XSwKICAgICAgcGF5TWV0aG9kTGlzdDogWy8vIOi/kOi0ueaUr+S7mOaWueW8jwogICAgICB7CiAgICAgICAgbGFiZWw6ICLlr4Tku5jmnIjnu5MiLAogICAgICAgIHZhbHVlOiAxCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogIuaUtuaWueS7mCIsCiAgICAgICAgdmFsdWU6IDIKICAgICAgfSwgewogICAgICAgIGxhYmVsOiAi56ys5LiJ5pa55LuYIiwKICAgICAgICB2YWx1ZTogMwogICAgICB9LCB7CiAgICAgICAgbGFiZWw6ICLlr4Tku5jnjrDnu5MiLAogICAgICAgIHZhbHVlOiA0CiAgICAgIH1dLAogICAgICBwYWNrYWdlQ2F0ZWdvcnlMaXN0OiBbLy8g54mp5ZOB57G75Z6LCiAgICAgIHsKICAgICAgICBsYWJlbDogIuaWh+S7tiIsCiAgICAgICAgdmFsdWU6IDAKICAgICAgfV0sCiAgICAgIG9yZ0lkOiAiIiwKICAgICAgLy8g5YWs6K+B5aSEaWQKICAgICAgaXNDYWxsOiBmYWxzZSwKICAgICAgcG9wb3ZlclZpc2libGU6IGZhbHNlLAogICAgICBmcm9tOiAiIiwKICAgICAgZnJvbU9yZGVySWQ6ICIiCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGV4cHJlc3NNZXRob2RDb206IGZ1bmN0aW9uIGV4cHJlc3NNZXRob2RDb20oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyDlj5bku7bmlrnlvI8KICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLmV4cHJlc3NJbmZvLnNlbGVjdFRpbWUgPSBfdGhpcy5leHByZXNzSW5mby5leHByZXNzTWV0aG9kID09PSAwID8gIuWumuaXtuaPveaUtiIgOiAiIjsKICAgICAgICBfdGhpcy5leHByZXNzVGltZU1hcmsgPSAxOwogICAgICAgIGlmIChfdGhpcy5vcmdJZCA9PSAxKSBfdGhpcy5leHByZXNzSW5mby5wYXlNZXRob2QgPSBfdGhpcy5leHByZXNzSW5mby5leHByZXNzTWV0aG9kID09PSAxID8gMiA6IDE7IC8vIOWdquWxsemihOe6puS4iumXqOaPveaUtgogICAgICAgIC8vIGlmICh0aGlzLm9yZ0lkID09IDIpIHRoaXMuZXhwcmVzc0luZm8ucGF5TWV0aG9kID0gdGhpcy5leHByZXNzSW5mby5leHByZXNzTWV0aG9kID09PSAwID8gMiA6IDEgIC8vIOW4guWkhAoKICAgICAgICBfdGhpcy4kcmVmc1siZXhwcmVzc0luZm9Gb3JtIl0uY2xlYXJWYWxpZGF0ZSgic2VsZWN0VGltZSIpOwogICAgICB9KTsKICAgICAgcmV0dXJuIHRoaXMuZXhwcmVzc0luZm8uZXhwcmVzc01ldGhvZDsKICAgIH0sCiAgICBleHByZXNzQ29tcGFueUNvbTogZnVuY3Rpb24gZXhwcmVzc0NvbXBhbnlDb20oKSB7CiAgICAgIC8vIOW/q+mAkuWFrOWPuAogICAgICB0aGlzLmV4cHJlc3NJbmZvLmV4cHJlc3NNZXRob2QgPSB0aGlzLmV4cHJlc3NJbmZvLmV4cHJlc3NDb21wYW55ID09ICJzaHVuZmVuZyIgPyAxIDogMDsgLy8g6aG65Liw5LuY5qy+5pa55byPCgogICAgICBpZiAodGhpcy5leHByZXNzSW5mby5leHByZXNzQ29tcGFueSA9PSAic2h1bmZlbmciICYmIHRoaXMub3JnSWQgPT0gMSkgdGhpcy5leHByZXNzSW5mby5wYXlNZXRob2QgPSAxOyAvLyDlnarlsbEgKyDpobrkuLDku5jmrL7mlrnlvI8KCiAgICAgIHRoaXMuZXhwcmVzc0luZm8uZXhwcmVzc0NvbXBhbnkgPT0gInNodW5mZW5nIiA/IHRoaXMuZ2VuZXJhdG9yVGltZSg4LCAyMCwgIiIsICI6MzAiKSA6IHRoaXMuZ2VuZXJhdG9yVGltZSg5LCAxOCk7CiAgICAgIHJldHVybiB0aGlzLmV4cHJlc3NJbmZvLmV4cHJlc3NDb21wYW55IHx8ICIiOwogICAgfSwKICAgIHBheU1ldGhvZExpc3RDb206IGZ1bmN0aW9uIHBheU1ldGhvZExpc3RDb20oKSB7CiAgICAgIC8vIOi/kOi0ueaUr+S7mOaWueW8jwogICAgICBpZiAodGhpcy5leHByZXNzSW5mby5leHByZXNzQ29tcGFueSA9PSAiZW1zIiB8fCB0aGlzLmV4cHJlc3NJbmZvLmV4cHJlc3NDb21wYW55ID09ICIiKSB7CiAgICAgICAgcmV0dXJuIFt7CiAgICAgICAgICBsYWJlbDogIuWvhOS7mOeOsOe7kyIsCiAgICAgICAgICB2YWx1ZTogNAogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiAi5a+E5LuY5pyI57uTIiwKICAgICAgICAgIHZhbHVlOiAxCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6ICLliLDku5giLAogICAgICAgICAgdmFsdWU6IDIKICAgICAgICB9XTsKICAgICAgfQoKICAgICAgcmV0dXJuIFsvLyDpobrkuLAKICAgICAgewogICAgICAgIGxhYmVsOiAi5a+E5LuY546w57uTIiwKICAgICAgICB2YWx1ZTogMQogICAgICB9LCB7CiAgICAgICAgbGFiZWw6ICLlr4Tku5jmnIjnu5MiLAogICAgICAgIHZhbHVlOiAzCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogIuWIsOS7mCIsCiAgICAgICAgdmFsdWU6IDIKICAgICAgfV07CiAgICB9LAogICAgZXhwcmVzc0NvbXBhbnlMaXN0Q29tOiB7CiAgICAgIC8vIOW/q+mAkuWFrOWPuOWIl+ihqAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy5leHByZXNzQ29tcGFueUxpc3Q7CiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkgewogICAgICAgIHJldHVybiB2YWw7CiAgICAgIH0KICAgIH0sCiAgICBjb250YWN0TnVtYmVyUnVsZXM6IGZ1bmN0aW9uIGNvbnRhY3ROdW1iZXJSdWxlcygpIHsKICAgICAgLy8g5omL5py65Y+36aqM6K+BCiAgICAgIHJldHVybiB2YWxpZFBob25lQ29tcHV0ZWQ7CiAgICB9LAogICAgZml4ZWRMaW5lUnVsZXM6IGZ1bmN0aW9uIGZpeGVkTGluZVJ1bGVzKCkgewogICAgICAvLyDlm7ror53pqozor4EKICAgICAgcmV0dXJuIHZhbGlkRml4bGluZUNvbXB1dGVkOwogICAgfSwKICAgIHNlbGVjdEFjdGl2ZTogZnVuY3Rpb24gc2VsZWN0QWN0aXZlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBmdW5jdGlvbiAoaW5kZXgsIG1hcmspIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhpbmRleCwgbWFyayk7CiAgICAgICAgaWYgKF90aGlzMi50aW1lU2VsZWN0SW5kZXggPT0gaW5kZXggJiYgX3RoaXMyLnByZU1hcmsgPT0gbWFyaykgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH07CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgaWYgKHRoaXMub3JnSWQgPT0gMSkgewogICAgICAvLyDlnarlsbHkvJjlhYjlsZXnpLrpobrkuLAKICAgICAgdGhpcy5leHByZXNzSW5mby5leHByZXNzQ29tcGFueSA9ICJzaHVuZmVuZyI7CiAgICAgIHRoaXMuZXhwcmVzc0NvbXBhbnlMaXN0ID0gW3sKICAgICAgICBsYWJlbDogIuS4reWbvemCruaUvyIsCiAgICAgICAgdmFsdWU6ICJlbXMiCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogIumhuuS4sOmAn+i/kCIsCiAgICAgICAgdmFsdWU6ICJzaHVuZmVuZyIKICAgICAgfV07CiAgICB9CgogICAgaWYgKHRoaXMub3JnSWQgPT0gMiB8fCB0aGlzLm9yZ0lkID09IDMgfHwgdGhpcy5vcmdJZCA9PSAxNykgewogICAgICAvLyBvcmdJZCAzIOS4reWxsemmmeWxseWFrOivgeWkhCjmtYvor5UpICBvcmdJZCAxNyDkuK3lsbHpppnlsbHlhazor4HlpIQo55Sf5LqnKQogICAgICB0aGlzLmV4cHJlc3NDb21wYW55TGlzdCA9IFsvLyDmt7HlnLPlhazor4HlpITlj6rmnInkuK3lm73pgq7mlL8gCiAgICAgIHsKICAgICAgICBsYWJlbDogIuS4reWbvemCruaUvyIsCiAgICAgICAgdmFsdWU6ICJlbXMiCiAgICAgIH1dOwogICAgICB0aGlzLmV4cHJlc3NJbmZvLmV4cHJlc3NDb21wYW55ID0gImVtcyI7CiAgICAgIHRoaXMuZXhwcmVzc0luZm8uZXhwcmVzc01ldGhvZCA9IDA7CiAgICAgIHRoaXMuZXhwcmVzc0luZm8ucGF5TWV0aG9kID0gMjsKICAgICAgdGhpcy5leHByZXNzSW5mby5wYWNrYWdlQ2F0ZWdvcnkgPSAwOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZnJvbSA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmZyb207CiAgICB0aGlzLmZyb21PcmRlcklkID0gdGhpcy4kcm91dGUucXVlcnkuZnJvbU9yZGVySWQ7CiAgICB0aGlzLmdldENpdHlEYXRhKCk7CiAgICB0aGlzLmdldEFkZHJlc3NMaXN0KCk7CiAgICBjb25zb2xlLmxvZyh0aGlzLiRyb3V0ZSk7CiAgICB0aGlzLmdldFJlY2VpdmVyQWRkcmVzcygpOwogICAgdGhpcy5nZW5lcmF0b3JUaW1lKDksIDE4KTsKICAgIHRoaXMuZ2VuZXJhdG9yRGF5KDEpOwogICAgdGhpcy5vcmdJZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ29yZ19pZCcpOwogICAgdGhpcy5nZXREZWZhdWx0U2VuZGVyKCk7CiAgICBjb25zb2xlLmxvZyh0aGlzLiRyb3V0ZSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDojrflj5blr4Tku7bkurrpu5jorqTlnLDlnYAKICAgIGdldERlZmF1bHRTZW5kZXI6IGZ1bmN0aW9uIGdldERlZmF1bHRTZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlcywgb3JnT2ZmaWNlLCBvcmc7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGdldERlYWZ1bHRTZW5kZXJBZGRyZXNzKCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi5a+E5Lu25Lq66buY6K6k5Zyw5Z2ALS0+IiwgcmVzKTsKCiAgICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MgJiYgcmVzLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgb3JnT2ZmaWNlID0gcmVzLmRhdGEub3JnT2ZmaWNlIHx8ICIiOwogICAgICAgICAgICAgICAgICBvcmcgPSByZXMuZGF0YS5vcmcgfHwgIiI7CiAgICAgICAgICAgICAgICAgIF90aGlzMy5zZW5kZXJEYXRhLm5hbWUgPSBvcmdPZmZpY2Uub2ZmaWNlTmFtZSB8fCBvcmcub3JnTmFtZTsKICAgICAgICAgICAgICAgICAgX3RoaXMzLnNlbmRlckRhdGEuY29tcGFueU5hbWUgPSBvcmdPZmZpY2Uub2ZmaWNlTmFtZSB8fCBvcmcub3JnTmFtZTsKICAgICAgICAgICAgICAgICAgX3RoaXMzLnNlbmRlckRhdGEuZml4ZWRMaW5lID0gb3JnT2ZmaWNlLnBob25lIHx8IG9yZy5waG9uZTsKICAgICAgICAgICAgICAgICAgX3RoaXMzLnNlbmRlckRhdGEuZGV0YWlsQWRkcmVzcyA9IG9yZ09mZmljZS5vcmdBZGRyZXNzIHx8IG9yZy5vcmdBZGRyOwogICAgICAgICAgICAgICAgICBfdGhpczMuc2VuZGVyRGF0YS5yZWdpb25Db2RlID0gb3JnLnJlZ2lvbkNvZGU7CgogICAgICAgICAgICAgICAgICBfdGhpczMuZ2V0Q2l0eVBhcmVudChvcmcucmVnaW9uQ29kZSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyDlnLDlnYDpmZDliLbovpPlhaUKICAgIGhhbmRsZUlucHV0OiBmdW5jdGlvbiBoYW5kbGVJbnB1dCh2YWx1ZSwgb2JqZWN0LCBrZXkpIHsKICAgICAgaWYgKHZhbHVlLmxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzW29iamVjdF1ba2V5XSA9IHZhbHVlLnJlcGxhY2UoL1tgfiFAIyQlXiYqX1wrPXt9fDw+PzoiLC4vOydcXFtcXcK3fu+8gUAj77+lJeKApuKApiYq77yI77yJ4oCU4oCU44CK44CL77yf77ya4oCc4oCd44CQ44CR44CB77yb4oCY4oCZ77yM44CC44CBXS9nLCAiIikucmVwbGFjZSgvXHMvLCAiIik7CiAgICAgIH0KICAgIH0sCiAgICAvLyDlrozlloTkv67mlLkKICAgIGhhbmRsZUVkaXQ6IGZ1bmN0aW9uIGhhbmRsZUVkaXQoaW5kZXgsIHJvdykgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMuaW1wcm92ZURpYWxvZyA9IHRydWU7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQuJHJlZnNbInJlY2VpdmVySW1wcm92ZUZvcm0iXS5jbGVhclZhbGlkYXRlKCk7CiAgICAgIH0pOwogICAgICB0aGlzLnJlY2VpdmVySW1wcm92ZURpYWxvZ0RhdGEgPSBfb2JqZWN0U3ByZWFkKHt9LCByb3cpOwogICAgICB0aGlzLmdldENpdHlQYXJlbnRJbXByb3ZlRGlhbG9nKHJvdyk7CiAgICB9LAogICAgLy8g5a6M5ZaE5L+u5pS556Gu5a6aCiAgICBoYW5kbGVJbXByb3ZlRGlhbG9nQ29tZmlybTogZnVuY3Rpb24gaGFuZGxlSW1wcm92ZURpYWxvZ0NvbWZpcm0oZm9ybU5hbWUpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZSggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHYpIHsKICAgICAgICAgIHZhciByZXM7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgaWYgKCF2KSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coX3RoaXM1LnJlY2VpdmVySW1wcm92ZURpYWxvZ0RhdGEpOwogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVFeHByZXNzUmVjZWl2ZXJBZGRyZXNzKF90aGlzNS5yZWNlaXZlckltcHJvdmVEaWFsb2dEYXRhKTsKCiAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgX3RoaXM1LiRtZXNzYWdlLmVycm9yKCfkv67mlLnlnLDlnYDlpLHotKXvvIzor7fnqI3lkI7lho3or5XvvIEnKSk7CgogICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICBfdGhpczUuaW1wcm92ZURpYWxvZyA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgX3RoaXM1LiRtZXNzYWdlLnN1Y2Nlc3MoJ+S/ruaUueWcsOWdgOaIkOWKn++8gScpOwoKICAgICAgICAgICAgICAgICAgX3RoaXM1LmdldFJlY2VpdmVyQWRkcmVzcygpOwoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIHN1Ym1pdCEhJyk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCkpOwogICAgfSwKICAgIC8vIOWujOWWhOS/ruaUueWPlua2iAogICAgaGFuZGxlSW1wcm92ZURpYWxvZ0NhbmNsZTogZnVuY3Rpb24gaGFuZGxlSW1wcm92ZURpYWxvZ0NhbmNsZShmb3JtTmFtZSkgewogICAgICB0aGlzLmltcHJvdmVEaWFsb2cgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDmn6XnnIvnlLPor7fkv6Hmga8KICAgIGhhbmRsZURldGFpbDogZnVuY3Rpb24gaGFuZGxlRGV0YWlsKGluZGV4LCByb3cpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGluZGV4LCByb3cpOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGdldE9ubGluZU1haWxMaXN0RGV0YWlsKHJvdy5leHByZXNzTWFuYWdlbWVudElkKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgICBfdGhpczYubGl0aWdhbnRUYWJsZURhdGEgPSBbXTsKICAgICAgICAgICAgICAgIF90aGlzNi5hcHBsaWNhbnRTaG93ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfnlLPor7fkv6Hmga8nLCByZXMpOwogICAgICAgICAgICAgICAgcmVzLmRhdGEgJiYgX3RoaXM2LmxpdGlnYW50VGFibGVEYXRhLnB1c2gocmVzLmRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBhcHBsaWNhbnRTaG93Q2hhbmdlOiBmdW5jdGlvbiBhcHBsaWNhbnRTaG93Q2hhbmdlKHYpIHsKICAgICAgdGhpcy5hcHBsaWNhbnRTaG93ID0gdjsKICAgIH0sCiAgICAvLyDlkbzlj6vlv6vpgJIKICAgIGhhbmRsZUNhbGxNYWlsOiBmdW5jdGlvbiBoYW5kbGVDYWxsTWFpbChmb3JtTmFtZTEsIGZvcm1OYW1lMikgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmlzQ2FsbCkgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuivt+WLv+mHjeWkjeaPkOS6pCIpOwogICAgICB0aGlzLmlzQ2FsbCA9IHRydWU7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWUxXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQxKSB7CiAgICAgICAgLy8g5pS25Lu25Lq6CiAgICAgICAgaWYgKHZhbGlkMSkgewogICAgICAgICAgaWYgKF90aGlzNy5yZWNlaXZlclRhYmxlRGF0YS5sZW5ndGggPT0gMCkgewogICAgICAgICAgICBfdGhpczcuaXNDYWxsID0gZmFsc2U7CiAgICAgICAgICAgIHJldHVybiBfdGhpczcuJG1lc3NhZ2UuZXJyb3IoIuaUtuS7tuS6uuS/oeaBr+S4jeiDveS4uuepuiIpOyAvLyDlr4Tku7bkuroKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczcuJHJlZnNbZm9ybU5hbWUyXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQyKSB7CiAgICAgICAgICAgIC8vIOW/q+mAkuS/oeaBrwogICAgICAgICAgICBpZiAodmFsaWQyKSB7CiAgICAgICAgICAgICAgX3RoaXM3LmNhbGxFeHByZXNzKCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgX3RoaXM3LiRtZXNzYWdlLmVycm9yKCLor7floavlhpnlv6vpgJLkv6Hmga/vvIEiKTsKCiAgICAgICAgICAgICAgX3RoaXM3LmlzQ2FsbCA9IGZhbHNlOwogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzNy4kbWVzc2FnZS5lcnJvcigi6K+35aGr5YaZ5pS25Lu25Lq65L+h5oGv77yBIik7CgogICAgICAgICAgX3RoaXM3LmlzQ2FsbCA9IGZhbHNlOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5ZG85Y+r5b+r6YCSCiAgICBjYWxsRXhwcmVzczogZnVuY3Rpb24gY2FsbEV4cHJlc3MoKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHZhciBkYXRhLCByZXM7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkYXRhID0gW107CgogICAgICAgICAgICAgICAgX3RoaXM4LnJlY2VpdmVyVGFibGVEYXRhLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgdmFyIHJlY2VpdmVyT2JqID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBfdGhpczguZXhwcmVzc0luZm8pLCB7fSwgewogICAgICAgICAgICAgICAgICAgIHNlbmRlck5hbWU6IF90aGlzOC5zZW5kZXJEYXRhLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgc2VuZGVyQ29tcGFueTogX3RoaXM4LnNlbmRlckRhdGEuY29tcGFueU5hbWUsCiAgICAgICAgICAgICAgICAgICAgc2VuZGVyVGVsOiBfdGhpczguc2VuZGVyRGF0YS5maXhlZExpbmUsCiAgICAgICAgICAgICAgICAgICAgc2VuZGVyTW9iaWxlOiBfdGhpczguc2VuZGVyRGF0YS5jb250YWN0TnVtYmVyLAogICAgICAgICAgICAgICAgICAgIHNlbmRlclJlZ2lvbkNvZGU6IF90aGlzOC5zZW5kZXJEYXRhLnJlZ2lvbkNvZGUsCiAgICAgICAgICAgICAgICAgICAgc2VuZGVyQWRkcmVzczogX3RoaXM4LnNlbmRlckRhdGEuYWRkcmVzcywKICAgICAgICAgICAgICAgICAgICBzZW5kZXJEZXRhaWxBZGRyZXNzOiBfdGhpczguc2VuZGVyRGF0YS5kZXRhaWxBZGRyZXNzLAogICAgICAgICAgICAgICAgICAgIGV4cHJlc3NTZW5kZXJSZWNlaXZlcklkOiBlLmlkIHx8ICIiLAogICAgICAgICAgICAgICAgICAgIGV4cHJlc3NNYW5hZ2VtZW50SWQ6IGUuZXhwcmVzc01hbmFnZW1lbnRJZCB8fCAiIiwKICAgICAgICAgICAgICAgICAgICByZWNlaXZlck5hbWU6IGUucmVjZWl2ZU5hbWUsCiAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXJDb21wYW55OiBlLnJlY2VpdmVDb21wYW55LAogICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyVGVsOiBlLnJlY2VpdmVGaXhlZExpbmUsCiAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXJNb2JpbGU6IGUucmVjZWl2ZU1vYmlsZSwKICAgICAgICAgICAgICAgICAgICByZWNlaXZlclJlZ2lvbkNvZGU6IGUucmVjZWl2ZVJlZ2lvbkNvZGUsCiAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXJBZGRyZXNzOiBlLnJlY2VpdmVBZGRyZXNzLAogICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyRGV0YWlsQWRkcmVzczogZS5yZWNlaXZlRGV0YWlsQWRkcmVzcwogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIGRhdGEucHVzaChyZWNlaXZlck9iaik7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5LiL5Y2V5pWw5o2uLS0+JywgZGF0YSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NhbGxFeHByZXNzKGRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLlkbzlj6vlv6vpgJItLT4iLCByZXMpOwoKICAgICAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczguJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXMubXNnIHx8ICLlkbzlj6vlpLHotKXvvIzor7fnqI3lkI7lho3or5XvvIEiCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBfdGhpczguaXNDYWxsID0gZmFsc2U7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBfdGhpczguJHJvdXRlci5yZXBsYWNlKHsKICAgICAgICAgICAgICAgICAgbmFtZTogImNoZWNrb3V0U3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgICAgICAgZnJvbTogX3RoaXM4LmZyb20sCiAgICAgICAgICAgICAgICAgICAgZnJvbU9yZGVySWQ6IF90aGlzOC5mcm9tT3JkZXJJZCwKICAgICAgICAgICAgICAgICAgICBpZHM6IHJlcy5kYXRhLmpvaW4oKSwKICAgICAgICAgICAgICAgICAgICBkZXRhaWxJZDogX3RoaXM4LiRyb3V0ZS5xdWVyeS5kZXRhaWxJZAogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBfdGhpczguJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLlkbzlj6vlv6vpgJLmiJDlip/vvIEiCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIOS7iuWkqeaYjuWkqeWQjuWkqeaXtumXtOWIh+aNogogICAgaGFuZGxlVGltZUNoYW5nZTogZnVuY3Rpb24gaGFuZGxlVGltZUNoYW5nZShlKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKGUpOwogICAgICB0aGlzLiRyZWZzWyJleHByZXNzSW5mb0Zvcm0iXS5jbGVhclZhbGlkYXRlKCJzZWxlY3RUaW1lIik7CiAgICAgIHRoaXMuZ2VuZXJhdG9yRGF5KGUpOwoKICAgICAgaWYgKGUgPT0gMiB8fCBlID09IDMpIHsKICAgICAgICB0aGlzLmV4cHJlc3NJbmZvLmV4cHJlc3NDb21wYW55ID09ICJzaHVuZmVuZyIgPyB0aGlzLmdlbmVyYXRvclRpbWUoOCwgMjAsIDcsICI6MzAiKSA6IHRoaXMuZ2VuZXJhdG9yVGltZSg5LCAxOCwgNyk7IC8vIOWwj+S6juW8gOWni+aXtumXtOeUn+aIkOWFqOmDqOWPr+mAiQoKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuZXhwcmVzc0luZm8uZXhwcmVzc0NvbXBhbnkgPT0gInNodW5mZW5nIiA/IHRoaXMuZ2VuZXJhdG9yVGltZSg4LCAyMCwgIiIsICI6MzAiKSA6IHRoaXMuZ2VuZXJhdG9yVGltZSg5LCAxOCk7IC8vIOS7juW9k+WJjeaXtumXtOW8gOWni+eUn+aIkAogICAgICAvLyBsZXQgcmVzID0gdGhpcy5nZW5lcmF0b3JUaW1lKDksIDE4KSAvLyDkuK3lm73pgq7mlL/ml7bpl7QKICAgICAgLy8gbGV0IHJlcyA9IHRoaXMuZ2VuZXJhdG9yVGltZSg4LCAyMCwgIjozMCIpCS8vIOmhuuS4sOaXtumXtAogICAgICAvLyBjb25zb2xlLmxvZyhyZXMpOwogICAgfSwKICAgIC8vIOeCueWHu+mAieaLqeaXtumXtAogICAgaGFuZGxlU2VsZWN0VGltZTogZnVuY3Rpb24gaGFuZGxlU2VsZWN0VGltZShlLCBpbmRleCkgewogICAgICAvLyBjb25zb2xlLmxvZyhlLnRhcmdldC5pbm5lckhUTUwsIGluZGV4LCB0aGlzLmV4cHJlc3NUaW1lTWFyaykKICAgICAgdGhpcy50aW1lU2VsZWN0SW5kZXggPSBpbmRleDsKICAgICAgdGhpcy5wcmVNYXJrID0gdGhpcy5leHByZXNzVGltZU1hcms7CiAgICAgIHZhciB0ZXh0ID0gZS50YXJnZXQuaW5uZXJIVE1MOwoKICAgICAgaWYgKHRleHQgPT0gIuS7iuaXpeaXoOWPr+mihOe6puaXtumXtCIpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0ZXh0ID09ICLkuIDlsI/ml7blhoUiKSB7CiAgICAgICAgdGhpcy5leHByZXNzSW5mby5zZWxlY3RUaW1lID0gdGV4dDsKICAgICAgICB0aGlzLmV4cHJlc3NJbmZvLnJhbmdlID0gdGhpcy5leHByZXNzSW5mby5leHByZXNzQ29tcGFueSA9PSAic2h1bmZlbmciID8gIiIuY29uY2F0KG1vbWVudCgpLmFkZCgxLCAnaG91cicpLmZvcm1hdCgnTU0tREQgSEg6MzAnKSwgIiBcdTgxRjMgIikuY29uY2F0KG1vbWVudCgpLmFkZCgyLCAnaG91cicpLmZvcm1hdCgnTU0tREQgSEg6MzAnKSkgOiAiIi5jb25jYXQobW9tZW50KCkuYWRkKDEsICdob3VyJykuZm9ybWF0KCdNTS1ERCBISDowMCcpLCAiIFx1ODFGMyAiKS5jb25jYXQobW9tZW50KCkuYWRkKDIsICdob3VyJykuZm9ybWF0KCdNTS1ERCBISDowMCcpKTsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmV4cHJlc3NJbmZvLnJhbmdlKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuZXhwcmVzc0luZm8uc2VsZWN0VGltZSA9ICIiLmNvbmNhdChtb21lbnQoKS5mb3JtYXQoJ1lZWVknKSwgIi0iKS5jb25jYXQodGhpcy5zZWxlY3REYXksICIgIikuY29uY2F0KHRleHQpOwogICAgICB2YXIgdGV4dEFyciA9IHRleHQuc3BsaXQoJy0nKTsKICAgICAgdGhpcy5leHByZXNzSW5mby5yYW5nZSA9ICIiLmNvbmNhdCh0aGlzLnNlbGVjdERheSwgIiAiKS5jb25jYXQodGV4dEFyclswXSwgIiBcdTgxRjMgIikuY29uY2F0KHRoaXMuc2VsZWN0RGF5LCAiICIpLmNvbmNhdCh0ZXh0QXJyWzFdKTsKICAgICAgY29uc29sZS5sb2codGhpcy5leHByZXNzSW5mby5yYW5nZSk7CiAgICAgIHRoaXMucG9wb3ZlclZpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDnlJ/miJDml6XmnJ8KICAgIGdlbmVyYXRvckRheTogZnVuY3Rpb24gZ2VuZXJhdG9yRGF5KGUpIHsKICAgICAgdGhpcy5zZWxlY3REYXkgPSBlID09IDEgPyBtb21lbnQobmV3IERhdGUoKSkuZm9ybWF0KCJNTS1ERCIpIDogZSA9PSAyID8gbW9tZW50KG5ldyBEYXRlKCkpLmFkZCgxLCAnZGF5cycpLmZvcm1hdCgiTU0tREQiKSA6IG1vbWVudChuZXcgRGF0ZSgpKS5hZGQoMiwgJ2RheXMnKS5mb3JtYXQoIk1NLUREIik7CiAgICB9LAogICAgLy8g55Sf5oiQ5pe26Ze05q61CiAgICBnZW5lcmF0b3JUaW1lOiBmdW5jdGlvbiBnZW5lcmF0b3JUaW1lKHN0YXJ0LCBlbmQsIGhvdXJOb3cpIHsKICAgICAgdmFyIHJhbmdlID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiAiOjAwIjsKICAgICAgdmFyIHN0YXJ0VGltZTsKICAgICAgdmFyIGVuZFRpbWU7CiAgICAgIHZhciB0aW1lTGlzdCA9IFtdOwogICAgICBob3VyTm93ID0gaG91ck5vdyB8fCBtb21lbnQoKS5mb3JtYXQoIkgiKTsKCiAgICAgIGlmIChob3VyTm93IDwgZW5kIC0gMSAmJiBob3VyTm93ID49IHN0YXJ0KSB7CiAgICAgICAgc3RhcnQgPSBOdW1iZXIoaG91ck5vdykgKyAxOwogICAgICAgIHRpbWVMaXN0LnB1c2goIuS4gOWwj+aXtuWGhSIpOwogICAgICB9CgogICAgICBpZiAoaG91ck5vdyA+IGVuZCAtIDIpIHsKICAgICAgICB0aW1lTGlzdC5wdXNoKCLku4rml6Xml6Dlj6/pooTnuqbml7bpl7QiKTsKICAgICAgICB0aGlzLnRpbWVMaXN0ID0gdGltZUxpc3Q7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCAyNDsgaSsrKSB7CiAgICAgICAgaWYgKGkgPCBlbmQpIHsKICAgICAgICAgIHN0YXJ0VGltZSA9IGkgPCAxMCA/ICIwIiArIGkgKyByYW5nZSA6IGkgKyByYW5nZTsKICAgICAgICAgIGVuZFRpbWUgPSBpICsgMSArIHJhbmdlOwogICAgICAgICAgdGltZUxpc3QucHVzaChzdGFydFRpbWUgKyAiLSIgKyBlbmRUaW1lKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMudGltZUxpc3QgPSB0aW1lTGlzdDsKICAgIH0sCiAgICAvLyDngrnlh7vlnLDlnYDnsL8KICAgIGhhbmRsZUFkZHJlc3NCb29rU2hvdzogZnVuY3Rpb24gaGFuZGxlQWRkcmVzc0Jvb2tTaG93KCkgewogICAgICB0aGlzLmFkZHJlc3NEaWFsb2cgPSB0cnVlOwogICAgfSwKICAgIC8vIOWcsOWdgOewv+mAieS4reWcsOWdgOWIh+aNogogICAgaGFuZGxlQ3VycmVudFNlbGVjdDogZnVuY3Rpb24gaGFuZGxlQ3VycmVudFNlbGVjdCh2YWwpIHsKICAgICAgY29uc29sZS5sb2coJ+W9k+WJjemAieS4reihjCcsIHZhbCk7CiAgICAgIHRoaXMuc2VsZWN0QWRkcmVzcyA9IHZhbDsKICAgIH0sCiAgICAvLyDlnLDlnYDnsL/pgInkuK3lnLDlnYDnoa7lrpoKICAgIGhhbmRsZUFkZHJlZGRDb21maXJtOiBmdW5jdGlvbiBoYW5kbGVBZGRyZWRkQ29tZmlybSgpIHsKICAgICAgdGhpcy5hZGRyZXNzRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuc2VuZGVyRGF0YSA9IF9vYmplY3RTcHJlYWQoe30sIHRoaXMuc2VsZWN0QWRkcmVzcyk7CiAgICAgIHRoaXMuZ2V0Q2l0eVBhcmVudCgpOwogICAgfSwKICAgIC8vIOW8ueeql+S/ruaUueWcsOWdgAogICAgaGFuZGxlQWRkcmVzc0VkaXQ6IGZ1bmN0aW9uIGhhbmRsZUFkZHJlc3NFZGl0KGluZGV4LCByb3cpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgICB0aGlzLmFkZHJlc3NJbm5lclZpc2libGUgPSB0cnVlOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM5LiRyZWZzWyJhZGRyZXNzSW5uZXJGb3JtIl0uY2xlYXJWYWxpZGF0ZSgpOwogICAgICB9KTsKICAgICAgdGhpcy5hZGRyZXNzSW5uZXJGb3JtRGF0YSA9IF9vYmplY3RTcHJlYWQoe30sIHJvdyk7CiAgICAgIHRoaXMuZ2V0Q2l0eVBhcmVudElubmVyKHJvdyk7CiAgICB9LAogICAgLy8g6YeM5bGC5by556qX5L+u5pS55Zyw5Z2A56Gu6K6kCiAgICBoYW5kbGVJbm5lckRpYWxvZ0NvbWZpcm06IGZ1bmN0aW9uIGhhbmRsZUlubmVyRGlhbG9nQ29tZmlybShmb3JtTmFtZSkgewogICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CgogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZSggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSh2YWxpZCkgewogICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHZhbGlkKTsKCiAgICAgICAgICAgICAgICAgIGlmICghdmFsaWQpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIF90aGlzMTAuYWRkcmVzc0lubmVyVmlzaWJsZSA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgX3RoaXMxMC51cGRhdGVBZGRyZXNzKCk7CgogICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIHN1Ym1pdCEhJyk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgICAgfSkpOwoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MikgewogICAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSgpKTsKICAgIH0sCiAgICAvLyDph4zlsYLlvLnnqpfkv67mlLnlnLDlnYDlj5bmtogKICAgIGhhbmRsZUlubmVyRGlhbG9nQ2FuY2xlOiBmdW5jdGlvbiBoYW5kbGVJbm5lckRpYWxvZ0NhbmNsZShmb3JtTmFtZSkgewogICAgICB0aGlzLmFkZHJlc3NJbm5lclZpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDlnLDlnYDnsL/liIbpobXliIfmjaIKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMuYWRkcmVzc1BhZ2luYXRpb24ucGFnZU51bSA9IHZhbDsKICAgICAgdGhpcy5nZXRBZGRyZXNzTGlzdCgpOwogICAgfSwKICAgIC8vIOS/ruaUueWcsOWdgOivt+axggogICAgdXBkYXRlQWRkcmVzczogZnVuY3Rpb24gdXBkYXRlQWRkcmVzcygpIHsKICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpczExLmFkZHJlc3NJbm5lckZvcm1EYXRhKTsKICAgICAgICAgICAgICAgIF90aGlzMTEuYWRkcmVzc0lubmVyRm9ybURhdGEuY3JlYXRlVGltZSA9ICIiOwogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUV4cHJlc3NBZGRyZXNzKF90aGlzMTEuYWRkcmVzc0lubmVyRm9ybURhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDYuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfkv67mlLnlnLDlnYAnLCByZXMpOwoKICAgICAgICAgICAgICAgIF90aGlzMTEuZmVlZEJhY2socmVzLCAwKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g6I635Y+W5pS25Lu25Lq65Zyw5Z2A5YiX6KGoCiAgICBnZXRSZWNlaXZlckFkZHJlc3M6IGZ1bmN0aW9uIGdldFJlY2VpdmVyQWRkcmVzcygpIHsKICAgICAgdmFyIF90aGlzMTIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0UmVjZWl2ZXJBZGRyZXNzTGlzdChfdGhpczEyLiRyb3V0ZS5xdWVyeS5pZHMpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDcuc2VudDsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfmlLbku7bkurrlnLDlnYDliJfooagnLCByZXMpOwogICAgICAgICAgICAgICAgX3RoaXMxMi5yZWNlaXZlclRhYmxlRGF0YSA9IHJlcy5kYXRhOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTcpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyDlnLDlnYDnsL/liKDpmaTlnLDlnYAKICAgIGhhbmRsZUFkZHJlc3NEZWxldGU6IGZ1bmN0aW9uIGhhbmRsZUFkZHJlc3NEZWxldGUoaW5kZXgsIHJvdykgewogICAgICB2YXIgX3RoaXMxMyA9IHRoaXM7CgogICAgICB0aGlzLiRjb25maXJtKCc8cCBzdHlsZT0iY29sb3I6cmVkOyI+56Gu5a6a5Yig6Zmk5Zyw5Z2A5ZCX77yfPC9wPicsICfmk43kvZzmj5DnpLonLCB7CiAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBkZWxldGVFeHByZXNzQWRkcmVzcyhyb3cuaWQpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDguc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfliKDpmaTlnLDlnYAnLCByZXMpOwoKICAgICAgICAgICAgICAgIF90aGlzMTMuZmVlZEJhY2socmVzLCAxKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU4KTsKICAgICAgfSkpKS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMxMy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5pON5L2c77yBJwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDkv67mlLnmiJbliKDpmaTlnLDlnYDlj43ppogKICAgIGZlZWRCYWNrOiBmdW5jdGlvbiBmZWVkQmFjayhyZXMsIGZsYWcpIHsKICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAoZmxhZyA9PSAwID8gIuS/ruaUuSIgOiAi5Yig6ZmkIikgKyAi5Zyw5Z2A5oiQ5Yqf77yBIiwKICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIgogICAgICAgIH0pOwogICAgICAgIHRoaXMuZ2V0QWRkcmVzc0xpc3QoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgIG1lc3NhZ2U6IChmbGFnID09IDAgPyAi5L+u5pS5IiA6ICLliKDpmaQiKSArICLlnLDlnYDlpLHotKXvvIzor7fnqI3lkI7lho3or5XvvIEiLAogICAgICAgIHR5cGU6ICJlcnJvciIKICAgICAgfSk7CiAgICB9LAogICAgLy8g6I635Y+W5Zyw5Z2A57C/5YiX6KGoCiAgICBnZXRBZGRyZXNzTGlzdDogZnVuY3Rpb24gZ2V0QWRkcmVzc0xpc3QoKSB7CiAgICAgIHZhciBfdGhpczE0ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOSgpIHsKICAgICAgICB2YXIgZGF0YSwgcmVzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0OSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZGF0YSA9IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICAgICAgICBuYW1lT3JNb2JpbGU6ICIiCiAgICAgICAgICAgICAgICB9LCBfdGhpczE0LmFkZHJlc3NQYWdpbmF0aW9uKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRBZGRyZXNzQm9va0xpc3QoZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0OS5zZW50OwogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ+WcsOWdgOWIl+ihqCcsIHJlcyk7CiAgICAgICAgICAgICAgICBfdGhpczE0LmFkZHJlc3NMaXN0ID0gcmVzLnN1Y2Nlc3MgPyByZXMuZGF0YS5saXN0IDogIiI7CiAgICAgICAgICAgICAgICBfdGhpczE0LmFkZHJlc3NUb3RhbCA9IHJlcy5zdWNjZXNzID8gcmVzLmRhdGEudG90YWwgOiAiIjsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU5KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g55yB5biC5Yy66YCJ5oupCiAgICBoYW5kbGVDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZShhcnIpIHsKICAgICAgY29uc29sZS5sb2coIuecgeW4guWMuumAieaLqSIpOwoKICAgICAgaWYgKGFycikgewogICAgICAgIHRoaXMuc2VuZGVyRGF0YS5hZGRyZXNzID0gdGhpcy4kcmVmcy5jaXR5Q2FzY2FkZXIuZ2V0Q2hlY2tlZE5vZGVzKClbMF0ucGF0aExhYmVscy5qb2luKCIiKTsKICAgICAgICB0aGlzLnNlbmRlckRhdGEucmVnaW9uQ29kZSA9IF90b0NvbnN1bWFibGVBcnJheShhcnIpLnBvcCgpOwogICAgICB9CiAgICB9LAogICAgLy8g6YeM5bGC5by556qX55yB5biC5Yy66YCJ5oupCiAgICBoYW5kbGVDaGFuZ2VJbm5lcjogZnVuY3Rpb24gaGFuZGxlQ2hhbmdlSW5uZXIoYXJyKSB7CiAgICAgIGlmIChhcnIpIHsKICAgICAgICB0aGlzLmFkZHJlc3NJbm5lckZvcm1EYXRhLmFkZHJlc3MgPSB0aGlzLiRyZWZzLmNpdHlDYXNjYWRlci5nZXRDaGVja2VkTm9kZXMoKVswXS5wYXRoTGFiZWxzLmpvaW4oIiIpOwogICAgICAgIHRoaXMuYWRkcmVzc0lubmVyRm9ybURhdGEucmVnaW9uQ29kZSA9IF90b0NvbnN1bWFibGVBcnJheShhcnIpLnBvcCgpOwogICAgICB9CiAgICB9LAogICAgLy8g5a6M5ZaE5L+u5pS55by556qX55yB5biC5Yy66YCJ5oupCiAgICBoYW5kbGVDaGFuZ2VSZWNlaXZlckltcHJvdmU6IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZVJlY2VpdmVySW1wcm92ZShhcnIpIHsKICAgICAgaWYgKGFycikgewogICAgICAgIHRoaXMucmVjZWl2ZXJJbXByb3ZlRGlhbG9nRGF0YS5yZWNlaXZlQWRkcmVzcyA9IHRoaXMuJHJlZnMuY2l0eUNhc2NhZGVyLmdldENoZWNrZWROb2RlcygpWzBdLnBhdGhMYWJlbHMuam9pbigiIik7CiAgICAgICAgdGhpcy5yZWNlaXZlckltcHJvdmVEaWFsb2dEYXRhLnJlY2VpdmVSZWdpb25Db2RlID0gX3RvQ29uc3VtYWJsZUFycmF5KGFycikucG9wKCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDln47luILkuInnuqfogZTliqjmlbDmja4KICAgIGdldENpdHlEYXRhOiBmdW5jdGlvbiBnZXRDaXR5RGF0YSgpIHsKICAgICAgdmFyIF90aGlzMTUgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMCgpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEwJChfY29udGV4dDEwKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Q2l0eVJlZ2lvblRyZWUoKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQxMC5zZW50OwogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGFbMF0uY2hpbGRyZW4pOwogICAgICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSBfdGhpczE1LmNpdHlMaXN0ID0gcmVzLmRhdGFbMF0uY2hpbGRyZW47CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTEwKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g6I635Y+W5Z+O5biC54i257qnCiAgICBnZXRDaXR5UGFyZW50OiBmdW5jdGlvbiBnZXRDaXR5UGFyZW50KHJlZ2lvbkNvZGUpIHsKICAgICAgdmFyIF90aGlzMTYgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMSgpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTExJChfY29udGV4dDExKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Q2l0eVBhcmVudHMoewogICAgICAgICAgICAgICAgICBjb2RlOiByZWdpb25Db2RlIHx8IF90aGlzMTYuc2VsZWN0QWRkcmVzcy5yZWdpb25Db2RlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQxMS5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WfjuW4gueItue6pycsIHJlcyk7CgogICAgICAgICAgICAgICAgX3RoaXMxNi4kcmVmc1sic2VuZGVyRGF0YUZvcm0iXS5jbGVhclZhbGlkYXRlKCk7CgogICAgICAgICAgICAgICAgcmVzLnN1Y2Nlc3MgJiYgT2JqZWN0LmFzc2lnbihfdGhpczE2LnNlbmRlckRhdGEsIHsKICAgICAgICAgICAgICAgICAgcmVnaW9uQ29kZUFycjogcmVzLmRhdGEuc2xpY2UoMSkKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmIChyZWdpb25Db2RlKSB7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuJHJlZnMuY2l0eUNhc2NhZGVyLnByZXNlbnRUZXh0LCB0aGlzLiRyZWZzLmNpdHlDYXNjYWRlci5pbnB1dFZhbHVlKTsKICAgICAgICAgICAgICAgICAgICBfdGhpczE2LnNlbmRlckRhdGEuYWRkcmVzcyA9IF90aGlzMTYuJHJlZnMuY2l0eUNhc2NhZGVyLnByZXNlbnRUZXh0LnJlcGxhY2UoLyBcLyAvZywgIiIpOwogICAgICAgICAgICAgICAgICB9LCA1MDApOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIOmHjOWxguW8ueeql+iOt+WPluWfjuW4gueItue6pwogICAgZ2V0Q2l0eVBhcmVudElubmVyOiBmdW5jdGlvbiBnZXRDaXR5UGFyZW50SW5uZXIocm93KSB7CiAgICAgIHZhciBfdGhpczE3ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTIoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMiQoX2NvbnRleHQxMikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGdldENpdHlQYXJlbnRzKHsKICAgICAgICAgICAgICAgICAgY29kZTogcm93LnJlZ2lvbkNvZGUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDEyLnNlbnQ7CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn5Z+O5biC54i257qnJywgcmVzKQogICAgICAgICAgICAgICAgcmVzLnN1Y2Nlc3MgJiYgX3RoaXMxNy4kc2V0KF90aGlzMTcuYWRkcmVzc0lubmVyRm9ybURhdGEsICJyZWdpb25Db2RlQXJyIiwgcmVzLmRhdGEuc2xpY2UoMSkpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIOWujOWWhOS/ruaUueiOt+WPluWfjuW4gueItue6pwogICAgZ2V0Q2l0eVBhcmVudEltcHJvdmVEaWFsb2c6IGZ1bmN0aW9uIGdldENpdHlQYXJlbnRJbXByb3ZlRGlhbG9nKHJvdykgewogICAgICB2YXIgX3RoaXMxOCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEzKCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTMkKF9jb250ZXh0MTMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMy5wcmV2ID0gX2NvbnRleHQxMy5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRDaXR5UGFyZW50cyh7CiAgICAgICAgICAgICAgICAgIGNvZGU6IHJvdy5yZWNlaXZlUmVnaW9uQ29kZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0MTMuc2VudDsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfln47luILniLbnuqcnLCByZXMpCiAgICAgICAgICAgICAgICByZXMuc3VjY2VzcyAmJiBfdGhpczE4LiRzZXQoX3RoaXMxOC5yZWNlaXZlckltcHJvdmVEaWFsb2dEYXRhLCAicmVjZWl2ZVJlZ2lvbkNvZGVBcnIiLCByZXMuZGF0YS5zbGljZSgxKSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTEzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g6L+U5ZueCiAgICBnb0JhY2s6IGZ1bmN0aW9uIGdvQmFjaygpIHsKICAgICAgd2luZG93Lmhpc3RvcnkuZ28oLTEpOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgICJhZGRyZXNzRGlhbG9nIjogZnVuY3Rpb24gYWRkcmVzc0RpYWxvZygpIHsKICAgICAgaWYgKCF0aGlzLmFkZHJlc3NEaWFsb2cpIHsKICAgICAgICB0aGlzLnNlbGVjdEFkZHJlc3MgPSAnJzsKICAgICAgICB0aGlzLmdldEFkZHJlc3NMaXN0KCk7CiAgICAgIH0KICAgIH0sCiAgICAic2VuZGVyRGF0YS5jb250YWN0TnVtYmVyIjogZnVuY3Rpb24gc2VuZGVyRGF0YUNvbnRhY3ROdW1iZXIoKSB7CiAgICAgIHRoaXMuJHJlZnNbInNlbmRlckRhdGFGb3JtIl0uY2xlYXJWYWxpZGF0ZSgiZml4ZWRMaW5lIik7CiAgICB9LAogICAgInNlbmRlckRhdGEuZml4ZWRMaW5lIjogZnVuY3Rpb24gc2VuZGVyRGF0YUZpeGVkTGluZSgpIHsKICAgICAgdGhpcy4kcmVmc1sic2VuZGVyRGF0YUZvcm0iXS5jbGVhclZhbGlkYXRlKCJjb250YWN0TnVtYmVyIik7CiAgICB9LAogICAgImFkZHJlc3NJbm5lckZvcm1EYXRhLmNvbnRhY3ROdW1iZXIiOiBmdW5jdGlvbiBhZGRyZXNzSW5uZXJGb3JtRGF0YUNvbnRhY3ROdW1iZXIoKSB7CiAgICAgIHRoaXMuJHJlZnNbImFkZHJlc3NJbm5lckZvcm0iXSAmJiB0aGlzLiRyZWZzWyJhZGRyZXNzSW5uZXJGb3JtIl0uY2xlYXJWYWxpZGF0ZSgiZml4ZWRMaW5lIik7CiAgICB9LAogICAgImFkZHJlc3NJbm5lckZvcm1EYXRhLmZpeGVkTGluZSI6IGZ1bmN0aW9uIGFkZHJlc3NJbm5lckZvcm1EYXRhRml4ZWRMaW5lKCkgewogICAgICB0aGlzLiRyZWZzWyJhZGRyZXNzSW5uZXJGb3JtIl0gJiYgdGhpcy4kcmVmc1siYWRkcmVzc0lubmVyRm9ybSJdLmNsZWFyVmFsaWRhdGUoImNvbnRhY3ROdW1iZXIiKTsKICAgIH0sCiAgICAicmVjZWl2ZXJJbXByb3ZlRGlhbG9nRGF0YS5yZWNlaXZlTW9iaWxlIjogZnVuY3Rpb24gcmVjZWl2ZXJJbXByb3ZlRGlhbG9nRGF0YVJlY2VpdmVNb2JpbGUoKSB7CiAgICAgIHRoaXMuJHJlZnNbInJlY2VpdmVySW1wcm92ZUZvcm0iXSAmJiB0aGlzLiRyZWZzWyJyZWNlaXZlckltcHJvdmVGb3JtIl0uY2xlYXJWYWxpZGF0ZSgicmVjZWl2ZUZpeGVkTGluZSIpOwogICAgfSwKICAgICJyZWNlaXZlckltcHJvdmVEaWFsb2dEYXRhLnJlY2VpdmVGaXhlZExpbmUiOiBmdW5jdGlvbiByZWNlaXZlckltcHJvdmVEaWFsb2dEYXRhUmVjZWl2ZUZpeGVkTGluZSgpIHsKICAgICAgdGhpcy4kcmVmc1sicmVjZWl2ZXJJbXByb3ZlRm9ybSJdICYmIHRoaXMuJHJlZnNbInJlY2VpdmVySW1wcm92ZUZvcm0iXS5jbGVhclZhbGlkYXRlKCJyZWNlaXZlTW9iaWxlIik7CiAgICB9CiAgfQp9Ow=="},null]}