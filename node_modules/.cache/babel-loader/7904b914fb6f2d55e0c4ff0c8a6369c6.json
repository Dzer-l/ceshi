{"remainingRequest":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/thread-loader/dist/cjs.js!/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/home/jenkins_data/workspace/页面-公证处后台/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jenkins_data/workspace/页面-公证处后台/src/views/mailManage/callMail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jenkins_data/workspace/页面-公证处后台/src/views/mailManage/callMail.vue","mtime":1634724784710},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9CgpmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09ICJzdHJpbmciKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gIk9iamVjdCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09ICJNYXAiIHx8IG4gPT09ICJTZXQiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09ICJBcmd1bWVudHMiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmICh0eXBlb2YgU3ltYm9sICE9PSAidW5kZWZpbmVkIiAmJiBpdGVyW1N5bWJvbC5pdGVyYXRvcl0gIT0gbnVsbCB8fCBpdGVyWyJAQGl0ZXJhdG9yIl0gIT0gbnVsbCkgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KGFycik7IH0KCmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfQoKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUvamVua2luc19kYXRhL3dvcmtzcGFjZS9cdTk4NzVcdTk3NjItXHU1MTZDXHU4QkMxXHU1OTA0XHU1NDBFXHU1M0YwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvciI7CgpmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7IHRyeSB7IHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsgfSBjYXRjaCAoZXJyb3IpIHsgcmVqZWN0KGVycm9yKTsgcmV0dXJuOyB9IGlmIChpbmZvLmRvbmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0gZWxzZSB7IFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTsgfSB9CgpmdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyB2YXIgc2VsZiA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTsgZnVuY3Rpb24gX25leHQodmFsdWUpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAibmV4dCIsIHZhbHVlKTsgfSBmdW5jdGlvbiBfdGhyb3coZXJyKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgInRocm93IiwgZXJyKTsgfSBfbmV4dCh1bmRlZmluZWQpOyB9KTsgfTsgfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgeyBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IH0ga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBnZXRDaXR5UmVnaW9uVHJlZSwgZ2V0Q2l0eVBhcmVudHMsIGdldEFkZHJlc3NCb29rTGlzdCwgdXBkYXRlRXhwcmVzc0FkZHJlc3MsIGRlbGV0ZUV4cHJlc3NBZGRyZXNzIH0gZnJvbSAnLi4vLi4vYXBpL2FkZHJlc3NCb29rJzsKaW1wb3J0IHsgY2FsbEV4cHJlc3MgYXMgX2NhbGxFeHByZXNzIH0gZnJvbSAnLi4vLi4vYXBpL21haWxNYW5hZ2UnOwppbXBvcnQgeyBhZGRyZXNzRm9ybVJ1bGVzLCByZWNlaXZlckltcHJvdmVGb3JtUnVsZXMsIGV4cHJlc3NJbmZvRm9ybVJ1bGVzLCB2YWxpZFBob25lQ29tcHV0ZWQsIHZhbGlkRml4bGluZUNvbXB1dGVkIH0gZnJvbSAnLi4vLi4vdXRpbHMvdmFsaWRhdGUnOwoKdmFyIG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudCcpOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkb3NzaWVyTnVtOiAnJywKICAgICAgc2VuZGVyRGF0YTogewogICAgICAgIC8vIOWvhOS7tuS6uuS/oeaBrwogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGNvbXBhbnlOYW1lOiAnJywKICAgICAgICBjb250YWN0TnVtYmVyOiAnJywKICAgICAgICBmaXhlZExpbmU6ICcnLAogICAgICAgIGRldGFpbEFkZHJlc3M6ICcnLAogICAgICAgIGFkZHJlc3M6ICcnLAogICAgICAgIHJlZ2lvbkNvZGU6ICcnLAogICAgICAgIHJlZ2lvbkNvZGVBcnI6IFtdCiAgICAgIH0sCiAgICAgIHJlY2VpdmVyVGFibGVEYXRhOiBbXSwKICAgICAgLy8g5pS25Lu25Lq65YiX6KGo5L+h5oGvKOWkmuS4qikKICAgICAgcmVjZWl2ZXJGb3JtRGF0YTogewogICAgICAgIC8vIOaUtuS7tuS6uuWIl+ihqOS/oeaBryjljZXkuKopCiAgICAgICAgcmVjZWl2ZU5hbWU6ICcnLAogICAgICAgIHJlY2VpdmVNb2JpbGU6ICcnLAogICAgICAgIHJlY2VpdmVGaXhlZExpbmU6ICcnLAogICAgICAgIHJlY2VpdmVDb21wYW55OiAnJywKICAgICAgICByZWNlaXZlQWRkcmVzczogJycsCiAgICAgICAgcmVjZWl2ZURldGFpbEFkZHJlc3M6ICcnLAogICAgICAgIHJlY2VpdmVSZWdpb25Db2RlOiAnJywKICAgICAgICByZWNlaXZlUmVnaW9uQ29kZUFycjogW10KICAgICAgfSwKICAgICAgLy8g5Zyw5Z2AYnUKICAgICAgYWRkcmVzc0RpYWxvZzogZmFsc2UsCiAgICAgIHJlY2VpdmVyQWRkcmVzc0RpYWxvZzogZmFsc2UsCiAgICAgIGFkZHJlc3NJbm5lclZpc2libGU6IGZhbHNlLAogICAgICBhZGRyZXNzTGlzdDogW10sCiAgICAgIC8vIOWcsOWdgGJ15YiX6KGoCiAgICAgIGFkZHJlc3NQYWdpbmF0aW9uOiB7CiAgICAgICAgLy8g5Zyw5Z2AYnXliIbpobUKICAgICAgICBwYWdlTnVtOiAxLAogICAgICAgIHBhZ2VTaXplOiA4CiAgICAgIH0sCiAgICAgIGFkZHJlc3NUb3RhbDogNTAsCiAgICAgIHNlbGVjdEFkZHJlc3M6ICcnLAogICAgICAvLyDpgInkuK3nmoTlnLDlnYAKICAgICAgc2VsZWN0TWFueUFkZHJlc3M6IFtdLAogICAgICB3aG9DbGljazogJycsCiAgICAgIC8vIOeCueeahOaYr+WvhOS7tui/mOaYr+aUtuS7tuagh+iusAogICAgICAvLyDlhoXlsYLlvLnnqpfmlbDmja4KICAgICAgYWRkcmVzc0lubmVyRm9ybURhdGE6IHsKICAgICAgICBuYW1lOiAnJywKICAgICAgICBjb250YWN0TnVtYmVyOiAnJywKICAgICAgICBmaXhlZExpbmU6ICcnLAogICAgICAgIGNvbXBhbnlOYW1lOiAnJywKICAgICAgICBkZXRhaWxBZGRyZXNzOiAnJywKICAgICAgICByZWdpb25Db2RlOiAnJywKICAgICAgICByZWdpb25Db2RlQXJyOiBbXQogICAgICB9LAogICAgICBhZGRyZXNzRm9ybVJ1bGVzOiBhZGRyZXNzRm9ybVJ1bGVzLAogICAgICAvLyDlhoXlsYLlvLnnqpcgLyDlr4Tku7bkurrooajljZUg5qCh6aqMCiAgICAgIC8vIOWujOWWhOS/ruaUueW8ueeql+aVsOaNrgogICAgICBpbXByb3ZlRGlhbG9nOiBmYWxzZSwKICAgICAgcmVjZWl2ZXJJbXByb3ZlRGlhbG9nRGF0YTogewogICAgICAgIHJlY2VpdmVOYW1lOiAnJywKICAgICAgICByZWNlaXZlTW9iaWxlOiAnJywKICAgICAgICByZWNlaXZlRml4ZWRMaW5lOiAnJywKICAgICAgICByZWNlaXZlQ29tcGFueTogJycsCiAgICAgICAgcmVjZWl2ZUFkZHJlc3M6ICcnLAogICAgICAgIHJlY2VpdmVEZXRhaWxBZGRyZXNzOiAnJywKICAgICAgICByZWNlaXZlUmVnaW9uQ29kZTogJycsCiAgICAgICAgcmVjZWl2ZVJlZ2lvbkNvZGVBcnI6IFtdLAogICAgICAgIGlzTmV3OiB0cnVlCiAgICAgIH0sCiAgICAgIHJlY2VpdmVySW1wcm92ZUZvcm1SdWxlczogcmVjZWl2ZXJJbXByb3ZlRm9ybVJ1bGVzLAogICAgICAvLyDlrozlloTkv67mlLnlvLnnqpfmoKHpqowKICAgICAgY2l0eUxpc3Q6IFtdLAogICAgICAvLyDnnIHluILljLoKICAgICAgZXhwcmVzc1RpbWVNYXJrOiAxLAogICAgICAvLyDku4rlpKnmmI7lpKnlkI7lpKnmoIforrAKICAgICAgdGltZVNlbGVjdEluZGV4OiBudWxsLAogICAgICBwcmVNYXJrOiAiIiwKICAgICAgdGltZUxpc3Q6IFtdLAogICAgICAvLyDlv6vpgJLlj6/pgInml7bpl7TmrrUKICAgICAgc2VsZWN0VGltZTogJycsCiAgICAgIC8vIOW/q+mAkumAieaLqeeahOaXtumXtOautQogICAgICBzZWxlY3REYXk6ICcnLAogICAgICAvLyDlv6vpgJLpgInmi6nnmoTml6XmnJ8KICAgICAgZXhwcmVzc0luZm86IHsKICAgICAgICAvLyDlv6vpgJLmj5DkuqTooajljZUKICAgICAgICBleHByZXNzQ29tcGFueTogJycsCiAgICAgICAgZXhwcmVzc01ldGhvZDogJycsCiAgICAgICAgc2VsZWN0VGltZTogJycsCiAgICAgICAgcGF5TWV0aG9kOiAnJywKICAgICAgICBwYWNrYWdlQ2F0ZWdvcnk6ICcnLAogICAgICAgIHJlbWFyazogJycsCiAgICAgICAgcmFuZ2U6ICcnLAogICAgICAgIC8vIOaXtumXtOiMg+WbtAogICAgICAgIGV4cHJlc3NNZXRob2RTdHI6ICfkuIrpl6jlj5bku7YnCiAgICAgIH0sCiAgICAgIGV4cHJlc3NJbmZvRm9ybVJ1bGVzOiBleHByZXNzSW5mb0Zvcm1SdWxlcywKICAgICAgLy8g5b+r6YCS5o+Q5Lqk6KGo5Y2V5qCh6aqMCiAgICAgIGV4cHJlc3NDb21wYW55TGlzdDogJycsCiAgICAgIC8vIGV4cHJlc3NDb21wYW55TGlzdDogWwkvLyDlv6vpgJLlhazlj7gKICAgICAgLy8gCXsgbGFiZWw6ICLkuK3lm73pgq7mlL8iLCB2YWx1ZTogImVtcyIgfSwKICAgICAgLy8gCXsgbGFiZWw6ICLpobrkuLDpgJ/ov5AiLCB2YWx1ZTogInNodW5mZW5nIiB9LAogICAgICAvLyBdLAogICAgICBleHByZXNzTWV0aG9kTGlzdDogWy8vIOWPluS7tuaWueW8jwogICAgICB7CiAgICAgICAgbGFiZWw6ICflm7rlrprlnLDlnYDmj73mlLYnLAogICAgICAgIHZhbHVlOiAwCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogJ+mihOe6puS4iumXqOaPveaUticsCiAgICAgICAgdmFsdWU6IDEKICAgICAgfV0sCiAgICAgIHBheU1ldGhvZExpc3Q6IFsvLyDov5DotLnmlK/ku5jmlrnlvI8KICAgICAgewogICAgICAgIGxhYmVsOiAn5a+E5LuY5pyI57uTJywKICAgICAgICB2YWx1ZTogMQogICAgICB9LCB7CiAgICAgICAgbGFiZWw6ICfmlLbmlrnku5gnLAogICAgICAgIHZhbHVlOiAyCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogJ+esrOS4ieaWueS7mCcsCiAgICAgICAgdmFsdWU6IDMKICAgICAgfSwgewogICAgICAgIGxhYmVsOiAn5a+E5LuY546w57uTJywKICAgICAgICB2YWx1ZTogNAogICAgICB9XSwKICAgICAgcGFja2FnZUNhdGVnb3J5TGlzdDogWy8vIOeJqeWTgeexu+WeiwogICAgICB7CiAgICAgICAgbGFiZWw6ICfmlofku7YnLAogICAgICAgIHZhbHVlOiAwCiAgICAgIH1dLAogICAgICBvcmdJZDogJycsCiAgICAgIC8vIOWFrOivgeWkhGlkCiAgICAgIHBvcG92ZXJWaXNpYmxlOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBleHByZXNzTWV0aG9kQ29tOiBmdW5jdGlvbiBleHByZXNzTWV0aG9kQ29tKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy8g5Y+W5Lu25pa55byPCiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5leHByZXNzSW5mby5zZWxlY3RUaW1lID0gX3RoaXMuZXhwcmVzc0luZm8uZXhwcmVzc01ldGhvZCA9PT0gMCA/ICflrprml7bmj73mlLYnIDogJyc7CiAgICAgICAgX3RoaXMuZXhwcmVzc1RpbWVNYXJrID0gMTsKICAgICAgICBpZiAoX3RoaXMub3JnSWQgPT0gMSkgX3RoaXMuZXhwcmVzc0luZm8ucGF5TWV0aG9kID0gX3RoaXMuZXhwcmVzc0luZm8uZXhwcmVzc01ldGhvZCA9PT0gMSA/IDIgOiAxOyAvLyDlnarlsbHpooTnuqbkuIrpl6jmj73mlLYKCiAgICAgICAgaWYgKF90aGlzLm9yZ0lkID09IDEgJiYgX3RoaXMuZXhwcmVzc0luZm8uZXhwcmVzc01ldGhvZCA9PT0gMSAmJiBfdGhpcy5leHByZXNzSW5mby5leHByZXNzQ29tcGFueSA9PSAnc2h1bmZlbmcnKSBfdGhpcy5leHByZXNzSW5mby5wYXlNZXRob2QgPSAzOyAvLyDlnarlsbHpobrkuLDpu5jorqQKICAgICAgICAvLyBpZiAodGhpcy5vcmdJZCA9PSAyKSB0aGlzLmV4cHJlc3NJbmZvLnBheU1ldGhvZCA9IHRoaXMuZXhwcmVzc0luZm8uZXhwcmVzc01ldGhvZCA9PT0gMCA/IDIgOiAxICAvLyDluILlpIQKCiAgICAgICAgX3RoaXMuJHJlZnNbJ2V4cHJlc3NJbmZvRm9ybSddLmNsZWFyVmFsaWRhdGUoJ3NlbGVjdFRpbWUnKTsKICAgICAgfSk7CiAgICAgIHJldHVybiB0aGlzLmV4cHJlc3NJbmZvLmV4cHJlc3NNZXRob2Q7CiAgICB9LAogICAgZXhwcmVzc0NvbXBhbnlDb206IGZ1bmN0aW9uIGV4cHJlc3NDb21wYW55Q29tKCkgewogICAgICAvLyDlv6vpgJLlhazlj7gKICAgICAgdGhpcy5leHByZXNzSW5mby5leHByZXNzTWV0aG9kID0gdGhpcy5leHByZXNzSW5mby5leHByZXNzQ29tcGFueSA9PSAnc2h1bmZlbmcnID8gMSA6IDA7IC8vIOmhuuS4sOWPluS7tuaWueW8jwoKICAgICAgaWYgKHRoaXMuZXhwcmVzc0luZm8uZXhwcmVzc0NvbXBhbnkgPT0gJ3NodW5mZW5nJyAmJiB0aGlzLm9yZ0lkID09IDEpIHRoaXMuZXhwcmVzc0luZm8ucGF5TWV0aG9kID0gMTsgLy8g5Z2q5bGxICsg6aG65Liw5LuY5qy+5pa55byPCgogICAgICB0aGlzLmV4cHJlc3NJbmZvLmV4cHJlc3NDb21wYW55ID09ICdzaHVuZmVuZycgPyB0aGlzLmdlbmVyYXRvclRpbWUoOCwgMjAsICcnLCAnOjMwJykgOiB0aGlzLmdlbmVyYXRvclRpbWUoOSwgMTgpOwogICAgICByZXR1cm4gdGhpcy5leHByZXNzSW5mby5leHByZXNzQ29tcGFueSB8fCAnJzsKICAgIH0sCiAgICBwYXlNZXRob2RMaXN0Q29tOiBmdW5jdGlvbiBwYXlNZXRob2RMaXN0Q29tKCkgewogICAgICAvLyDov5DotLnmlK/ku5jmlrnlvI8KICAgICAgaWYgKHRoaXMuZXhwcmVzc0luZm8uZXhwcmVzc0NvbXBhbnkgPT0gJ2VtcycgfHwgdGhpcy5leHByZXNzSW5mby5leHByZXNzQ29tcGFueSA9PSAnJykgewogICAgICAgIHJldHVybiBbewogICAgICAgICAgbGFiZWw6ICflr4Tku5jnjrDnu5MnLAogICAgICAgICAgdmFsdWU6IDQKICAgICAgICB9LCB7CiAgICAgICAgICBsYWJlbDogJ+WvhOS7mOaciOe7kycsCiAgICAgICAgICB2YWx1ZTogMQogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiAn5Yiw5LuYJywKICAgICAgICAgIHZhbHVlOiAyCiAgICAgICAgfV07CiAgICAgIH0KCiAgICAgIHJldHVybiBbLy8g6aG65LiwCiAgICAgIHsKICAgICAgICBsYWJlbDogJ+WvhOS7mOeOsOe7kycsCiAgICAgICAgdmFsdWU6IDEKICAgICAgfSwgewogICAgICAgIGxhYmVsOiAn5a+E5LuY5pyI57uTJywKICAgICAgICB2YWx1ZTogMwogICAgICB9LCB7CiAgICAgICAgbGFiZWw6ICfliLDku5gnLAogICAgICAgIHZhbHVlOiAyCiAgICAgIH1dOwogICAgfSwKICAgIGV4cHJlc3NDb21wYW55TGlzdENvbTogewogICAgICAvLyDlv6vpgJLlhazlj7jliJfooagKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZXhwcmVzc0NvbXBhbnlMaXN0OwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHsKICAgICAgICByZXR1cm4gdmFsOwogICAgICB9CiAgICB9LAogICAgY29udGFjdE51bWJlclJ1bGVzOiBmdW5jdGlvbiBjb250YWN0TnVtYmVyUnVsZXMoKSB7CiAgICAgIC8vIOaJi+acuuWPt+mqjOivgQogICAgICByZXR1cm4gdmFsaWRQaG9uZUNvbXB1dGVkOwogICAgfSwKICAgIGZpeGVkTGluZVJ1bGVzOiBmdW5jdGlvbiBmaXhlZExpbmVSdWxlcygpIHsKICAgICAgLy8g5Zu66K+d6aqM6K+BCiAgICAgIHJldHVybiB2YWxpZEZpeGxpbmVDb21wdXRlZDsKICAgIH0sCiAgICBzZWxlY3RBY3RpdmU6IGZ1bmN0aW9uIHNlbGVjdEFjdGl2ZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gZnVuY3Rpb24gKGluZGV4LCBtYXJrKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coaW5kZXgsIG1hcmspOwogICAgICAgIGlmIChfdGhpczIudGltZVNlbGVjdEluZGV4ID09IGluZGV4ICYmIF90aGlzMi5wcmVNYXJrID09IG1hcmspIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9OwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgICdhZGRyZXNzRGlhbG9nJzogZnVuY3Rpb24gYWRkcmVzc0RpYWxvZygpIHsKICAgICAgaWYgKCF0aGlzLmFkZHJlc3NEaWFsb2cpIHsKICAgICAgICB0aGlzLnNlbGVjdEFkZHJlc3MgPSAnJzsKICAgICAgICB0aGlzLmdldEFkZHJlc3NMaXN0KCk7IC8vIHRoaXMuYWRkcmVzc1BhZ2luYXRpb24ucGFnZU51bSA9IDEKICAgICAgfQogICAgfSwKICAgICJyZWNlaXZlckFkZHJlc3NEaWFsb2ciOiBmdW5jdGlvbiByZWNlaXZlckFkZHJlc3NEaWFsb2coKSB7CiAgICAgIGlmICghdGhpcy5yZWNlaXZlckFkZHJlc3NEaWFsb2cpIHsKICAgICAgICB0aGlzLnNlbGVjdE1hbnlBZGRyZXNzID0gW107CiAgICAgICAgdGhpcy5nZXRBZGRyZXNzTGlzdCgpOyAvLyB0aGlzLmFkZHJlc3NQYWdpbmF0aW9uLnBhZ2VOdW0gPSAxCiAgICAgIH0KICAgIH0sCiAgICAiZXhwcmVzc0luZm8uZXhwcmVzc0NvbXBhbnkiOiBmdW5jdGlvbiBleHByZXNzSW5mb0V4cHJlc3NDb21wYW55KCkgewogICAgICB0aGlzLmV4cHJlc3NJbmZvLnNlbGVjdFRpbWUgPSAiIjsKICAgICAgdGhpcy5wcmVNYXJrID0gIiI7CiAgICAgIHRoaXMuZXhwcmVzc1RpbWVNYXJrID0gMTsKICAgIH0sCiAgICAnc2VuZGVyRGF0YS5jb250YWN0TnVtYmVyJzogZnVuY3Rpb24gc2VuZGVyRGF0YUNvbnRhY3ROdW1iZXIoKSB7CiAgICAgIHRoaXMuJHJlZnNbJ3NlbmRlckRhdGFGb3JtJ10uY2xlYXJWYWxpZGF0ZSgnZml4ZWRMaW5lJyk7CiAgICB9LAogICAgJ3NlbmRlckRhdGEuZml4ZWRMaW5lJzogZnVuY3Rpb24gc2VuZGVyRGF0YUZpeGVkTGluZSgpIHsKICAgICAgdGhpcy4kcmVmc1snc2VuZGVyRGF0YUZvcm0nXS5jbGVhclZhbGlkYXRlKCdjb250YWN0TnVtYmVyJyk7CiAgICB9LAogICAgJ2FkZHJlc3NJbm5lckZvcm1EYXRhLmNvbnRhY3ROdW1iZXInOiBmdW5jdGlvbiBhZGRyZXNzSW5uZXJGb3JtRGF0YUNvbnRhY3ROdW1iZXIoKSB7CiAgICAgIHRoaXMuJHJlZnNbJ2FkZHJlc3NJbm5lckZvcm0nXSAmJiB0aGlzLiRyZWZzWydhZGRyZXNzSW5uZXJGb3JtJ10uY2xlYXJWYWxpZGF0ZSgnZml4ZWRMaW5lJyk7CiAgICB9LAogICAgJ2FkZHJlc3NJbm5lckZvcm1EYXRhLmZpeGVkTGluZSc6IGZ1bmN0aW9uIGFkZHJlc3NJbm5lckZvcm1EYXRhRml4ZWRMaW5lKCkgewogICAgICB0aGlzLiRyZWZzWydhZGRyZXNzSW5uZXJGb3JtJ10gJiYgdGhpcy4kcmVmc1snYWRkcmVzc0lubmVyRm9ybSddLmNsZWFyVmFsaWRhdGUoJ2NvbnRhY3ROdW1iZXInKTsKICAgIH0sCiAgICAncmVjZWl2ZXJJbXByb3ZlRGlhbG9nRGF0YS5yZWNlaXZlTW9iaWxlJzogZnVuY3Rpb24gcmVjZWl2ZXJJbXByb3ZlRGlhbG9nRGF0YVJlY2VpdmVNb2JpbGUoKSB7CiAgICAgIHRoaXMuJHJlZnNbJ3JlY2VpdmVySW1wcm92ZUZvcm0nXSAmJiB0aGlzLiRyZWZzWydyZWNlaXZlckltcHJvdmVGb3JtJ10uY2xlYXJWYWxpZGF0ZSgncmVjZWl2ZUZpeGVkTGluZScpOwogICAgfSwKICAgICdyZWNlaXZlckltcHJvdmVEaWFsb2dEYXRhLnJlY2VpdmVGaXhlZExpbmUnOiBmdW5jdGlvbiByZWNlaXZlckltcHJvdmVEaWFsb2dEYXRhUmVjZWl2ZUZpeGVkTGluZSgpIHsKICAgICAgdGhpcy4kcmVmc1sncmVjZWl2ZXJJbXByb3ZlRm9ybSddICYmIHRoaXMuJHJlZnNbJ3JlY2VpdmVySW1wcm92ZUZvcm0nXS5jbGVhclZhbGlkYXRlKCdyZWNlaXZlTW9iaWxlJyk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgaWYgKHRoaXMub3JnSWQgPT0gMSkgewogICAgICAvLyDlnarlsbHkvJjlhYjlsZXnpLrpobrkuLAKICAgICAgdGhpcy5leHByZXNzSW5mby5leHByZXNzQ29tcGFueSA9ICJzaHVuZmVuZyI7IC8vIOaJk+W8gOWdquWxsem7mOiupOmhuuS4sAoKICAgICAgdGhpcy5leHByZXNzQ29tcGFueUxpc3QgPSBbewogICAgICAgIGxhYmVsOiAn5Lit5Zu96YKu5pS/JywKICAgICAgICB2YWx1ZTogJ2VtcycKICAgICAgfSwgewogICAgICAgIGxhYmVsOiAn6aG65Liw6YCf6L+QJywKICAgICAgICB2YWx1ZTogJ3NodW5mZW5nJwogICAgICB9XTsKICAgICAgdGhpcy5leHByZXNzSW5mby5wYWNrYWdlQ2F0ZWdvcnkgPSAwOwogICAgfQoKICAgIGlmICh0aGlzLm9yZ0lkID09IDIgfHwgdGhpcy5vcmdJZCA9PSAzKSB7CiAgICAgIC8vIG9yZ0lkIDMg5Lit5bGx6aaZ5bGx5YWs6K+B5aSECiAgICAgIHRoaXMuZXhwcmVzc0NvbXBhbnlMaXN0ID0gWy8vIOa3seWcs+WFrOivgeWkhOWPquacieS4reWbvemCruaUvwogICAgICB7CiAgICAgICAgbGFiZWw6ICfkuK3lm73pgq7mlL8nLAogICAgICAgIHZhbHVlOiAnZW1zJwogICAgICB9XTsKICAgICAgdGhpcy5leHByZXNzSW5mby5leHByZXNzQ29tcGFueSA9ICJlbXMiOwogICAgICB0aGlzLmV4cHJlc3NJbmZvLmV4cHJlc3NNZXRob2QgPSAwOwogICAgICB0aGlzLmV4cHJlc3NJbmZvLnBheU1ldGhvZCA9IDI7CiAgICAgIHRoaXMuZXhwcmVzc0luZm8ucGFja2FnZUNhdGVnb3J5ID0gMDsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICBjb25zb2xlLmxvZyh0aGlzLiRyb3V0ZSk7CiAgICB0aGlzLmdldENpdHlEYXRhKCk7CiAgICB0aGlzLmdldEFkZHJlc3NMaXN0KCk7CiAgICB0aGlzLmdlbmVyYXRvclRpbWUoOSwgMTgpOwogICAgdGhpcy5nZW5lcmF0b3JEYXkoMSk7CgogICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5yZWNlaXZlckFkZHJlc3NEYXRhKSB7CiAgICAgIHRoaXMuY29weUFkZHJlc3NVc2UodGhpcy4kcm91dGUucGFyYW1zLnJlY2VpdmVyQWRkcmVzc0RhdGEpOwogICAgfQoKICAgIHRoaXMub3JnSWQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdvcmdfaWQnKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOWcsOWdgOmZkOWItui+k+WFpQogICAgaGFuZGxlSW5wdXQ6IGZ1bmN0aW9uIGhhbmRsZUlucHV0KHZhbHVlLCBvYmplY3QsIGtleSkgewogICAgICBpZiAodmFsdWUubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXNbb2JqZWN0XVtrZXldID0gdmFsdWUucmVwbGFjZSgvW2B+IUAjJCVeJipfXCs9e318PD4/OiIsLi87J1xcW1xdwrd+77yBQCPvv6Ul4oCm4oCmJirvvIjvvInigJTigJTjgIrjgIvvvJ/vvJrigJzigJ3jgJDjgJHjgIHvvJvigJjigJnvvIzjgILjgIFdL2csICIiKS5yZXBsYWNlKC9ccy8sICIiKTsKICAgICAgfQogICAgfSwKICAgIC8vIOa3u+WKoOaUtuS7tuS6uuWcsOWdgAogICAgaGFuZGxlUmVjZWl2ZXJBZGRBZGRyZXNzOiBmdW5jdGlvbiBoYW5kbGVSZWNlaXZlckFkZEFkZHJlc3MoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMucmVjZWl2ZXJUYWJsZURhdGEubGVuZ3RoID49IDEwKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcigi5pyA5aSa5Y+v5re75YqgMTDkuKrlnLDlnYDvvIEiKTsKICAgICAgdGhpcy5yZWNlaXZlckltcHJvdmVEaWFsb2dEYXRhID0gewogICAgICAgIHJlY2VpdmVOYW1lOiAnJywKICAgICAgICByZWNlaXZlTW9iaWxlOiAnJywKICAgICAgICByZWNlaXZlRml4ZWRMaW5lOiAnJywKICAgICAgICByZWNlaXZlQ29tcGFueTogJycsCiAgICAgICAgcmVjZWl2ZUFkZHJlc3M6ICcnLAogICAgICAgIHJlY2VpdmVEZXRhaWxBZGRyZXNzOiAnJywKICAgICAgICByZWNlaXZlUmVnaW9uQ29kZTogJycsCiAgICAgICAgcmVjZWl2ZVJlZ2lvbkNvZGVBcnI6IFtdLAogICAgICAgIGlzTmV3OiB0cnVlCiAgICAgIH07CiAgICAgIHRoaXMuaW1wcm92ZURpYWxvZyA9IHRydWU7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczMuJHJlZnNbJ3JlY2VpdmVySW1wcm92ZUZvcm0nXS5jbGVhclZhbGlkYXRlKCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWujOWWhOS/ruaUuQogICAgaGFuZGxlRWRpdDogZnVuY3Rpb24gaGFuZGxlRWRpdChpbmRleCwgcm93KSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2coaW5kZXgsIHJvdyk7CiAgICAgIHRoaXMuaW1wcm92ZURpYWxvZyA9IHRydWU7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQuJHJlZnNbJ3JlY2VpdmVySW1wcm92ZUZvcm0nXS5jbGVhclZhbGlkYXRlKCk7CiAgICAgIH0pOwogICAgICB0aGlzLnJlY2VpdmVySW1wcm92ZURpYWxvZ0RhdGEgPSBfb2JqZWN0U3ByZWFkKHsKICAgICAgICBpbmRleDogaW5kZXgKICAgICAgfSwgcm93KTsKICAgICAgdGhpcy5nZXRDaXR5UGFyZW50SW1wcm92ZURpYWxvZyhyb3cpOwogICAgfSwKICAgIC8vIOWIoOmZpOaUtuS7tuS6ugogICAgaGFuZGxlRGVsZXRlOiBmdW5jdGlvbiBoYW5kbGVEZWxldGUoaW5kZXgsIHJvdykgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIC8vIGNvbnNvbGUubG9nKGluZGV4LCByb3cpOwogICAgICB0aGlzLiRjb25maXJtKCc8cCBzdHlsZT0iY29sb3I6cmVkOyI+56Gu5a6a5Yig6Zmk5pS25Lu25Lq677yfPC9wPicsICfmk43kvZzmj5DnpLonLCB7CiAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczUucmVjZWl2ZXJUYWJsZURhdGEuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNS4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5pON5L2c77yBJwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDlrozlloTkv67mlLnnoa7lrpoKICAgIGhhbmRsZUltcHJvdmVEaWFsb2dDb21maXJtOiBmdW5jdGlvbiBoYW5kbGVJbXByb3ZlRGlhbG9nQ29tZmlybShmb3JtTmFtZSkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgaWYgKHYpIHsKICAgICAgICAgIGlmIChfdGhpczYucmVjZWl2ZXJJbXByb3ZlRGlhbG9nRGF0YS5pc05ldykgewogICAgICAgICAgICBfdGhpczYucmVjZWl2ZXJJbXByb3ZlRGlhbG9nRGF0YS5pc05ldyA9IGZhbHNlOwogICAgICAgICAgICBfdGhpczYucmVjZWl2ZXJJbXByb3ZlRGlhbG9nRGF0YS5yZWNlaXZlTmFtZSAmJiBfdGhpczYucmVjZWl2ZXJUYWJsZURhdGEucHVzaChfdGhpczYucmVjZWl2ZXJJbXByb3ZlRGlhbG9nRGF0YSk7CiAgICAgICAgICAgIF90aGlzNi5pbXByb3ZlRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczYucmVjZWl2ZXJUYWJsZURhdGEuc3BsaWNlKF90aGlzNi5yZWNlaXZlckltcHJvdmVEaWFsb2dEYXRhLmluZGV4LCAxLCBfdGhpczYucmVjZWl2ZXJJbXByb3ZlRGlhbG9nRGF0YSk7CgogICAgICAgICAgX3RoaXM2LmltcHJvdmVEaWFsb2cgPSBmYWxzZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIHN1Ym1pdCEhJyk7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDlrozlloTkv67mlLnlj5bmtogKICAgIGhhbmRsZUltcHJvdmVEaWFsb2dDYW5jbGU6IGZ1bmN0aW9uIGhhbmRsZUltcHJvdmVEaWFsb2dDYW5jbGUoZm9ybU5hbWUpIHsKICAgICAgdGhpcy5pbXByb3ZlRGlhbG9nID0gZmFsc2U7CiAgICB9LAogICAgLy8g5ZG85Y+r5b+r6YCSCiAgICBoYW5kbGVDYWxsTWFpbDogZnVuY3Rpb24gaGFuZGxlQ2FsbE1haWwoZm9ybU5hbWUxLCBmb3JtTmFtZTIpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5pc0NhbGwpIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCLor7fli7/ph43lpI3mj5DkuqQiKTsKICAgICAgdGhpcy5pc0NhbGwgPSB0cnVlOwogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lMV0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkMSkgewogICAgICAgIC8vIOaUtuS7tuS6ugogICAgICAgIGlmICh2YWxpZDEpIHsKICAgICAgICAgIGlmIChfdGhpczcucmVjZWl2ZXJUYWJsZURhdGEubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgX3RoaXM3LmlzQ2FsbCA9IGZhbHNlOwogICAgICAgICAgICByZXR1cm4gX3RoaXM3LiRtZXNzYWdlLmVycm9yKCLmlLbku7bkurrkv6Hmga/kuI3og73kuLrnqboiKTsgLy8g5a+E5Lu25Lq6CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXM3LiRyZWZzW2Zvcm1OYW1lMl0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkMikgewogICAgICAgICAgICAvLyDlv6vpgJLkv6Hmga8KICAgICAgICAgICAgaWYgKHZhbGlkMikgewogICAgICAgICAgICAgIF90aGlzNy5jYWxsRXhwcmVzcygpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIF90aGlzNy4kbWVzc2FnZS5lcnJvcign6K+35aGr5YaZ5b+r6YCS5L+h5oGv77yBJyk7CgogICAgICAgICAgICAgIF90aGlzNy5pc0NhbGwgPSBmYWxzZTsKICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczcuJG1lc3NhZ2UuZXJyb3IoJ+ivt+Whq+WGmeaUtuS7tuS6uuS/oeaBr++8gScpOwoKICAgICAgICAgIF90aGlzNy5pc0NhbGwgPSBmYWxzZTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWRvOWPq+W/q+mAkgogICAgY2FsbEV4cHJlc3M6IGZ1bmN0aW9uIGNhbGxFeHByZXNzKCkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBkYXRhLCByZXM7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRhdGEgPSBbXTsKCiAgICAgICAgICAgICAgICBfdGhpczgucmVjZWl2ZXJUYWJsZURhdGEuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICB2YXIgcmVjZWl2ZXJPYmogPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIF90aGlzOC5leHByZXNzSW5mbyksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgLy8g5b+r6YCS5L+h5oGvCiAgICAgICAgICAgICAgICAgICAgZG9zc2llck51bTogX3RoaXM4LmRvc3NpZXJOdW0sCiAgICAgICAgICAgICAgICAgICAgLy8g5Y235a6X5Y+3CiAgICAgICAgICAgICAgICAgICAgc2VuZGVyTmFtZTogX3RoaXM4LnNlbmRlckRhdGEubmFtZSwKICAgICAgICAgICAgICAgICAgICAvLyDlj5Hku7bkurrkv6Hmga8KICAgICAgICAgICAgICAgICAgICBzZW5kZXJDb21wYW55OiBfdGhpczguc2VuZGVyRGF0YS5jb21wYW55TmFtZSwKICAgICAgICAgICAgICAgICAgICBzZW5kZXJUZWw6IF90aGlzOC5zZW5kZXJEYXRhLmZpeGVkTGluZSwKICAgICAgICAgICAgICAgICAgICBzZW5kZXJNb2JpbGU6IF90aGlzOC5zZW5kZXJEYXRhLmNvbnRhY3ROdW1iZXIsCiAgICAgICAgICAgICAgICAgICAgc2VuZGVyUmVnaW9uQ29kZTogX3RoaXM4LnNlbmRlckRhdGEucmVnaW9uQ29kZSwKICAgICAgICAgICAgICAgICAgICBzZW5kZXJBZGRyZXNzOiBfdGhpczguc2VuZGVyRGF0YS5hZGRyZXNzLAogICAgICAgICAgICAgICAgICAgIHNlbmRlckRldGFpbEFkZHJlc3M6IF90aGlzOC5zZW5kZXJEYXRhLmRldGFpbEFkZHJlc3MsCiAgICAgICAgICAgICAgICAgICAgLy8gZXhwcmVzc1NlbmRlclJlY2VpdmVySWQ6IGUuaWQgfHwgIiIsCS8vIOaUtuS7tuS6uuS/oeaBrwogICAgICAgICAgICAgICAgICAgIC8vIGV4cHJlc3NNYW5hZ2VtZW50SWQ6IGUuZXhwcmVzc01hbmFnZW1lbnRJZCB8fCAiIiwKICAgICAgICAgICAgICAgICAgICByZWNlaXZlck5hbWU6IGUucmVjZWl2ZU5hbWUsCiAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXJDb21wYW55OiBlLnJlY2VpdmVDb21wYW55LAogICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyVGVsOiBlLnJlY2VpdmVGaXhlZExpbmUsCiAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXJNb2JpbGU6IGUucmVjZWl2ZU1vYmlsZSwKICAgICAgICAgICAgICAgICAgICByZWNlaXZlclJlZ2lvbkNvZGU6IGUucmVjZWl2ZVJlZ2lvbkNvZGUsCiAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXJBZGRyZXNzOiBlLnJlY2VpdmVBZGRyZXNzLAogICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyRGV0YWlsQWRkcmVzczogZS5yZWNlaXZlRGV0YWlsQWRkcmVzcwogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIGRhdGEucHVzaChyZWNlaXZlck9iaik7CiAgICAgICAgICAgICAgICB9KTsgLy8gY29uc29sZS5sb2coZGF0YSk7CgoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jYWxsRXhwcmVzcyhkYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCflkbzlj6vlv6vpgJItLT4nLCByZXMpOwoKICAgICAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzOC4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2cgfHwgJ+WRvOWPq+Wksei0pe+8jOivt+eojeWQjuWGjeivle+8gScKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIF90aGlzOC5pc0NhbGwgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX3RoaXM4LiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgIG5hbWU6ICdjaGVja291dFN1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICAgICAgICAgIGZyb206ICJjYWxsTWFpbCIsCiAgICAgICAgICAgICAgICAgICAgaWRzOiByZXMuZGF0YS5qb2luKCkKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgX3RoaXM4LiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5ZG85Y+r5b+r6YCS5oiQ5Yqf77yBJwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g5LuK5aSp5piO5aSp5ZCO5aSp5pe26Ze05YiH5o2iCiAgICBoYW5kbGVUaW1lQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVUaW1lQ2hhbmdlKGUpIHsKICAgICAgLy8gY29uc29sZS5sb2coZSk7CiAgICAgIHRoaXMuJHJlZnNbJ2V4cHJlc3NJbmZvRm9ybSddLmNsZWFyVmFsaWRhdGUoJ3NlbGVjdFRpbWUnKTsKICAgICAgdGhpcy5nZW5lcmF0b3JEYXkoZSk7CgogICAgICBpZiAoZSA9PSAyIHx8IGUgPT0gMykgewogICAgICAgIHRoaXMuZXhwcmVzc0luZm8uZXhwcmVzc0NvbXBhbnkgPT0gJ3NodW5mZW5nJyA/IHRoaXMuZ2VuZXJhdG9yVGltZSg4LCAyMCwgNywgJzozMCcpIDogdGhpcy5nZW5lcmF0b3JUaW1lKDksIDE4LCA3KTsgLy8g5bCP5LqO5byA5aeL5pe26Ze055Sf5oiQ5YWo6YOo5Y+v6YCJCgogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5leHByZXNzSW5mby5leHByZXNzQ29tcGFueSA9PSAnc2h1bmZlbmcnID8gdGhpcy5nZW5lcmF0b3JUaW1lKDgsIDIwLCAnJywgJzozMCcpIDogdGhpcy5nZW5lcmF0b3JUaW1lKDksIDE4KTsgLy8g5LuO5b2T5YmN5pe26Ze05byA5aeL55Sf5oiQCiAgICAgIC8vIGxldCByZXMgPSB0aGlzLmdlbmVyYXRvclRpbWUoOSwgMTgpIC8vIOS4reWbvemCruaUv+aXtumXtAogICAgICAvLyBsZXQgcmVzID0gdGhpcy5nZW5lcmF0b3JUaW1lKDgsIDIwLCAiOjMwIikJLy8g6aG65Liw5pe26Ze0CiAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7CiAgICB9LAogICAgLy8g54K55Ye76YCJ5oup5pe26Ze0CiAgICBoYW5kbGVTZWxlY3RUaW1lOiBmdW5jdGlvbiBoYW5kbGVTZWxlY3RUaW1lKGUsIGluZGV4KSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKGUudGFyZ2V0LmlubmVySFRNTCwgaW5kZXgsIHRoaXMuZXhwcmVzc1RpbWVNYXJrKQogICAgICB0aGlzLnRpbWVTZWxlY3RJbmRleCA9IGluZGV4OwogICAgICB0aGlzLnByZU1hcmsgPSB0aGlzLmV4cHJlc3NUaW1lTWFyazsKICAgICAgdmFyIHRleHQgPSBlLnRhcmdldC5pbm5lckhUTUw7CgogICAgICBpZiAodGV4dCA9PSAn5LuK5pel5peg5Y+v6aKE57qm5pe26Ze0JykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRleHQgPT0gJ+S4gOWwj+aXtuWGhScpIHsKICAgICAgICB0aGlzLmV4cHJlc3NJbmZvLnNlbGVjdFRpbWUgPSB0ZXh0OwogICAgICAgIHRoaXMuZXhwcmVzc0luZm8ucmFuZ2UgPSB0aGlzLmV4cHJlc3NJbmZvLmV4cHJlc3NDb21wYW55ID09ICJzaHVuZmVuZyIgPyAiIi5jb25jYXQobW9tZW50KCkuYWRkKDEsICdob3VyJykuZm9ybWF0KCdNTS1ERCBISDozMCcpLCAiIFx1ODFGMyAiKS5jb25jYXQobW9tZW50KCkuYWRkKDIsICdob3VyJykuZm9ybWF0KCdNTS1ERCBISDozMCcpKSA6ICIiLmNvbmNhdChtb21lbnQoKS5hZGQoMSwgJ2hvdXInKS5mb3JtYXQoJ01NLUREIEhIOjAwJyksICIgXHU4MUYzICIpLmNvbmNhdChtb21lbnQoKS5hZGQoMiwgJ2hvdXInKS5mb3JtYXQoJ01NLUREIEhIOjAwJykpOwogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZXhwcmVzc0luZm8ucmFuZ2UpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5leHByZXNzSW5mby5zZWxlY3RUaW1lID0gIiIuY29uY2F0KG1vbWVudCgpLmZvcm1hdCgnWVlZWScpLCAiLSIpLmNvbmNhdCh0aGlzLnNlbGVjdERheSwgIiAiKS5jb25jYXQodGV4dCk7CiAgICAgIHZhciB0ZXh0QXJyID0gdGV4dC5zcGxpdCgnLScpOwogICAgICB0aGlzLmV4cHJlc3NJbmZvLnJhbmdlID0gIiIuY29uY2F0KHRoaXMuc2VsZWN0RGF5LCAiICIpLmNvbmNhdCh0ZXh0QXJyWzBdLCAiIFx1ODFGMyAiKS5jb25jYXQodGhpcy5zZWxlY3REYXksICIgIikuY29uY2F0KHRleHRBcnJbMV0pOwogICAgICBjb25zb2xlLmxvZyh0aGlzLmV4cHJlc3NJbmZvLnJhbmdlKTsKICAgICAgdGhpcy5wb3BvdmVyVmlzaWJsZSA9IGZhbHNlOwogICAgfSwKICAgIC8vIOeUn+aIkOaXpeacnwogICAgZ2VuZXJhdG9yRGF5OiBmdW5jdGlvbiBnZW5lcmF0b3JEYXkoZSkgewogICAgICB0aGlzLnNlbGVjdERheSA9IGUgPT0gMSA/IG1vbWVudChuZXcgRGF0ZSgpKS5mb3JtYXQoJ01NLUREJykgOiBlID09IDIgPyBtb21lbnQobmV3IERhdGUoKSkuYWRkKDEsICdkYXlzJykuZm9ybWF0KCdNTS1ERCcpIDogbW9tZW50KG5ldyBEYXRlKCkpLmFkZCgyLCAnZGF5cycpLmZvcm1hdCgnTU0tREQnKTsKICAgIH0sCiAgICAvLyDnlJ/miJDml7bpl7TmrrUKICAgIGdlbmVyYXRvclRpbWU6IGZ1bmN0aW9uIGdlbmVyYXRvclRpbWUoc3RhcnQsIGVuZCwgaG91ck5vdykgewogICAgICB2YXIgcmFuZ2UgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6ICc6MDAnOwogICAgICB2YXIgc3RhcnRUaW1lOwogICAgICB2YXIgZW5kVGltZTsKICAgICAgdmFyIHRpbWVMaXN0ID0gW107CiAgICAgIGhvdXJOb3cgPSBob3VyTm93IHx8IG1vbWVudCgpLmZvcm1hdCgnSCcpOwoKICAgICAgaWYgKGhvdXJOb3cgPCBlbmQgLSAxICYmIGhvdXJOb3cgPj0gc3RhcnQpIHsKICAgICAgICBzdGFydCA9IE51bWJlcihob3VyTm93KSArIDE7CiAgICAgICAgdGltZUxpc3QucHVzaCgn5LiA5bCP5pe25YaFJyk7CiAgICAgIH0KCiAgICAgIGlmIChob3VyTm93ID4gZW5kIC0gMikgewogICAgICAgIHRpbWVMaXN0LnB1c2goJ+S7iuaXpeaXoOWPr+mihOe6puaXtumXtCcpOwogICAgICAgIHRoaXMudGltZUxpc3QgPSB0aW1lTGlzdDsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IDI0OyBpKyspIHsKICAgICAgICBpZiAoaSA8IGVuZCkgewogICAgICAgICAgc3RhcnRUaW1lID0gaSA8IDEwID8gJzAnICsgaSArIHJhbmdlIDogaSArIHJhbmdlOwogICAgICAgICAgZW5kVGltZSA9IGkgKyAxICsgcmFuZ2U7CiAgICAgICAgICB0aW1lTGlzdC5wdXNoKHN0YXJ0VGltZSArICctJyArIGVuZFRpbWUpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy50aW1lTGlzdCA9IHRpbWVMaXN0OwogICAgfSwKICAgIC8vIOeCueWHu+WcsOWdgOewvwogICAgaGFuZGxlQWRkcmVzc0Jvb2tTaG93OiBmdW5jdGlvbiBoYW5kbGVBZGRyZXNzQm9va1Nob3cod2hvQ2xpY2spIHsKICAgICAgdGhpcy53aG9DbGljayA9IHdob0NsaWNrOwogICAgICB0aGlzLmFkZHJlc3NEaWFsb2cgPSB0cnVlOwogICAgfSwKICAgIC8vIOaOpeaUtuS6uuWcsOWdgOW8ueeqlwogICAgaGFuZGxlUmVjZWl2ZXJBZGRyZXNzQm9va1Nob3c6IGZ1bmN0aW9uIGhhbmRsZVJlY2VpdmVyQWRkcmVzc0Jvb2tTaG93KCkgewogICAgICBpZiAodGhpcy5yZWNlaXZlclRhYmxlRGF0YS5sZW5ndGggPj0gMTApIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCLmnIDlpJrlj6/mt7vliqAxMOS4quWcsOWdgO+8gSIpOwogICAgICB0aGlzLnJlY2VpdmVyQWRkcmVzc0RpYWxvZyA9IHRydWU7CiAgICB9LAogICAgLy8g5Zyw5Z2A57C/6YCJ5Lit5Zyw5Z2A5YiH5o2iCiAgICBoYW5kbGVDdXJyZW50U2VsZWN0OiBmdW5jdGlvbiBoYW5kbGVDdXJyZW50U2VsZWN0KHZhbCkgewogICAgICBjb25zb2xlLmxvZygn5b2T5YmN6YCJ5Lit6KGMJywgdmFsKTsKICAgICAgdGhpcy5zZWxlY3RBZGRyZXNzID0gdmFsOwogICAgfSwKICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZTogZnVuY3Rpb24gaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHNlbGVjdCkgewogICAgICBjb25zb2xlLmxvZyhzZWxlY3QpOwogICAgICB0aGlzLnNlbGVjdE1hbnlBZGRyZXNzID0gc2VsZWN0OwogICAgfSwKICAgIC8vIOWcsOWdgOewv+mAieS4reWcsOWdgOehruWumgogICAgaGFuZGxlQWRkcmVkZENvbWZpcm06IGZ1bmN0aW9uIGhhbmRsZUFkZHJlZGRDb21maXJtKCkgewogICAgICB0aGlzLmFkZHJlc3NEaWFsb2cgPSBmYWxzZTsKCiAgICAgIGlmICh0aGlzLndob0NsaWNrID09ICdzZW5kZXInKSB7CiAgICAgICAgdGhpcy5zZW5kZXJEYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnNlbGVjdEFkZHJlc3MpKTsKICAgICAgICB0aGlzLmdldENpdHlQYXJlbnQoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciByZWNlaXZlRGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5zZWxlY3RBZGRyZXNzKSk7CiAgICAgIHRoaXMucmVjZWl2ZXJUYWJsZURhdGEucHVzaCh7CiAgICAgICAgcmVjZWl2ZUFkZHJlc3M6IHJlY2VpdmVEYXRhLmFkZHJlc3MsCiAgICAgICAgcmVjZWl2ZUNvbXBhbnk6IHJlY2VpdmVEYXRhLmNvbXBhbnlOYW1lLAogICAgICAgIHJlY2VpdmVEZXRhaWxBZGRyZXNzOiByZWNlaXZlRGF0YS5kZXRhaWxBZGRyZXNzLAogICAgICAgIHJlY2VpdmVGaXhlZExpbmU6IHJlY2VpdmVEYXRhLmZpeGVkTGluZSwKICAgICAgICByZWNlaXZlTW9iaWxlOiByZWNlaXZlRGF0YS5jb250YWN0TnVtYmVyLAogICAgICAgIHJlY2VpdmVOYW1lOiByZWNlaXZlRGF0YS5uYW1lLAogICAgICAgIHJlY2VpdmVSZWdpb25Db2RlOiByZWNlaXZlRGF0YS5yZWdpb25Db2RlLAogICAgICAgIGlzTmV3OiByZWNlaXZlRGF0YS5pc05ldwogICAgICB9KTsKICAgIH0sCiAgICAvLyDlnLDlnYDnsL/pgInkuK3lnLDlnYDnoa7lrpoo5aSa6YCJKQogICAgaGFuZGxlTWFueUFkZHJlZGRDb21maXJtOiBmdW5jdGlvbiBoYW5kbGVNYW55QWRkcmVkZENvbWZpcm0oKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgdGhpcy5yZWNlaXZlckFkZHJlc3NEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy5zZWxlY3RNYW55QWRkcmVzcy5sZW5ndGggPiAwICYmIHRoaXMuc2VsZWN0TWFueUFkZHJlc3MuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHZhciByZWNlaXZlRGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoaXRlbSkpOwoKICAgICAgICBfdGhpczkucmVjZWl2ZXJUYWJsZURhdGEucHVzaCh7CiAgICAgICAgICByZWNlaXZlQWRkcmVzczogcmVjZWl2ZURhdGEuYWRkcmVzcywKICAgICAgICAgIHJlY2VpdmVDb21wYW55OiByZWNlaXZlRGF0YS5jb21wYW55TmFtZSwKICAgICAgICAgIHJlY2VpdmVEZXRhaWxBZGRyZXNzOiByZWNlaXZlRGF0YS5kZXRhaWxBZGRyZXNzLAogICAgICAgICAgcmVjZWl2ZUZpeGVkTGluZTogcmVjZWl2ZURhdGEuZml4ZWRMaW5lLAogICAgICAgICAgcmVjZWl2ZU1vYmlsZTogcmVjZWl2ZURhdGEuY29udGFjdE51bWJlciwKICAgICAgICAgIHJlY2VpdmVOYW1lOiByZWNlaXZlRGF0YS5uYW1lLAogICAgICAgICAgcmVjZWl2ZVJlZ2lvbkNvZGU6IHJlY2VpdmVEYXRhLnJlZ2lvbkNvZGUsCiAgICAgICAgICBpc05ldzogcmVjZWl2ZURhdGEuaXNOZXcKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5by556qX5L+u5pS55Zyw5Z2ACiAgICBoYW5kbGVBZGRyZXNzRWRpdDogZnVuY3Rpb24gaGFuZGxlQWRkcmVzc0VkaXQoaW5kZXgsIHJvdykgewogICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CgogICAgICBjb25zb2xlLmxvZyhyb3cpOwogICAgICB0aGlzLmFkZHJlc3NJbm5lclZpc2libGUgPSB0cnVlOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMxMC4kcmVmc1snYWRkcmVzc0lubmVyRm9ybSddLmNsZWFyVmFsaWRhdGUoKTsKICAgICAgfSk7CiAgICAgIHRoaXMuYWRkcmVzc0lubmVyRm9ybURhdGEgPSBfb2JqZWN0U3ByZWFkKHt9LCByb3cpOwogICAgICB0aGlzLmdldENpdHlQYXJlbnRJbm5lcihyb3cpOwogICAgfSwKICAgIC8vIOmHjOWxguW8ueeql+S/ruaUueWcsOWdgOehruiupAogICAgaGFuZGxlSW5uZXJEaWFsb2dDb21maXJtOiBmdW5jdGlvbiBoYW5kbGVJbm5lckRpYWxvZ0NvbWZpcm0oZm9ybU5hbWUpIHsKICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwoKICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUoIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMih2KSB7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgaWYgKCF2KSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBfdGhpczExLmFkZHJlc3NJbm5lclZpc2libGUgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMTEudXBkYXRlQWRkcmVzcygpOwoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBzdWJtaXQhIScpOwogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgZmFsc2UpOwoKICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCkpOwogICAgfSwKICAgIC8vIOmHjOWxguW8ueeql+S/ruaUueWcsOWdgOWPlua2iAogICAgaGFuZGxlSW5uZXJEaWFsb2dDYW5jbGU6IGZ1bmN0aW9uIGhhbmRsZUlubmVyRGlhbG9nQ2FuY2xlKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuYWRkcmVzc0lubmVyVmlzaWJsZSA9IGZhbHNlOwogICAgfSwKICAgIC8vIOWcsOWdgOewv+WIhumhteWIh+aNogogICAgaGFuZGxlQ3VycmVudENoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5hZGRyZXNzUGFnaW5hdGlvbi5wYWdlTnVtID0gdmFsOwogICAgICB0aGlzLmdldEFkZHJlc3NMaXN0KCk7CiAgICB9LAogICAgLy8g5L+u5pS55Zyw5Z2A6K+35rGCCiAgICB1cGRhdGVBZGRyZXNzOiBmdW5jdGlvbiB1cGRhdGVBZGRyZXNzKCkgewogICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzMTIuYWRkcmVzc0lubmVyRm9ybURhdGEpOwogICAgICAgICAgICAgICAgX3RoaXMxMi5hZGRyZXNzSW5uZXJGb3JtRGF0YS5jcmVhdGVUaW1lID0gJyc7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlRXhwcmVzc0FkZHJlc3MoX3RoaXMxMi5hZGRyZXNzSW5uZXJGb3JtRGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+S/ruaUueWcsOWdgCcsIHJlcyk7CgogICAgICAgICAgICAgICAgX3RoaXMxMi5mZWVkQmFjayhyZXMsIDApOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyDlnLDlnYDnsL/liKDpmaTlnLDlnYAKICAgIGhhbmRsZUFkZHJlc3NEZWxldGU6IGZ1bmN0aW9uIGhhbmRsZUFkZHJlc3NEZWxldGUoaW5kZXgsIHJvdykgewogICAgICB2YXIgX3RoaXMxMyA9IHRoaXM7CgogICAgICB0aGlzLiRjb25maXJtKCc8cCBzdHlsZT0iY29sb3I6cmVkOyI+56Gu5a6a5Yig6Zmk5Zyw5Z2A5ZCX77yfPC9wPicsICfmk43kvZzmj5DnpLonLCB7CiAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBkZWxldGVFeHByZXNzQWRkcmVzcyhyb3cuaWQpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfliKDpmaTlnLDlnYAnLCByZXMpOwoKICAgICAgICAgICAgICAgIF90aGlzMTMuZmVlZEJhY2socmVzLCAxKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpKS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMxMy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5pON5L2c77yBJwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDkv67mlLnmiJbliKDpmaTlnLDlnYDlj43ppogKICAgIGZlZWRCYWNrOiBmdW5jdGlvbiBmZWVkQmFjayhyZXMsIGZsYWcpIHsKICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAoZmxhZyA9PSAwID8gJ+S/ruaUuScgOiAn5Yig6ZmkJykgKyAn5Zyw5Z2A5oiQ5Yqf77yBJywKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgIH0pOwogICAgICAgIHRoaXMuZ2V0QWRkcmVzc0xpc3QoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgIG1lc3NhZ2U6IChmbGFnID09IDAgPyAn5L+u5pS5JyA6ICfliKDpmaQnKSArICflnLDlnYDlpLHotKXvvIzor7fnqI3lkI7lho3or5XvvIEnLAogICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgfSk7CiAgICB9LAogICAgLy8g6I635Y+W5Zyw5Z2A57C/5YiX6KGoCiAgICBnZXRBZGRyZXNzTGlzdDogZnVuY3Rpb24gZ2V0QWRkcmVzc0xpc3QoKSB7CiAgICAgIHZhciBfdGhpczE0ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgZGF0YSwgcmVzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZGF0YSA9IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICAgICAgICBuYW1lT3JNb2JpbGU6ICcnCiAgICAgICAgICAgICAgICB9LCBfdGhpczE0LmFkZHJlc3NQYWdpbmF0aW9uKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRBZGRyZXNzQm9va0xpc3QoZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ+WcsOWdgOWIl+ihqCcsIHJlcyk7CiAgICAgICAgICAgICAgICBfdGhpczE0LmFkZHJlc3NMaXN0ID0gcmVzLnN1Y2Nlc3MgPyByZXMuZGF0YS5saXN0IDogIiI7CiAgICAgICAgICAgICAgICBfdGhpczE0LmFkZHJlc3NUb3RhbCA9IHJlcy5zdWNjZXNzID8gcmVzLmRhdGEudG90YWwgOiAiIjsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g55yB5biC5Yy66YCJ5oupCiAgICBoYW5kbGVDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZShhcnIpIHsKICAgICAgaWYgKGFycikgewogICAgICAgIHRoaXMuc2VuZGVyRGF0YS5hZGRyZXNzID0gdGhpcy4kcmVmcy5zZW5kZXJDaXR5Q2FzY2FkZXIuZ2V0Q2hlY2tlZE5vZGVzKClbMF0ucGF0aExhYmVscy5qb2luKCcnKTsKICAgICAgICB0aGlzLnNlbmRlckRhdGEucmVnaW9uQ29kZSA9IF90b0NvbnN1bWFibGVBcnJheShhcnIpLnBvcCgpOwogICAgICB9CiAgICB9LAogICAgLy8g5pS25Lu25Lq655yB5biC5Yy66YCJ5oupKOWNleS4qikKICAgIGhhbmRsZUNoYW5nZVJlY2VpdmVyOiBmdW5jdGlvbiBoYW5kbGVDaGFuZ2VSZWNlaXZlcihhcnIpIHsKICAgICAgaWYgKGFycikgewogICAgICAgIHRoaXMucmVjZWl2ZXJGb3JtRGF0YS5yZWNlaXZlQWRkcmVzcyA9IHRoaXMuJHJlZnMucmVjZWl2ZXJDaXR5Q2FzY2FkZXIuZ2V0Q2hlY2tlZE5vZGVzKClbMF0ucGF0aExhYmVscy5qb2luKCcnKTsKICAgICAgICB0aGlzLnJlY2VpdmVyRm9ybURhdGEucmVjZWl2ZVJlZ2lvbkNvZGUgPSBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKS5wb3AoKTsKICAgICAgfQogICAgfSwKICAgIC8vIOmHjOWxguW8ueeql+ecgeW4guWMuumAieaLqQogICAgaGFuZGxlQ2hhbmdlSW5uZXI6IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZUlubmVyKGFycikgewogICAgICBpZiAoYXJyKSB7CiAgICAgICAgdGhpcy5hZGRyZXNzSW5uZXJGb3JtRGF0YS5hZGRyZXNzID0gdGhpcy4kcmVmcy5pbm5lckNpdHlDYXNjYWRlci5nZXRDaGVja2VkTm9kZXMoKVswXS5wYXRoTGFiZWxzLmpvaW4oJycpOwogICAgICAgIHRoaXMuYWRkcmVzc0lubmVyRm9ybURhdGEucmVnaW9uQ29kZSA9IF90b0NvbnN1bWFibGVBcnJheShhcnIpLnBvcCgpOwogICAgICB9CiAgICB9LAogICAgLy8g5a6M5ZaE5L+u5pS55by556qX55yB5biC5Yy66YCJ5oupCiAgICBoYW5kbGVDaGFuZ2VSZWNlaXZlckltcHJvdmU6IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZVJlY2VpdmVySW1wcm92ZShhcnIpIHsKICAgICAgaWYgKGFycikgewogICAgICAgIHRoaXMucmVjZWl2ZXJJbXByb3ZlRGlhbG9nRGF0YS5yZWNlaXZlQWRkcmVzcyA9IHRoaXMuJHJlZnMuaW1wcm92ZUNpdHlDYXNjYWRlci5nZXRDaGVja2VkTm9kZXMoKVswXS5wYXRoTGFiZWxzLmpvaW4oJycpOwogICAgICAgIHRoaXMucmVjZWl2ZXJJbXByb3ZlRGlhbG9nRGF0YS5yZWNlaXZlUmVnaW9uQ29kZSA9IF90b0NvbnN1bWFibGVBcnJheShhcnIpLnBvcCgpOwogICAgICB9CiAgICB9LAogICAgLy8g5Z+O5biC5LiJ57qn6IGU5Yqo5pWw5o2uCiAgICBnZXRDaXR5RGF0YTogZnVuY3Rpb24gZ2V0Q2l0eURhdGEoKSB7CiAgICAgIHZhciBfdGhpczE1ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNigpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGdldENpdHlSZWdpb25UcmVlKCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Ni5zZW50OwogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGFbMF0uY2hpbGRyZW4pOwogICAgICAgICAgICAgICAgX3RoaXMxNS5jaXR5TGlzdCA9IHJlcy5kYXRhWzBdLmNoaWxkcmVuOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyDojrflj5bln47luILniLbnuqcKICAgIGdldENpdHlQYXJlbnQ6IGZ1bmN0aW9uIGdldENpdHlQYXJlbnQoKSB7CiAgICAgIHZhciBfdGhpczE2ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNygpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGdldENpdHlQYXJlbnRzKHsKICAgICAgICAgICAgICAgICAgY29kZTogX3RoaXMxNi5zZWxlY3RBZGRyZXNzLnJlZ2lvbkNvZGUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDcuc2VudDsKCiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn5Z+O5biC54i257qnJywgcmVzKQogICAgICAgICAgICAgICAgX3RoaXMxNi4kcmVmc1snc2VuZGVyRGF0YUZvcm0nXS5jbGVhclZhbGlkYXRlKCk7CgogICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihfdGhpczE2LnNlbmRlckRhdGEsIHsKICAgICAgICAgICAgICAgICAgcmVnaW9uQ29kZUFycjogcmVzLmRhdGEuc2xpY2UoMSkKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTcpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyDph4zlsYLlvLnnqpfojrflj5bln47luILniLbnuqcKICAgIGdldENpdHlQYXJlbnRJbm5lcjogZnVuY3Rpb24gZ2V0Q2l0eVBhcmVudElubmVyKHJvdykgewogICAgICB2YXIgX3RoaXMxNyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRDaXR5UGFyZW50cyh7CiAgICAgICAgICAgICAgICAgIGNvZGU6IHJvdy5yZWdpb25Db2RlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ4LnNlbnQ7CgogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ+WfjuW4gueItue6pycsIHJlcykKICAgICAgICAgICAgICAgIF90aGlzMTcuJHNldChfdGhpczE3LmFkZHJlc3NJbm5lckZvcm1EYXRhLCAncmVnaW9uQ29kZUFycicsIHJlcy5kYXRhLnNsaWNlKDEpKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU4KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g5a6M5ZaE5L+u5pS56I635Y+W5Z+O5biC54i257qnCiAgICBnZXRDaXR5UGFyZW50SW1wcm92ZURpYWxvZzogZnVuY3Rpb24gZ2V0Q2l0eVBhcmVudEltcHJvdmVEaWFsb2cocm93KSB7CiAgICAgIHZhciBfdGhpczE4ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOSgpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0OSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGdldENpdHlQYXJlbnRzKHsKICAgICAgICAgICAgICAgICAgY29kZTogcm93LnJlY2VpdmVSZWdpb25Db2RlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ5LnNlbnQ7CgogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ+WfjuW4gueItue6pycsIHJlcykKICAgICAgICAgICAgICAgIF90aGlzMTguJHNldChfdGhpczE4LnJlY2VpdmVySW1wcm92ZURpYWxvZ0RhdGEsICdyZWNlaXZlUmVnaW9uQ29kZUFycicsIHJlcy5kYXRhLnNsaWNlKDEpKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU5KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g5aSN55So5Zyw5Z2A5L+h5oGvCiAgICBjb3B5QWRkcmVzc1VzZTogZnVuY3Rpb24gY29weUFkZHJlc3NVc2UoZGF0YSkgewogICAgICB2YXIgX3RoaXMxOSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTAkKF9jb250ZXh0MTApIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMxOS5zZW5kZXJEYXRhID0gewogICAgICAgICAgICAgICAgICAvLyDlpI3nlKjlr4Tku7bkuroKICAgICAgICAgICAgICAgICAgbmFtZTogZGF0YS5zZW5kZXJOYW1lLAogICAgICAgICAgICAgICAgICBjb21wYW55TmFtZTogZGF0YS5zZW5kZXJDb21wYW55LAogICAgICAgICAgICAgICAgICBjb250YWN0TnVtYmVyOiBkYXRhLnNlbmRlck1vYmlsZSwKICAgICAgICAgICAgICAgICAgZml4ZWRMaW5lOiBkYXRhLnNlbmRlckZpeGVkTGluZSwKICAgICAgICAgICAgICAgICAgZGV0YWlsQWRkcmVzczogZGF0YS5zZW5kZXJEZXRhaWxBZGRyZXNzLAogICAgICAgICAgICAgICAgICBhZGRyZXNzOiBkYXRhLnNlbmRlckFkZHJlc3MsCiAgICAgICAgICAgICAgICAgIHJlZ2lvbkNvZGU6IGRhdGEuc2VuZGVyUmVnaW9uQ29kZQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBfdGhpczE5LnJlY2VpdmVyVGFibGVEYXRhLnB1c2goewogICAgICAgICAgICAgICAgICAvLyDlpI3nlKjmlLbku7bkuroKICAgICAgICAgICAgICAgICAgcmVjZWl2ZU5hbWU6IGRhdGEucmVjZWl2ZU5hbWUsCiAgICAgICAgICAgICAgICAgIHJlY2VpdmVDb21wYW55OiBkYXRhLnJlY2VpdmVDb21wYW55LAogICAgICAgICAgICAgICAgICByZWNlaXZlRml4ZWRMaW5lOiBkYXRhLnJlY2VpdmVGaXhlZExpbmUsCiAgICAgICAgICAgICAgICAgIHJlY2VpdmVNb2JpbGU6IGRhdGEucmVjZWl2ZU1vYmlsZSwKICAgICAgICAgICAgICAgICAgcmVjZWl2ZVJlZ2lvbkNvZGU6IGRhdGEucmVjZWl2ZVJlZ2lvbkNvZGUsCiAgICAgICAgICAgICAgICAgIHJlY2VpdmVBZGRyZXNzOiBkYXRhLnJlY2VpdmVBZGRyZXNzLAogICAgICAgICAgICAgICAgICByZWNlaXZlRGV0YWlsQWRkcmVzczogZGF0YS5yZWNlaXZlRGV0YWlsQWRkcmVzcywKICAgICAgICAgICAgICAgICAgaXNOZXc6IGZhbHNlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIGdldENpdHlQYXJlbnRzKHsKICAgICAgICAgICAgICAgICAgY29kZTogZGF0YS5zZW5kZXJSZWdpb25Db2RlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQxMC5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WfjuW4gueItue6pycsIHJlcyk7CiAgICAgICAgICAgICAgICByZXMuc3VjY2VzcyAmJiBfdGhpczE5LiRzZXQoX3RoaXMxOS5zZW5kZXJEYXRhLCAicmVnaW9uQ29kZUFyciIsIHJlcy5kYXRhLnNsaWNlKDEpKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTApOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyDov5Tlm54KICAgIGdvQmFjazogZnVuY3Rpb24gZ29CYWNrKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ21haWxNYW5hZ2VMaXN0JwogICAgICB9KTsKICAgIH0KICB9Cn07"},null]}