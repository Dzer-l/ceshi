{"remainingRequest":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/thread-loader/dist/cjs.js!/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/home/jenkins_data/workspace/页面-公证处后台/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jenkins_data/workspace/页面-公证处后台/src/views/business/video.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jenkins_data/workspace/页面-公证处后台/src/views/business/video.vue","mtime":1634724784705},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0ID0gdHlwZW9mIFN5bWJvbCAhPT0gInVuZGVmaW5lZCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdIHx8IG9bIkBAaXRlcmF0b3IiXTsgaWYgKCFpdCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyB2YXIgRiA9IGZ1bmN0aW9uIEYoKSB7fTsgcmV0dXJuIHsgczogRiwgbjogZnVuY3Rpb24gbigpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfSwgZTogZnVuY3Rpb24gZShfZSkgeyB0aHJvdyBfZTsgfSwgZjogRiB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfSB2YXIgbm9ybWFsQ29tcGxldGlvbiA9IHRydWUsIGRpZEVyciA9IGZhbHNlLCBlcnI7IHJldHVybiB7IHM6IGZ1bmN0aW9uIHMoKSB7IGl0ID0gaXQuY2FsbChvKTsgfSwgbjogZnVuY3Rpb24gbigpIHsgdmFyIHN0ZXAgPSBpdC5uZXh0KCk7IG5vcm1hbENvbXBsZXRpb24gPSBzdGVwLmRvbmU7IHJldHVybiBzdGVwOyB9LCBlOiBmdW5jdGlvbiBlKF9lMikgeyBkaWRFcnIgPSB0cnVlOyBlcnIgPSBfZTI7IH0sIGY6IGZ1bmN0aW9uIGYoKSB7IHRyeSB7IGlmICghbm9ybWFsQ29tcGxldGlvbiAmJiBpdC5yZXR1cm4gIT0gbnVsbCkgaXQucmV0dXJuKCk7IH0gZmluYWxseSB7IGlmIChkaWRFcnIpIHRocm93IGVycjsgfSB9IH07IH0KCmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9CgpmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0KCmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gIi9ob21lL2plbmtpbnNfZGF0YS93b3Jrc3BhY2UvXHU5ODc1XHU5NzYyLVx1NTE2Q1x1OEJDMVx1NTkwNFx1NTQwRVx1NTNGMC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IiOwoKZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgeyB0cnkgeyB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7IHZhciB2YWx1ZSA9IGluZm8udmFsdWU7IH0gY2F0Y2ggKGVycm9yKSB7IHJlamVjdChlcnJvcik7IHJldHVybjsgfSBpZiAoaW5mby5kb25lKSB7IHJlc29sdmUodmFsdWUpOyB9IGVsc2UgeyBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7IH0gfQoKZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIHNlbGYgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzOyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7IGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgIm5leHQiLCB2YWx1ZSk7IH0gZnVuY3Rpb24gX3Rocm93KGVycikgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJ0aHJvdyIsIGVycik7IH0gX25leHQodW5kZWZpbmVkKTsgfSk7IH07IH0KCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCAqIGFzIGRlIGZyb20gJ0AvYXBpL2RlbGVnYXRlJzsKaW1wb3J0IFJ0Y0NsaWVudCBmcm9tICcuL3J0Yy1jbGllbnQnOwppbXBvcnQgKiBhcyBhcGkgZnJvbSAnQC9hcGkvZGVsZWdhdGUnOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBodG1sMmNhbnZhcyBmcm9tICdodG1sMmNhbnZhcyc7CmltcG9ydCB7IHNldCB9IGZyb20gJ2pzLWNvb2tpZSc7CnZhciB0aGF0ID0gbnVsbDsKdmFyIHdzID0gbnVsbDsgLy8gd2Vic29ja2V0Cgp2YXIgaGVhcnRCZWF0VGltZU91dCA9IG51bGw7IC8vIOW/g+i3swoKdmFyIGhlYXJ0ID0gJyc7IC8vIOW/g+i3s+WGheWuuQoKdmFyIGhlYXJ0QmVhdEZhaWxDb3VudCA9IDA7IC8vIOW/g+i3s+Wksei0peasoeaVsAoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBvcmRlcklkOiAnJywKICAgICAgcm9vbURhdGE6IHt9LAogICAgICBydGM6IG51bGwsCiAgICAgIGxvY2FsU3RyZWFtOiBudWxsLAogICAgICBjYW1lcmFzOiBudWxsLAogICAgICBzdGFydFJlY29yOiBmYWxzZSwKICAgICAgdGFza0lkOiAnJywKICAgICAgc3RlcExpc3Q6IFtdLAogICAgICBzaG93U3RlcDogZmFsc2UsCiAgICAgIHZpZGVvTGlzdDogW10sCiAgICAgIGVubGFyZ2VJZDogJycsCiAgICAgIGFkZHI6IG51bGwsCiAgICAgIHByb0xpc3Q6IFtdLAogICAgICBub25BZG1pbmlzdHJhdG9yTGlzdDogW10sCiAgICAgIGFjdGl2ZU5hbWU6ICdmaXJzdCcsCiAgICAgIG9yZGVyRmlsZUxpc3Q6IFtdIC8vIOaWh+S5puWIl+ihqAoKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgJ3J0Yy52aWRlb0xpc3QnOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoblZhbCwgb1ZhbCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgICAgdmFyIGluZGV4LCByZXM7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnd2F0Y2ggdmlkZW9MaXN0JywgblZhbCk7CiAgICAgICAgICAgICAgICAgIGluZGV4ID0gMDsKCiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIGlmICghKGluZGV4IDwgblZhbC5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBpZiAoIShfdGhpcy5wcm9MaXN0LmluZGV4T2YoblZhbFtpbmRleF0pIDwgMCAmJiBfdGhpcy5ub25BZG1pbmlzdHJhdG9yTGlzdC5pbmRleE9mKG5WYWxbaW5kZXhdKSA8IDApKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJGF4aW9zKCdvcmcvdXNlci10eXBlLXNpZ24nLCB7CiAgICAgICAgICAgICAgICAgICAgb3JkZXJJZDogX3RoaXMub3JkZXJJZCwKICAgICAgICAgICAgICAgICAgICBtb2JpbGU6IG5WYWxbaW5kZXhdCiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICAgIC8vIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgIGlmIChwYXJzZUludChyZXMuZGF0YSkgPT09IDIgJiYgX3RoaXMucHJvTGlzdC5pbmRleE9mKG5WYWxbaW5kZXhdKSA8IDApIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9MaXN0LnB1c2goblZhbFtpbmRleF0pOwogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnNlSW50KHJlcy5kYXRhKSA9PT0gMSAmJiBfdGhpcy5ub25BZG1pbmlzdHJhdG9yTGlzdC5pbmRleE9mKG5WYWxbaW5kZXhdKSA8IDApIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5ub25BZG1pbmlzdHJhdG9yTGlzdC5wdXNoKG5WYWxbaW5kZXhdKTsKICAgICAgICAgICAgICAgICAgfSAvLyB9KQoKCiAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgIGluZGV4Kys7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpcy5wcm9MaXN0LCBfdGhpcy5ub25BZG1pbmlzdHJhdG9yTGlzdC5pbmRleE9mKCcxODUwMzAwNDYxNycpLCAnLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0yMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0nKTsKICAgICAgICAgICAgICAgICAgX3RoaXMudmlkZW9MaXN0ID0gblZhbDsKCiAgICAgICAgICAgICAgICAgIF90aGlzLmdldEFkZHJzKCk7CgogICAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICB9KSkoKTsKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoYXQgPSB0aGlzOwogICAgVnVlLnByb3RvdHlwZS4kYWxlcnQoJ+ehruWumuW8gOWni+WQju+8jOivt+eCueWHu+W9leWItuW8gOWni+W9leWItuinhumike+8gScsICfmj5DnpLonKTsKICAgIHRoYXQub3JkZXJJZCA9IHRoYXQuJHJvdXRlLnF1ZXJ5Lm9yZGVySWQ7CiAgICB3aW5kb3cuc3dpdGNoRGV2aWNlID0gdGhhdC5zd2l0Y2hEZXZpY2U7IC8vIGNvbnNvbGUubG9nKHRoaXMuanVkZ2VXaG8oJzE3MzQ2NzAyODE5JyksJy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tJykKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLnVzZVJUQygpOwoKICAgIHdpbmRvdy5vbmJlZm9yZXVubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHdzKSB7CiAgICAgICAgd3MuY2xvc2UoKTsKICAgICAgICB3cyA9IG51bGw7CiAgICAgIH0KICAgIH07CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIHRoaXMuYmVmb3JldW5sb2FkSGFuZGxlcik7CgogICAgaWYgKHRoaXMucnRjICE9IG51bGwpIHsKICAgICAgdGhpcy5ydGMubGVhdmUoKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIG9uQ2xpY2tfY3V0Q29udGVudDogZnVuY3Rpb24gb25DbGlja19jdXRDb250ZW50KHN0cikgewogICAgICBpZiAoc3RyID09PSAnc2Vjb25kJykgewogICAgICAgIHRoaXMuZ2V0U2lnbkZpbGVMaXN0KCk7CiAgICAgIH0KCiAgICAgIHRoaXMuYWN0aXZlTmFtZSA9IHN0cjsKICAgIH0sCiAgICAvLyDojrflj5bnrb7nvbLmlofku7bliJfooagKICAgIGdldFNpZ25GaWxlTGlzdDogZnVuY3Rpb24gZ2V0U2lnbkZpbGVMaXN0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGRlLmdldFNpZ25MaXN0KHsKICAgICAgICBvcmRlcklkOiB0aGlzLm9yZGVySWQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICBpZiAoIXJlcy5kYXRhKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgbGlzdCA9IFtdOwoKICAgICAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihyZXMuZGF0YSksCiAgICAgICAgICAgICAgX3N0ZXA7CgogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICB2YXIgaSA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgICAgIGxpc3QucHVzaCh7CiAgICAgICAgICAgICAgICBvcmRlclByb3Bvc2VyRG9jdW1lbnRTaWduVk9TOiBpLm9yZGVyUHJvcG9zZXJEb2N1bWVudFNpZ25WT1MsCiAgICAgICAgICAgICAgICBmaWxlTmFtZTogaS5vcmlnaW5hbEZpbGVuYW1lLAogICAgICAgICAgICAgICAgc2lnblN0YXR1czogaS5zaWduU3RhdHVzLAogICAgICAgICAgICAgICAgY292ZXJTdGF0dXM6IGkuY292ZXJTdGF0dXMsCiAgICAgICAgICAgICAgICBjcmVhdGVUaW1lOiBpLmNyZWF0ZVRpbWUuc3Vic3RyKDAsIDEwKSArICcgJyArIGkuY3JlYXRlVGltZS5zdWJzdHIoMTEsIDE5KSwKICAgICAgICAgICAgICAgIGlkOiBpLmlkCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczIub3JkZXJGaWxlTGlzdCA9IGxpc3Q7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDpooTop4jnrb7nvbLmlofkuaYKICAgIG9uQ2xpY2tfbG9va0ZpbGU6IGZ1bmN0aW9uIG9uQ2xpY2tfbG9va0ZpbGUoZSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGRlLmdldEZpbGVJbWcoewogICAgICAgIGlkOiBlLmlkCiAgICAgIH0pLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihyZXMpIHsKICAgICAgICAgIHZhciBsaXN0LCBpLCBpbWdVcmw7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgaWYgKCEocmVzLmRhdGEuc3VjY2VzcyA9PT0gdHJ1ZSkpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBsaXN0ID0gcmVzLmRhdGEuZGF0YS5pZHM7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9yZWdlbmVyYXRvclJ1bnRpbWUua2V5cyhsaXN0KTsKCiAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgIGlmICgoX2NvbnRleHQyLnQxID0gX2NvbnRleHQyLnQwKCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBpID0gX2NvbnRleHQyLnQxLnZhbHVlOwogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuZ2V0SW1nKGxpc3RbaV0pOwoKICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgaW1nVXJsID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICAgIGxpc3RbaV0gPSBpbWdVcmw7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgICAgX3RoaXMzLiRzdG9yZS5jb21taXQoJ2FwcC9DSEFOR0VfSU1BR0UnLCBsaXN0KTsKCiAgICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgICAgfSkpOwoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKSk7CiAgICB9LAogICAgZ2V0SW1nOiBmdW5jdGlvbiBnZXRJbWcoaWQpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM0LiRheGlvcygib3JnL29yZGVyLWRvY3VtZW50LXByZXZpZXctaW1nLyIuY29uY2F0KGlkKSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsICdkYXRhOmltYWdlL3BuZztiYXNlNjQsJyArIHJlcy5kYXRhKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDQuc2VudCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGp1ZGdlV2hvOiBmdW5jdGlvbiBqdWRnZVdobyh2YWwpIHsKICAgICAgdGhpcy4kYXhpb3MoJ29yZy91c2VyLXR5cGUtc2lnbicsIHsKICAgICAgICBvcmRlcklkOiB0aGlzLm9yZGVySWQsCiAgICAgICAgbW9iaWxlOiB2YWwKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7Ly8gaWYgKHBhcnNlSW50KHJlcy5kYXRhKT09PTEpIHsKICAgICAgICAvLyAgcmVzb2x2ZSh0cnVlKQogICAgICAgIC8vIH1lbHNlewogICAgICAgIC8vICByZXNvbHZlKGZhbHNlKQogICAgICAgIC8vIH0KICAgICAgICAvLyByZXR1cm4gIGF3YWl0IHRydWUKICAgICAgfSk7CiAgICB9LAogICAgb25DbGlja19zaG93U3RlcDogZnVuY3Rpb24gb25DbGlja19zaG93U3RlcCgpIHsKICAgICAgaWYgKCF0aGlzLnNob3dTdGVwKSB7CiAgICAgICAgdGhpcy5zaG93U3RlcCA9IHRydWU7CiAgICAgICAgdGhpcy5nZXRTdGVwKCk7CiAgICAgIH0KICAgIH0sCiAgICBvbkNsaWNrX2Nsb3NlU3RlcDogZnVuY3Rpb24gb25DbGlja19jbG9zZVN0ZXAoKSB7CiAgICAgIHRoaXMuc2hvd1N0ZXAgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDlvIDlkK93ZWJzb2NrZXTpk77mjqUKICAgIGNvbm5lY3RTb2NrZXQ6IGZ1bmN0aW9uIGNvbm5lY3RTb2NrZXQoKSB7CiAgICAgIHZhciB3c3N1cmwgPSAiIi5jb25jYXQodGhpcy4kY2ZnLndzc1VybCwgInRlbmNlbnQtdmlkZW8td2Vic29ja2V0LyIpLmNvbmNhdCh0aGlzLnJvb21EYXRhLnJvb21OdW0pOwogICAgICB3cyA9IG5ldyBXZWJTb2NrZXQod3NzdXJsKTsKICAgICAgd3Mub25vcGVuID0gdGhpcy53c3NPcGVuOwogICAgICB3cy5vbm1lc3NhZ2UgPSB0aGlzLndzc01zZzsKICAgICAgd3Mub25jbG9zZSA9IHRoaXMud3NzT25DbG9zZTsKICAgIH0sCiAgICAvLyDlvIDlp4vov57mjqUKICAgIHdzc09wZW46IGZ1bmN0aW9uIHdzc09wZW4oKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2coJ+i/nuaOpeaIkOWKn++8gScpOwogICAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KHsKICAgICAgICBoZWFydDogJ+S9oOaDs+aIkOS4unJhcHN0YXLlkJcnCiAgICAgIH0pKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM1Lndzc1N0YXJ0SGVhcnQoKTsKICAgICAgfSwgMTAwMDApOwogICAgfSwKICAgIC8vIOaOpeWPl3dlYnNvY2tldOa2iOaBrwogICAgd3NzTXNnOiBmdW5jdGlvbiB3c3NNc2coZSkgewogICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoZS5kYXRhKTsKCiAgICAgIGlmIChkYXRhWycyMDYwMSddICYmIHRoYXQuc2hvd1N0ZXApIHsKICAgICAgICB0aGF0LmdldFN0ZXAoKTsKICAgICAgfQoKICAgICAgaWYgKGRhdGFbJzIwNjAyJ10pIHsKICAgICAgICB0aGF0LmdldEFkZHJzKCk7CiAgICAgIH0KCiAgICAgIGlmIChkYXRhWycyMDYwMyddICYmIHRoYXQuc2hvd1N0ZXApIHsKICAgICAgICB0aGlzLmdldFNpZ25GaWxlTGlzdCgpOwogICAgICB9CgogICAgICByZXR1cm4gZS5kYXRhOwogICAgfSwKICAgIC8vIOW8gOWni+W/g+i3swogICAgd3NzU3RhcnRIZWFydDogZnVuY3Rpb24gd3NzU3RhcnRIZWFydCgpIHsKICAgICAgY29uc29sZS5sb2coJ3NvY2tldOW8gOWni+W/g+i3sycpOwogICAgICBoZWFydCA9IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICBoZWFydDogJ+S9oOaDs+aIkOS4unJhcHN0YXLlkJcnCiAgICAgIH0pOwogICAgICB0aGlzLmhlYXJ0QmVhdCgpOwogICAgfSwKICAgIC8vIHdlYnNvY2tldOW/g+i3swogICAgaGVhcnRCZWF0OiBmdW5jdGlvbiBoZWFydEJlYXQoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgaWYgKCFoZWFydCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgd3Muc2VuZChoZWFydCk7CgogICAgICBpZiAod3Mub25tZXNzYWdlKSB7CiAgICAgICAgY29uc29sZS5sb2coJ+W/g+i3s+aIkOWKn++8gScpOwoKICAgICAgICBpZiAoaGVhcnQpIHsKICAgICAgICAgIGhlYXJ0QmVhdFRpbWVPdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXM2LmhlYXJ0QmVhdCgpOwogICAgICAgICAgfSwgMTAwMDApOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygnc29ja2V05b+D6Lez5aSx6LSlJyk7CgogICAgICAgIGlmIChoZWFydEJlYXRGYWlsQ291bnQgPiAyKSB7CiAgICAgICAgICAvLyDph43ov54KICAgICAgICAgIHRoaXMuY29ubmVjdFNvY2tldCgpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGhlYXJ0KSB7CiAgICAgICAgICBoZWFydEJlYXRUaW1lT3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzNi5oZWFydEJlYXQoKTsKICAgICAgICAgIH0sIDEwMDAwKTsKICAgICAgICB9CgogICAgICAgIGhlYXJ0QmVhdEZhaWxDb3VudCsrOwogICAgICB9CiAgICB9LAogICAgLy8g57uT5p2f5b+D6LezCiAgICB3c3NFbmRIZWFydDogZnVuY3Rpb24gd3NzRW5kSGVhcnQoKSB7CiAgICAgIGNvbnNvbGUubG9nKCdzb2NrZXTnu5PmnZ/lv4Pot7MnKTsKICAgICAgaGVhcnQgPSAnJzsKCiAgICAgIGlmIChoZWFydEJlYXRUaW1lT3V0KSB7CiAgICAgICAgY2xlYXJUaW1lb3V0KGhlYXJ0QmVhdFRpbWVPdXQpOwogICAgICAgIGhlYXJ0QmVhdFRpbWVPdXQgPSBudWxsOwogICAgICB9CiAgICB9LAogICAgLy8gd2Vic29ja2V0IOaWreW8gOi/nuaOpQogICAgd3NzT25DbG9zZTogZnVuY3Rpb24gd3NzT25DbG9zZShlKSB7CiAgICAgIGNvbnNvbGUubG9nKCdDb25uZWN0aW9uIGNsb3NlZC4nKTsKICAgIH0sCiAgICB1c2VSVEM6IGZ1bmN0aW9uIHVzZVJUQygpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBhcGkuZ2V0VmlkZW9EYXRhKHsKICAgICAgICAgICAgICAgICAgb3JkZXJJZDogX3RoaXM3Lm9yZGVySWQsCiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAn5YWs6K+B5ZGYJwogICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcyA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICAgIHJlcy5kYXRhLm9yZGVySWQgPSBfdGhpczcub3JkZXJJZDsKICAgICAgICAgICAgICAgICAgICB0aGF0LnJvb21EYXRhID0gcmVzLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgdGhhdC5jb25uZWN0U29ja2V0KCk7CiAgICAgICAgICAgICAgICAgICAgdGhhdC5ydGMgPSBuZXcgUnRjQ2xpZW50KHRoYXQucm9vbURhdGEpOwogICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSB0aGF0LnJ0Yy5qb2luKCk7CiAgICAgICAgICAgICAgICAgICAgdGhhdC5ydGMuZ2V0Tm90aWZ5KHRoYXQuJG5vdGlmeSk7CiAgICAgICAgICAgICAgICAgICAgdGhhdC5jYW1lcmFzID0gc291cmNlLmNhbWVyYXM7CiAgICAgICAgICAgICAgICAgICAgdGhhdC5sb2NhbFN0cmVhbSA9IHNvdXJjZS5sb2NhbFN0cmVhbTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczcuJGZ1bi5tc2cocmVzLm1zZywgJ2Vycm9yJyk7CgogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgdGhhdC4kcm91dGVyLmdvKC0xKTsKICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldFN0ZXA6IGZ1bmN0aW9uIGdldFN0ZXAoKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuYWN0aXZlTmFtZSA9PT0gJ2ZpcnN0JykgewogICAgICAgIHRoaXMuJGF4aW9zKCdvcmcvb3JkZXItcHJvcG9zZXItc2NoZWR1bGUtcmVjb3JkLWxpc3QnLCB7CiAgICAgICAgICBvcmRlcklkOiB0aGlzLm9yZGVySWQKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICBfdGhpczguc3RlcExpc3QgPSByZXMuZGF0YTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmdldFNpZ25GaWxlTGlzdCgpOwogICAgICB9CiAgICB9LAogICAgc3RhcnRSZWM6IGZ1bmN0aW9uIHN0YXJ0UmVjKCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIHZhciBkb20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFuTGlzdCcpLmNoaWxkcmVuOwoKICAgICAgaWYgKGRvbS5sZW5ndGggPD0gMSkgewogICAgICAgIHRoaXMuJGFsZXJ0KCfor7fnoa7orqTlvZPkuovkurrmmK/lkKbov5vlhaXop4bpopHpgJror53kuK0nLCAn5o+Q56S6JywgewogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfmiJHnn6XpgZPllaYnCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBhcGkuc3RhcnRWaWRlbygiIi5jb25jYXQodGhpcy5vcmRlcklkLCAiLyIpLmNvbmNhdCh0aGlzLnJvb21EYXRhLnVzZXJJZCkpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3VjY2VzcyA9PT0gdHJ1ZSkgewogICAgICAgICAgdGhhdC5zdGFydFJlY29yID0gdHJ1ZTsKICAgICAgICAgIHRoYXQudGFza0lkID0gcmVzLmRhdGEudGFza0lkOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDIwMzA0KSB7CiAgICAgICAgICAgIF90aGlzOS4kZnVuLm1zZygn6KeG6aKR5q2j5Zyo5b2V5Yi25LitJywgJ2Vycm9yJyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpczkuJGZ1bi5tc2coJ+ivt+mHjeaWsOW8gOWni+W9leWItu+8jOWmguaciemXrumimOivt+iBlOezu+W3peS9nOS6uuWRmCcsICdlcnJvcicpOwogICAgICAgICAgfQoKICAgICAgICAgIHRoYXQuc3RhcnRSZWNvciA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZW5kUmVjOiBmdW5jdGlvbiBlbmRSZWModHlwZSkgewogICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CgogICAgICAvLyBpZiAodGhpcy50YXNrSWQgIT09ICcnKSB7CiAgICAgIGFwaS5lbmRWaWRlbygiIi5jb25jYXQodGhpcy5yb29tRGF0YS5yb29tTnVtKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgICB0aGF0LnN0YXJ0UmVjb3IgPSBmYWxzZTsKCiAgICAgICAgICBfdGhpczEwLiRmdW4ubXNnKCfkv53lrZjop4bpopHmiJDlip/vvIEnLCAnc3VjY2VzcycpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDIwMzAxKSB7CiAgICAgICAgICAgIF90aGlzMTAuJGZ1bi5tc2coJ+ivt+WFiOW8gOWni+W9leWIticsICd3YXJuaW5nJyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpczEwLiRmdW4ubXNnKHJlcy5tc2csICd3YXJuaW5nJyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsgLy8gfSBlbHNlIHsKICAgICAgLy8gdGhpcy4kZnVuLm1zZygn6K+35byA5aeL5b2V5Yi2JywgJ3dhcm5pbmcnKQogICAgICAvLyB9CiAgICB9LAogICAgb25DbGlja19lbmRWaWRlbzogZnVuY3Rpb24gb25DbGlja19lbmRWaWRlbygpIHsKICAgICAgaWYgKHRoaXMucnRjICE9IG51bGwpIHsKICAgICAgICBpZiAodGhpcy5zdGFydFJlY29yKSB7CiAgICAgICAgICB0aGlzLmVuZFJlYygyKTsKICAgICAgICB9CgogICAgICAgIHRoaXMucnRjLmxlYXZlKCk7CiAgICAgIH0KCiAgICAgIGlmICh3cykgewogICAgICAgIHRoaXMud3NzRW5kSGVhcnQoKTsKICAgICAgICB3cy5jbG9zZSgpOwogICAgICB9CgogICAgICB3cyA9IG51bGw7CiAgICAgIHRoYXQuJHJvdXRlci5nbygtMSk7CiAgICB9LAogICAgLy8g5oiq5Zu+CiAgICBzY3JlZW5zaG90OiBmdW5jdGlvbiBzY3JlZW5zaG90KGlkKSB7CiAgICAgIHZhciBfdGhpczExID0gdGhpczsKCiAgICAgIHZhciB2aWRlb0JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJyZW1vdGVfc3RyZWFtIi5jb25jYXQoaWQpKTsKICAgICAgdmFyIHZpZGVvID0gdmlkZW9Cb3guZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3ZpZGVvJylbMF07CiAgICAgIHZhciBjYW5FbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsgLy8gY2FuRWxlLndpZHRoID0gd2lkdGgKCiAgICAgIGNhbkVsZS5oZWlnaHQgPSA1MDA7CiAgICAgIHZpZGVvQm94LmFwcGVuZENoaWxkKGNhbkVsZSk7CiAgICAgIHZhciBjYW52YXMgPSB2aWRlb0JveC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnY2FudmFzJylbMF07CiAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgY3R4LmRyYXdJbWFnZSh2aWRlbywgMCwgMCwgMzAwLCA1MDApOwogICAgICBjb25zb2xlLmxvZyh0aGlzLmFkZHIpOyAvLyBpZiAodGhpcy5hZGRyICE9PSBudWxsKSB7CgogICAgICBpZiAodGhpcy5hZGRyICE9PSBudWxsKSB7CiAgICAgICAgaWYgKHRoaXMuYWRkcltpZF0uc2hvd0FkZHIpIHsKICAgICAgICAgIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpLmZpbGxTdHlsZSA9ICdyZ2JhKDAsMCwwLC4zKSc7CiAgICAgICAgICBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKS5maWxsUmVjdCgwLCAwLCAzMDAsIDEwMCk7CiAgICAgICAgICBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKS5maWxsU3R5bGUgPSAnI2ZmZic7CiAgICAgICAgICBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKS50ZXh0QmFzZWxpbmUgPSAndG9wJzsKICAgICAgICAgIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpLmZvbnQgPSAnMTBwdCBDYWxpYnJpJzsKICAgICAgICAgIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpLmZpbGxUZXh0KCIiLmNvbmNhdCh0aGlzLmFkZHJbaWRdLm5hbWUpLmNvbmNhdCh0aGlzLmFkZHJbaWRdLmNhcmROdW0pLCAxMCwgMTApOwogICAgICAgICAgY2FudmFzLmdldENvbnRleHQoJzJkJykuZmlsbFRleHQoIlx1NUI5QVx1NEY0RFx1RkYxQSIuY29uY2F0KHRoaXMuYWRkcltpZF0uc3RhdHVzID09PSAxID8gdGhpcy5hZGRyW2lkXS5hZGRycyA6ICfojrflj5blpLHotKXvvIzor7forqnlvZPkuovkurrmjILmlq3ph43mlrDov5vlhaUnKSwgMTAsIDMwKTsKICAgICAgICAgIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpLmZpbGxUZXh0KCJcdTdFQ0ZcdTVFQTZcdUZGMUEiLmNvbmNhdCh0aGlzLmFkZHJbaWRdLnN0YXR1cyA9PT0gMSA/IHRoaXMuYWRkcltpZF0ubG9uIDogJy0tJyksIDEwLCA1MCk7CiAgICAgICAgICBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKS5maWxsVGV4dCgiXHU3RUFDXHU1RUE2XHVGRjFBIi5jb25jYXQodGhpcy5hZGRyW2lkXS5zdGF0dXMgPT09IDEgPyB0aGlzLmFkZHJbaWRdLmxhdCA6ICctLScpLCAxMCwgNzApOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIGJhc2UgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnLCAxLjApLnN1YnN0cmluZygyMik7CiAgICAgIHRoaXMuJGF4aW9zKCdvcmcvc2F2ZS1vcmRlci1jYXB0dXJlJywgewogICAgICAgIGlkOiB0aGlzLm9yZGVySWQsCiAgICAgICAgYmFzZTY0U3RyaW5nOiBiYXNlLAogICAgICAgIG1vYmlsZTogaWQKICAgICAgfSwgewogICAgICAgIG1ldGhvZDogJ1BPU1QnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgX3RoaXMxMS4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICfmiKrlm77miJDlip8nLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+35Yiw6K+m5oOF6aG154K55Ye74oCc5LiA6ZSu5LiL6L295p2Q5paZ4oCd77yM5LiL6L295oiq5Zu+JywKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBvZmZzZXQ6IDEwMAogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzMTEuJG5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiAn5o+Q56S6JywKICAgICAgICAgICAgbWVzc2FnZTogJ+aIquWbvuS/neWtmOWksei0pe+8jOivt+eojeWQjuWGjeivlScsCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICAgIG9mZnNldDogMTAwCiAgICAgICAgICB9KTsKICAgICAgICB9IC8vIGNhbnZhcy5yZW1vdmUoKQoKICAgICAgfSk7IC8vIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAvLyAgIGh0bWwyY2FudmFzKG5hLCB7IGJhY2tncm91bmRDb2xvcjogbnVsbCwgd2lkdGg6IDQwMCwgc2Nyb2xsWDogMCwgc2Nyb2xsWTogMCwgYWxsb3dUYWludDogdHJ1ZSwgdXNlQ09SUzogdHJ1ZSwgcG9zaXRpb246ICdmaXhlZCcsIGxlZnQ6ICcxcHgnLCB0b3A6ICcxcHgnIH0pLnRoZW4oYXN5bmMgcmVzID0+IHsKICAgICAgLy8gICAgIGlmIChyZXMpIHsKICAgICAgLy8gICAgICAgdmFyIGltZ1VybCA9IGF3YWl0IGNhbnZhcy50b0RhdGFVUkwoKQogICAgICAvLyAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgZmV0Y2goaW1nVXJsKQogICAgICAvLyAgICAgICBjb25zdCBibG9iID0gYXdhaXQgZGF0YS5ibG9iKCkKICAgICAgLy8gICAgICAgdGhpcy5ibG9iRmlsZShibG9iLCAnNDQ0NCcpCiAgICAgIC8vIHRoaXMuJGF4aW9zKCdvcmcvc2F2ZS1vcmRlci1jYXB0dXJlJywgeyBpZDogdGhpcy5vcmRlcklkLCBiYXNlNjRTdHJpbmc6IGJhc2UsIG1vYmlsZTogaWQgfSwgeyBtZXRob2Q6ICdQT1NUJyB9KS50aGVuKHJlcyA9PiB7CiAgICAgIC8vICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgIC8vICAgICB0aGlzLiRub3RpZnkoeyB0aXRsZTogJ+aIquWbvuaIkOWKnycsIG1lc3NhZ2U6ICfor7fliLDor6bmg4XpobXngrnlh7vigJzkuIDplK7kuIvovb3mnZDmlpnigJ3vvIzkuIvovb3miKrlm74nLCB0eXBlOiAnc3VjY2VzcycsIG9mZnNldDogMTAwIH0pCiAgICAgIC8vICAgfSBlbHNlIHsKICAgICAgLy8gICAgIHRoaXMuJG5vdGlmeSh7IHRpdGxlOiAn5o+Q56S6JywgbWVzc2FnZTogJ+aIquWbvuS/neWtmOWksei0pe+8jOivt+eojeWQjuWGjeivlScsIHR5cGU6ICdlcnJvcicsIG9mZnNldDogMTAwIH0pCiAgICAgIC8vICAgfQogICAgICAvLyBjYW52YXMucmVtb3ZlKCkKICAgICAgLy8gfSkKICAgICAgLy8gfQogICAgICAvLyB9KQogICAgICAvLyB9LCA1MDApCiAgICAgIC8vIH0gZWxzZSB7CiAgICAgIC8vIGNvbnN0IG5vQWRkckJhc2UgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnLCAxLjApLnN1YnN0cmluZygyMikKICAgICAgLy8gdGhpcy4kYXhpb3MoJ29yZy9zYXZlLW9yZGVyLWNhcHR1cmUnLCB7IGlkOiB0aGlzLm9yZGVySWQsIGJhc2U2NFN0cmluZzogbm9BZGRyQmFzZSwgbW9iaWxlOiBpZCB9LCB7IG1ldGhvZDogJ1BPU1QnIH0pLnRoZW4ocmVzID0+IHsKICAgICAgLy8gICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgLy8gICAgIHRoaXMuJG5vdGlmeSh7IHRpdGxlOiAn5oiq5Zu+5oiQ5YqfJywgbWVzc2FnZTogJ+ivt+WIsOivpuaDhemhteeCueWHu+KAnOS4gOmUruS4i+i9veadkOaWmeKAne+8jOS4i+i9veaIquWbvicsIHR5cGU6ICdzdWNjZXNzJywgb2Zmc2V0OiAxMDAgfSkKICAgICAgLy8gICB9IGVsc2UgewogICAgICAvLyAgICAgdGhpcy4kbm90aWZ5KHsgdGl0bGU6ICfmj5DnpLonLCBtZXNzYWdlOiAn5oiq5Zu+5L+d5a2Y5aSx6LSl77yM6K+356iN5ZCO5YaN6K+VJywgdHlwZTogJ2Vycm9yJywgb2Zmc2V0OiAxMDAgfSkKICAgICAgLy8gICB9CiAgICAgIC8vIH0pCgogICAgICBjYW52YXMucmVtb3ZlKCk7IC8vIH0KICAgICAgLy8gY29uc3QgdmlkZW9Cb3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgcmVtb3RlX3N0cmVhbSR7aWR9YCkKICAgICAgLy8gY29uc3QgdmlkZW8gPSB2aWRlb0JveC5nZXRFbGVtZW50c0J5VGFnTmFtZSgndmlkZW8nKVswXQogICAgICAvLyBodG1sMmNhbnZhcyh2aWRlbywgeyBiYWNrZ3JvdW5kQ29sb3I6IG51bGwgfSkudGhlbihhc3luYyByZXMgPT4gewogICAgICAvLyAgIHZhciBpbWdVcmwgPSByZXMudG9EYXRhVVJMKCkKICAgICAgLy8gICBjb25zdCBkYXRhID0gYXdhaXQgZmV0Y2goaW1nVXJsKQogICAgICAvLyAgIGNvbnN0IGJsb2IgPSBhd2FpdCBkYXRhLmJsb2IoKQogICAgICAvLyAgIHRoaXMuYmxvYkZpbGUoYmxvYiwgJzQ0NDQnKQogICAgICAvLyAgIC8vIHZhciBjdiA9IGNhbnZhcy50b0RhdGFVUkwoKQogICAgICAvLyAgIC8vIGNvbnN0IG9kID0gYXdhaXQgZmV0Y2goY3YpCiAgICAgIC8vICAgLy8gY29uc3QgdmIgPSBhd2FpdCBvZC5ibG9iKCkKICAgICAgLy8gICAvLyBjb25zdCBiYXNlID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJywgMS4wKS5zdWJzdHJpbmcoMjIpCiAgICAgIC8vIH0pCiAgICB9LAogICAgb25DbGlja19jaGFuZ2VTaG93QWRkcjogZnVuY3Rpb24gb25DbGlja19jaGFuZ2VTaG93QWRkcihpKSB7CiAgICAgIHRoaXMuYWRkcltpXS5zaG93QWRkciA9ICF0aGlzLmFkZHJbaV0uc2hvd0FkZHI7CiAgICB9LAogICAgYmxvYkZpbGU6IGZ1bmN0aW9uIGJsb2JGaWxlKGJsb2IsIGZpbGVOYW1lKSB7CiAgICAgIGlmICh3aW5kb3cubmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IpIHsKICAgICAgICBuYXZpZ2F0b3IubXNTYXZlQmxvYihibG9iLCBmaWxlTmFtZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgdmFyIGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7IC8vIGxpbmsuc2V0QXR0cmlidXRlKCd0YXJnZXQnLCAndmlld193aW5kb3cnKQoKICAgICAgICBsaW5rLmhyZWYgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsgLy8g5Yib5bu65a+56LGhdXJsCgogICAgICAgIGxpbmsuZG93bmxvYWQgPSBmaWxlTmFtZTsgLy8gZml4IEZpcmVmb3gKCiAgICAgICAgbGluay5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIGJvZHkuYXBwZW5kQ2hpbGQobGluayk7CiAgICAgICAgbGluay5jbGljaygpOwogICAgICAgIGJvZHkucmVtb3ZlQ2hpbGQobGluayk7CiAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwobGluay5ocmVmKTsgLy8g6YCa6L+H6LCD55SoIFVSTC5jcmVhdGVPYmplY3RVUkwoKSDliJvlu7rnmoQgVVJMIOWvueixoQogICAgICB9CiAgICB9LAogICAgZ2V0QWRkcnM6IGZ1bmN0aW9uIGdldEFkZHJzKCkgewogICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7CgogICAgICB0aGlzLiRheGlvcygnb3JnL29yZGVyLXByb3Bvc2VyLXBvc2l0aW9uLXJlY29yZC1saXN0JywgewogICAgICAgIG9yZGVySWQ6IHRoaXMub3JkZXJJZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMsICctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLeiOt+WPluWcsOWdgC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tJyk7CgogICAgICAgIGlmIChyZXMuc3VjY2VzcyAmJiByZXMuZGF0YSAhPT0gbnVsbCAmJiByZXMuZGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgICB2YXIgZGF0YSA9IHt9OwoKICAgICAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIocmVzLmRhdGEpLAogICAgICAgICAgICAgIF9zdGVwMjsKCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgICAgIHZhciBpID0gX3N0ZXAyLnZhbHVlOwogICAgICAgICAgICAgIGRhdGFbaS5tb2JpbGVdID0gewogICAgICAgICAgICAgICAgbmFtZTogaS5yZWFsTmFtZSwKICAgICAgICAgICAgICAgIGNhcmROdW06IGkuY2FyZE51bSwKICAgICAgICAgICAgICAgIG1vYmlsZTogaS5tb2JpbGUsCiAgICAgICAgICAgICAgICBhZGRyczogaS5wb3NpdGlvbiwKICAgICAgICAgICAgICAgIGxvbjogaS5sb25naXR1ZGUsCiAgICAgICAgICAgICAgICBsYXQ6IGkubGF0aXR1ZGUsCiAgICAgICAgICAgICAgICBzaG93QWRkcjogdHJ1ZSwKICAgICAgICAgICAgICAgIHN0YXR1czogaS5zdGF0dXMKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczEyLmFkZHIgPSBkYXRhOyAvLyBjb25zb2xlLmxvZyh0aGlzLmFkZHIsICctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLeiOt+WPluWcsOWdgC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tJykKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGVubGFyZ2U6IGZ1bmN0aW9uIGVubGFyZ2UoaWQpIHsKICAgICAgaWYgKCF0aGlzLmVubGFyZ2VJZCkgewogICAgICAgIHRoaXMuZW5sYXJnZUlkID0gaWQ7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5lbmxhcmdlSWQgPT09IGlkKSB7CiAgICAgICAgdGhpcy5lbmxhcmdlSWQgPSAnJzsKICAgICAgfQogICAgfQogIH0KfTs="},null]}