{"remainingRequest":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/thread-loader/dist/cjs.js!/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/home/jenkins_data/workspace/页面-公证处后台/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jenkins_data/workspace/页面-公证处后台/src/components/entryTab/documentMaterial.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jenkins_data/workspace/页面-公证处后台/src/components/entryTab/documentMaterial.vue","mtime":1634724784694},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins_data/workspace/页面-公证处后台/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsgdmFyIF9pID0gYXJyID09IG51bGwgPyBudWxsIDogdHlwZW9mIFN5bWJvbCAhPT0gInVuZGVmaW5lZCIgJiYgYXJyW1N5bWJvbC5pdGVyYXRvcl0gfHwgYXJyWyJAQGl0ZXJhdG9yIl07IGlmIChfaSA9PSBudWxsKSByZXR1cm47IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX3MsIF9lOyB0cnkgeyBmb3IgKF9pID0gX2kuY2FsbChhcnIpOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9CgpmdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQgPSB0eXBlb2YgU3ltYm9sICE9PSAidW5kZWZpbmVkIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0gfHwgb1siQEBpdGVyYXRvciJdOyBpZiAoIWl0KSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHZhciBGID0gZnVuY3Rpb24gRigpIHt9OyByZXR1cm4geyBzOiBGLCBuOiBmdW5jdGlvbiBuKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9LCBlOiBmdW5jdGlvbiBlKF9lMikgeyB0aHJvdyBfZTI7IH0sIGY6IEYgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0gdmFyIG5vcm1hbENvbXBsZXRpb24gPSB0cnVlLCBkaWRFcnIgPSBmYWxzZSwgZXJyOyByZXR1cm4geyBzOiBmdW5jdGlvbiBzKCkgeyBpdCA9IGl0LmNhbGwobyk7IH0sIG46IGZ1bmN0aW9uIG4oKSB7IHZhciBzdGVwID0gaXQubmV4dCgpOyBub3JtYWxDb21wbGV0aW9uID0gc3RlcC5kb25lOyByZXR1cm4gc3RlcDsgfSwgZTogZnVuY3Rpb24gZShfZTMpIHsgZGlkRXJyID0gdHJ1ZTsgZXJyID0gX2UzOyB9LCBmOiBmdW5jdGlvbiBmKCkgeyB0cnkgeyBpZiAoIW5vcm1hbENvbXBsZXRpb24gJiYgaXQucmV0dXJuICE9IG51bGwpIGl0LnJldHVybigpOyB9IGZpbmFsbHkgeyBpZiAoZGlkRXJyKSB0aHJvdyBlcnI7IH0gfSB9OyB9CgpmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09ICJzdHJpbmciKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gIk9iamVjdCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09ICJNYXAiIHx8IG4gPT09ICJTZXQiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09ICJBcmd1bWVudHMiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfQoKZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9CgppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICIvaG9tZS9qZW5raW5zX2RhdGEvd29ya3NwYWNlL1x1OTg3NVx1OTc2Mi1cdTUxNkNcdThCQzFcdTU5MDRcdTU0MEVcdTUzRjAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yIjsKCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9CgovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBnZXREb2N1bWVudE1hdGVyaWFsTGlzdCwgRGVsZXRlV3JpdE1hdGVyaWFscywgZ2V0RW50cnlEYXRlaWwgfSBmcm9tICcuLi8uLi9hcGkvY2xvdWRNYWlsJzsKaW1wb3J0IHNpZ25GaWxlIGZyb20gJ0AvY29tcG9uZW50cy9lbnRyeVRhYi91cGxvYWRGaWxlJzsKaW1wb3J0ICogYXMgZGUgZnJvbSAnQC9hcGkvZGVsZWdhdGUnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgc2lnbkZpbGU6IHNpZ25GaWxlCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybUxhYmVsQWxpZ246IHsKICAgICAgICBuYW1lOiAnJywKICAgICAgICB0eXBlOiAnJwogICAgICB9LAogICAgICBkb2N1bWVudE1hdGVyaWFsVGFibGVEYXRhOiBbXSwKICAgICAgZmlsZVNob3dMaXN0RGF0YTogW10sCiAgICAgIGN1cnJlbnRQYWdlMzogMSwKICAgICAgcGFnZVNpemU6IDEwLAogICAgICB0b3RhbDogMTAwLAogICAgICB1cGxvYWRNYXRlcmlhbERpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBodHRwOiAnJywKICAgICAgb3JkZXJJZDogJycsCiAgICAgIGlmcmFtZVN0YTogZmFsc2UsCiAgICAgIHN0YURhdGE6IHt9LAogICAgICBmaWxlU2lnbkxpc3Q6IFtdLAogICAgICBkb2NJbmZvOiB7fSwKICAgICAgc2lnbkJveFNob3c6IGZhbHNlLAogICAgICBmbGllTGlzdDogW10sCiAgICAgIHVwRmlsZUxpc3Q6IFtdLAogICAgICBqdXJpc2RpY3Rpb246IGZhbHNlLAogICAgICB0eXBlOiAnJywKICAgICAgZmlsZVNob3c6IFtdCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5vcmRlcklkKSB7CiAgICAgIHRoaXMub3JkZXJJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5Lm9yZGVySWQ7CiAgICB9IGVsc2UgewogICAgICB0aGlzLm9yZGVySWQgPSB0aGlzLiRzdG9yZS5zdGF0ZS5hcHAub3JkZXJJZDsKICAgICAgdmFyIHVybCA9ICIvIyIuY29uY2F0KHRoaXMuJHJvdXRlLnBhdGgsICI/b3JkZXJJZD0iKS5jb25jYXQodGhpcy5vcmRlcklkKTsKICAgICAgaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgdXJsKTsKICAgIH0KCiAgICB2YXIgZGF0YSA9IHsKICAgICAgcGFnZU51bTogdGhpcy5jdXJyZW50UGFnZTMsCiAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLAogICAgICBvcmRlcklkOiB0aGlzLm9yZGVySWQKICAgIH07CiAgICB0aGlzLmdldExpc3QoZGF0YSk7CiAgICB0aGlzLmp1cmlzZGljdGlvbiA9IHRoaXMuJHBhcmVudC4kcGFyZW50LiRwYXJlbnQuanVyaXNkaWN0aW9uOwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgb3JkZXJJZDogdGhpcy5vcmRlcklkCiAgICAgIH07CiAgICAgIHRoaXMuZ2V0TGlzdChkYXRhKTsgLy8gdGhpcy5nZXRPcmRlckluZm8oKQoKICAgICAgdGhpcy5zaWduQm94U2hvdyA9IGZhbHNlOwogICAgICB0aGlzLnVwbG9hZE1hdGVyaWFsRGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgfSwKICAgIGdldExpc3Q6IGZ1bmN0aW9uIGdldExpc3QoZGF0YSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgZ2V0RG9jdW1lbnRNYXRlcmlhbExpc3QoZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHJlcy5kYXRhLmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgaWYgKHJlcy5kYXRhW2luZGV4XS5hZnRlclNpZ25GaWxlICE9PSBudWxsKSB7CiAgICAgICAgICAgIHJlcy5kYXRhW2luZGV4XS5hZnRlclNpZ25GaWxlID0gSlNPTi5wYXJzZShyZXMuZGF0YVtpbmRleF0uYWZ0ZXJTaWduRmlsZSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBfdGhpcy5kb2N1bWVudE1hdGVyaWFsVGFibGVEYXRhID0gcmVzLmRhdGE7CiAgICAgICAgX3RoaXMudG90YWwgPSByZXMuZGF0YS50b3RhbDsKICAgICAgICBnZXRFbnRyeURhdGVpbChkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIF90aGlzLnN0YURhdGEgPSByZXMuZGF0YTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU2l6ZUNoYW5nZTogZnVuY3Rpb24gaGFuZGxlU2l6ZUNoYW5nZSgpIHsKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgcGFnZU51bTogdGhpcy5jdXJyZW50UGFnZTMsCiAgICAgICAgcGFnZVNpemU6IHRoaXMucGFnZVNpemUsCiAgICAgICAgb3JkZXJJZDogdGhpcy5vcmRlcklkCiAgICAgIH07CiAgICAgIHRoaXMuZ2V0TGlzdChkYXRhKTsKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVDdXJyZW50Q2hhbmdlKCkgewogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBwYWdlTnVtOiB0aGlzLmN1cnJlbnRQYWdlMywKICAgICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZSwKICAgICAgICBvcmRlcklkOiB0aGlzLm9yZGVySWQKICAgICAgfTsKICAgICAgdGhpcy5nZXRMaXN0KGRhdGEpOwogICAgfSwKICAgIHVwbG9hZE1hdGVyaWFsOiBmdW5jdGlvbiB1cGxvYWRNYXRlcmlhbCgpIHsKICAgICAgdGhpcy51cGxvYWRNYXRlcmlhbERpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgICB0aGlzLmZpbGVTaG93TGlzdERhdGEgPSBbXTsKICAgICAgdGhpcy5maWxlU2hvdyA9IFtdOwogICAgfSwKICAgIGVkaXREb2N1bWVudDogZnVuY3Rpb24gZWRpdERvY3VtZW50KHZhbCkgewogICAgICB0aGlzLmlmcmFtZVN0YSA9IHRydWU7CiAgICAgIHZhciBtb2RlID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX01PREU7CgogICAgICBpZiAobW9kZSA9PT0gJ2RldmVsb3BtZW50JykgewogICAgICAgIHRoaXMuaHR0cCA9ICdodHRwOi8vMTkyLjE2OC4xLjE4NjoxMjAwOSc7CiAgICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gJ3Rlc3QnKSB7CiAgICAgICAgdGhpcy5odHRwID0gJ2h0dHBzOi8vdGVzdC1vbmx5b2ZmaWNlLmx2emhlbmd5dW4uY24nOwogICAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICdwcm9kdWN0aW9uJykgewogICAgICAgIHRoaXMuaHR0cCA9ICdodHRwczovL29mZmljZS5sdnpoZW5neXVuLmNuJzsKICAgICAgfSBlbHNlIGlmIChtb2RlID09PSAnc3RhZ2luZycpIHsKICAgICAgICB0aGlzLmh0dHAgPSAnaHR0cHM6Ly90ZXN0LW9ubHlvZmZpY2UubHZ6aGVuZ3l1bi5jbic7CiAgICAgIH0KCiAgICAgIHdpbmRvdy5vcGVuKCIiLmNvbmNhdCh0aGlzLmh0dHAsICIvcGFnZS9nby1vcGVuLW9yZGVyLWRvY21lbnQvIikuY29uY2F0KHZhbC5vcmRlcklkLCAiLyIpLmNvbmNhdCh2YWwuaWQpLCAndGVzdCcpOyAvLyB3aW5kb3cub3BlbigKICAgICAgLy8gICBgaHR0cHM6Ly90ZXN0LW9ubHlvZmZpY2UubHZ6aGVuZ3l1bi5jbi9wYWdlL2dvLW9wZW4tb3JkZXItZG9jbWVudC8ke3ZhbC5vcmRlcklkfS8ke3ZhbC5pZH1gLAogICAgICAvLyAgICd0ZXN0JwogICAgICAvLyApCiAgICB9LAogICAgc2luZ2xlRG93bmxvYWQ6IGZ1bmN0aW9uIHNpbmdsZURvd25sb2FkKHZhbCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBmaWxlTmFtZSA9ICcnOwoKICAgICAgaWYgKHZhbC5hZnRlclNpZ25GaWxlICE9IG51bGwpIHsKICAgICAgICBmaWxlTmFtZSA9IHZhbC5hZnRlclNpZ25GaWxlLm9yaWdpbmFsRmlsZW5hbWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZmlsZU5hbWUgPSBKU09OLnBhcnNlKHZhbC5iZWZvcmVTaWduRmlsZSkub3JpZ2luYWxGaWxlbmFtZTsKICAgICAgfQoKICAgICAgdmFyIGRvd25sb2FkVHlwZSA9IDE7CiAgICAgIHRoaXMuJGF4aW9zKCdvcmcvZG93bmxvYWQtbWF0ZXJpYWwnLCB7CiAgICAgICAgb3JkZXJJZDogdGhpcy5vcmRlcklkLAogICAgICAgIGRvY3VtZW50SWQ6IHZhbC5pZCwKICAgICAgICBkb3dubG9hZFR5cGU6IGRvd25sb2FkVHlwZQogICAgICB9LCB7CiAgICAgICAgcmVzcG9uc2VUeXBlOiAnYmxvYicKICAgICAgfSkudGhlbihmdW5jdGlvbiAoYmxvYikgewogICAgICAgIF90aGlzMi5zYXZlQXMoYmxvYiwgZmlsZU5hbWUpOwogICAgICB9KTsKICAgIH0sCiAgICBkZWxldGVNYXRlcmlhbHM6IGZ1bmN0aW9uIGRlbGV0ZU1hdGVyaWFscyh2YWwpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6Xmlofku7YsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgRGVsZXRlV3JpdE1hdGVyaWFscyh7CiAgICAgICAgICBpZDogdmFsLmlkCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgX3RoaXMzLmluaXQoKTsKCiAgICAgICAgICAgIF90aGlzMy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgbWVzc2FnZTogJ+aWh+S7tuW3suWIoOmZpCcsCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHNhdmVBczogZnVuY3Rpb24gc2F2ZUFzKGJsb2IsIGZpbGVOYW1lKSB7CiAgICAgIGlmICh3aW5kb3cubmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IpIHsKICAgICAgICBuYXZpZ2F0b3IubXNTYXZlQmxvYihibG9iLCBmaWxlTmFtZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgdmFyIGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7CiAgICAgICAgbGluay5ocmVmID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7IC8vIOWIm+W7uuWvueixoXVybAoKICAgICAgICBsaW5rLmRvd25sb2FkID0gZmlsZU5hbWU7IC8vIGZpeCBGaXJlZm94CgogICAgICAgIGxpbmsuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICBib2R5LmFwcGVuZENoaWxkKGxpbmspOwogICAgICAgIGxpbmsuY2xpY2soKTsKICAgICAgICBib2R5LnJlbW92ZUNoaWxkKGxpbmspOwogICAgICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKGxpbmsuaHJlZik7IC8vIOmAmui/h+iwg+eUqCBVUkwuY3JlYXRlT2JqZWN0VVJMKCkg5Yib5bu655qEIFVSTCDlr7nosaEKICAgICAgfQogICAgfSwKICAgIGFsbERvd25sb2FkOiBmdW5jdGlvbiBhbGxEb3dubG9hZCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICBpZiAodGhpcy5kb2N1bWVudE1hdGVyaWFsVGFibGVEYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICB2YXIgZG93bmxvYWRUeXBlID0gMTsKICAgICAgICB2YXIgYWxsRG9jdW1lbnQgPSAnJzsKCiAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuZG9jdW1lbnRNYXRlcmlhbFRhYmxlRGF0YS5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgIGFsbERvY3VtZW50ICs9IHRoaXMuZG9jdW1lbnRNYXRlcmlhbFRhYmxlRGF0YVtpbmRleF0uaWQgKyAnLCc7CiAgICAgICAgfQoKICAgICAgICBhbGxEb2N1bWVudCA9IGFsbERvY3VtZW50LnN1YnN0cmluZygwLCBhbGxEb2N1bWVudC5sZW5ndGggLSAxKTsKICAgICAgICB2YXIgZmlsZU5hbWUgPSBhbGxEb2N1bWVudC5pbmRleE9mKCcsJykgIT09IC0xID8gIiIuY29uY2F0KHRoaXMuc3RhRGF0YS5idXNpbmVzc1R5cGVEZXNjKS5jb25jYXQodGhpcy5zdGFEYXRhLm9yZGVyTnVtLCAiICIpLmNvbmNhdCh0aGlzLmdldFRpbWUoKSwgIi56aXAiKSA6IHRoaXMuZG9jdW1lbnRNYXRlcmlhbFRhYmxlRGF0YVswXS5vcmlnaW5hbEZpbGVuYW1lOwogICAgICAgIHRoaXMuJGF4aW9zKCdvcmcvZG93bmxvYWQtbWF0ZXJpYWwnLCB7CiAgICAgICAgICBvcmRlcklkOiB0aGlzLm9yZGVySWQsCiAgICAgICAgICBkb2N1bWVudElkOiBhbGxEb2N1bWVudCwKICAgICAgICAgIGRvd25sb2FkVHlwZTogZG93bmxvYWRUeXBlCiAgICAgICAgfSwgewogICAgICAgICAgcmVzcG9uc2VUeXBlOiAnYmxvYicKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChibG9iKSB7CiAgICAgICAgICBfdGhpczQuc2F2ZUFzKGJsb2IsIGZpbGVOYW1lKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmsqHmnInlj6/kuIvovb3nmoTmlofkuaYnKTsKICAgICAgfQogICAgfSwKICAgIGdldFRpbWU6IGZ1bmN0aW9uIGdldFRpbWUoKSB7CiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTsKICAgICAgdmFyIHNlcGVyYXRvcjEgPSAnLic7IC8vIOW5tOaciOaXpeS5i+mXtOeahOWIhumalAoKICAgICAgdmFyIHNlcGVyYXRvcjIgPSAnOic7IC8vIOaXtuWIhuenkuS5i+mXtOeahOWIhumalAoKICAgICAgdmFyIG1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMSA8IDEwID8gJzAnICsgKGRhdGUuZ2V0TW9udGgoKSArIDEpIDogZGF0ZS5nZXRNb250aCgpICsgMTsgLy8g6I635Y+W5pyILOWmguaenOWwj+S6jjEwLOWJjemdouihpeS4qjAKCiAgICAgIHZhciBzdHJEYXRlID0gZGF0ZS5nZXREYXRlKCkgPCAxMCA/ICcwJyArIGRhdGUuZ2V0RGF0ZSgpIDogZGF0ZS5nZXREYXRlKCk7IC8vIOiOt+WPluaXpSzlpoLmnpzlsI/kuo4xMCzliY3pnaLooaXkuKowCgogICAgICB2YXIgc3RySG91cnMgPSBkYXRlLmdldEhvdXJzKCkgPCAxMCA/ICcwJyArIGRhdGUuZ2V0SG91cnMoKSA6IGRhdGUuZ2V0SG91cnMoKTsgLy8g6I635Y+W5bCP5pe2LOWmguaenOWwj+S6jjEwLOWJjemdouihpeS4qjAKCiAgICAgIHZhciBzdHJNaW51dGVzID0gZGF0ZS5nZXRNaW51dGVzKCkgPCAxMCA/ICcwJyArIGRhdGUuZ2V0TWludXRlcygpIDogZGF0ZS5nZXRNaW51dGVzKCk7IC8vIOiOt+WPluWIhizlpoLmnpzlsI/kuo4xMCzliY3pnaLooaXkuKowCgogICAgICB2YXIgc3RyU2Vjb25kcyA9IGRhdGUuZ2V0U2Vjb25kcygpIDwgMTAgPyAnMCcgKyBkYXRlLmdldFNlY29uZHMoKSA6IGRhdGUuZ2V0U2Vjb25kcygpOyAvLyDojrflj5bnp5Is5aaC5p6c5bCP5LqOMTAs5YmN6Z2i6KGl5LiqMAoKICAgICAgdmFyIGN1cnJlbnRkYXRlID0gZGF0ZS5nZXRGdWxsWWVhcigpICsgc2VwZXJhdG9yMSArIG1vbnRoICsgc2VwZXJhdG9yMSArIHN0ckRhdGUgKyAnICcgKyBzdHJIb3VycyArIHNlcGVyYXRvcjIgKyBzdHJNaW51dGVzICsgc2VwZXJhdG9yMiArIHN0clNlY29uZHM7IC8vIOaLvOaOpeS4gOS4iwoKICAgICAgcmV0dXJuIGN1cnJlbnRkYXRlOyAvLyDov5Tlm54KICAgIH0sCiAgICBwcmV2aWV3RmlsZTogZnVuY3Rpb24gcHJldmlld0ZpbGUoZSkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIGRlLmdldEZpbGVJbWcoewogICAgICAgIGlkOiBlLmlkCiAgICAgIH0pLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHJlcykgewogICAgICAgICAgdmFyIGxpc3QsIGksIGltZ1VybDsKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIGlmICghKHJlcy5kYXRhLnN1Y2Nlc3MgPT09IHRydWUpKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBsaXN0ID0gcmVzLmRhdGEuZGF0YS5pZHM7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX3JlZ2VuZXJhdG9yUnVudGltZS5rZXlzKGxpc3QpOwoKICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgaWYgKChfY29udGV4dC50MSA9IF9jb250ZXh0LnQwKCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGkgPSBfY29udGV4dC50MS52YWx1ZTsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczUuZ2V0SW1nKGxpc3RbaV0sIDEpOwoKICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgaW1nVXJsID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgICAgbGlzdFtpXSA9IGltZ1VybDsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICAgIF90aGlzNS4kc3RvcmUuY29tbWl0KCdhcHAvQ0hBTkdFX0lNQUdFJywgbGlzdCk7CgogICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICB9KSk7CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSgpKTsKICAgIH0sCiAgICBnZXRJbWc6IGZ1bmN0aW9uIGdldEltZyhpZCwgdHlwZSkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgdXJsOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdXJsID0gdHlwZSA9PT0gMSA/ICJvcmcvb3JkZXItZG9jdW1lbnQtcHJldmlldy1pbWcvIi5jb25jYXQoaWQpIDogIm9yZy9vcmRlci1wcm9wb3Nlci1tYXRlcmlhbC1wcmV2aWV3LWltZz9pZD0iLmNvbmNhdChpZCk7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM2LiRheGlvcyh1cmwpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHJlcykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LCcgKyByZXMuZGF0YSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gyKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KCkpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQzLnNlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRGaWxlVHlwZTogZnVuY3Rpb24gZ2V0RmlsZVR5cGUoZmlsZU5hbWUpIHsKICAgICAgLy8g5ZCO57yA6I635Y+WCiAgICAgIHZhciBzdWZmaXggPSAnJzsgLy8g6I635Y+W57G75Z6L57uT5p6cCgogICAgICB2YXIgcmVzdWx0ID0gJyc7CgogICAgICB0cnkgewogICAgICAgIHZhciBmbGllQXJyID0gZmlsZU5hbWUuc3BsaXQoJy4nKTsKICAgICAgICBzdWZmaXggPSBmbGllQXJyW2ZsaWVBcnIubGVuZ3RoIC0gMV07CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIHN1ZmZpeCA9ICcnOwogICAgICB9IC8vIGZpbGVOYW1l5peg5ZCO57yA6L+U5ZueIGZhbHNlCgoKICAgICAgaWYgKCFzdWZmaXgpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHN1ZmZpeCA9IHN1ZmZpeC50b0xvY2FsZUxvd2VyQ2FzZSgpOyAvLyDlm77niYfmoLzlvI8KCiAgICAgIHZhciBpbWdsaXN0ID0gWydwbmcnLCAnanBnJywgJ2pwZWcnLCAnYm1wJywgJ2dpZiddOyAvLyDov5vooYzlm77niYfljLnphY0KCiAgICAgIHJlc3VsdCA9IGltZ2xpc3QuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtID09PSBzdWZmaXg7CiAgICAgIH0pOwoKICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgIHJldHVybiAnaW1hZ2UnOwogICAgICB9IC8vIOWMuemFjXR4dAoKCiAgICAgIHZhciB0eHRsaXN0ID0gWyd0eHQnXTsKICAgICAgcmVzdWx0ID0gdHh0bGlzdC5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0gPT09IHN1ZmZpeDsKICAgICAgfSk7CgogICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgcmV0dXJuICd0eHQnOwogICAgICB9IC8vIOWMuemFjSBleGNlbAoKCiAgICAgIHZhciBleGNlbGlzdCA9IFsneGxzJywgJ3hsc3gnXTsKICAgICAgcmVzdWx0ID0gZXhjZWxpc3QuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtID09PSBzdWZmaXg7CiAgICAgIH0pOwoKICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgIHJldHVybiAnZXhjZWwnOwogICAgICB9IC8vIOWMuemFjSB3b3JkCgoKICAgICAgdmFyIHdvcmRsaXN0ID0gWydkb2MnLCAnZG9jeCddOwogICAgICByZXN1bHQgPSB3b3JkbGlzdC5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0gPT09IHN1ZmZpeDsKICAgICAgfSk7CgogICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgcmV0dXJuICd3b3JkJzsKICAgICAgfSAvLyDljLnphY0gcGRmCgoKICAgICAgdmFyIHBkZmxpc3QgPSBbJ3BkZiddOwogICAgICByZXN1bHQgPSBwZGZsaXN0LmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbSA9PT0gc3VmZml4OwogICAgICB9KTsKCiAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICByZXR1cm4gJ3BkZic7CiAgICAgIH0gLy8g5Yy56YWNIHBwdAoKCiAgICAgIHZhciBwcHRsaXN0ID0gWydwcHQnLCAncHB0eCddOwogICAgICByZXN1bHQgPSBwcHRsaXN0LmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbSA9PT0gc3VmZml4OwogICAgICB9KTsKCiAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICByZXR1cm4gJ3BwdCc7CiAgICAgIH0gLy8g5Yy56YWNIOinhumikQoKCiAgICAgIHZhciB2aWRlb2xpc3QgPSBbJ21wNCcsICdtMnYnLCAnbWt2JywgJ3JtdmInLCAnd212JywgJ2F2aScsICdmbHYnLCAnbW92JywgJ200diddOwogICAgICByZXN1bHQgPSB2aWRlb2xpc3QuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtID09PSBzdWZmaXg7CiAgICAgIH0pOwoKICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgIHJldHVybiAndmlkZW8nOwogICAgICB9IC8vIOWMuemFjSDpn7PpopEKCgogICAgICB2YXIgcmFkaW9saXN0ID0gWydtcDMnLCAnd2F2JywgJ3dtdiddOwogICAgICByZXN1bHQgPSByYWRpb2xpc3QuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtID09PSBzdWZmaXg7CiAgICAgIH0pOwoKICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgIHJldHVybiAncmFkaW8nOwogICAgICB9IC8vIOWFtuS7liDmlofku7bnsbvlnosKCgogICAgICByZXR1cm4gJ290aGVyJzsKICAgIH0sCiAgICBwcmV2aWV3UGFydE1hdGVyaWFsOiBmdW5jdGlvbiBwcmV2aWV3UGFydE1hdGVyaWFsKCkgewogICAgICB0aGlzLnNlbGVjdFByZXZpZXcoMSk7CiAgICB9LAogICAgcHJldmlld0FsbE1hdGVyaWFsOiBmdW5jdGlvbiBwcmV2aWV3QWxsTWF0ZXJpYWwoKSB7CiAgICAgIHRoaXMuc2VsZWN0UHJldmlldygwKTsKICAgIH0sCiAgICBzZWxlY3RQcmV2aWV3OiBmdW5jdGlvbiBzZWxlY3RQcmV2aWV3KHZhbCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmRvY3VtZW50TWF0ZXJpYWxUYWJsZURhdGEubGVuZ3RoID4gMCkgewogICAgICAgIHZhciBhcnJheSA9IHRoaXMuZG9jdW1lbnRNYXRlcmlhbFRhYmxlRGF0YTsKICAgICAgICB2YXIgbGlzdCA9IFtdOwogICAgICAgIHZhciBwcmV2aWV3SW1hZ2UgPSBbXTsKCiAgICAgICAgaWYgKHZhbCA9PT0gMSkgewogICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGFycmF5Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICBpZiAoYXJyYXlbaW5kZXhdLnNpZ25TdGF0dXMgPT09IDEpIHsKICAgICAgICAgICAgICBsaXN0LnB1c2goYXJyYXlbaW5kZXhdKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBsaXN0ID0gdGhpcy5kb2N1bWVudE1hdGVyaWFsVGFibGVEYXRhOwogICAgICAgIH0KCiAgICAgICAgaWYgKGxpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgZm9yICh2YXIgX2luZGV4ID0gMDsgX2luZGV4IDwgbGlzdC5sZW5ndGg7IF9pbmRleCsrKSB7CiAgICAgICAgICAgIGRlLmdldEZpbGVJbWcoewogICAgICAgICAgICAgIGlkOiBsaXN0W19pbmRleF0uaWQKICAgICAgICAgICAgfSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB2YXIgX3JlZjMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNChyZXMpIHsKICAgICAgICAgICAgICAgIHZhciBpbWFnbExpc3QsIGksIGltZ1VybDsKICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXMuZGF0YS5zdWNjZXNzID09PSB0cnVlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdsTGlzdCA9IHJlcy5kYXRhLmRhdGEuaWRzOwogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQudDAgPSBfcmVnZW5lcmF0b3JSdW50aW1lLmtleXMoaW1hZ2xMaXN0KTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoX2NvbnRleHQ0LnQxID0gX2NvbnRleHQ0LnQwKCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpID0gX2NvbnRleHQ0LnQxLnZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczcuZ2V0SW1nKGltYWdsTGlzdFtpXSwgMSk7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICBpbWdVcmwgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlld0ltYWdlLnB1c2goaW1nVXJsKTsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczcuJHN0b3JlLmNvbW1pdCgnYXBwL0NIQU5HRV9JTUFHRScsIHByZXZpZXdJbWFnZSk7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDMpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0oKSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ayoeacieWPr+mihOiniOeahOaWh+S5picpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmsqHmnInlj6/pooTop4jnmoTmlofkuaYnKTsKICAgICAgfQogICAgfSwKICAgIHNldFNpZ25hdHVyZTogZnVuY3Rpb24gc2V0U2lnbmF0dXJlKGUpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICBkZS5nZXRFbnRydXN0SW5mbyh7CiAgICAgICAgb3JkZXJJZDogdGhpcy5vcmRlcklkCiAgICAgIH0pLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9yZWY0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUocmVzKSB7CiAgICAgICAgICB2YXIgZmxpZUxpc3QsIGZpbGVTaWduTGlzdCwgX2l0ZXJhdG9yLCBfc3RlcCwgaSwgX2l0ZXJhdG9yMiwgX3N0ZXAyLCBfc3RlcDIkdmFsdWUsIGluZGV4LCBqOwoKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgICBmbGllTGlzdCA9IFtdOwogICAgICAgICAgICAgICAgICAgIGZpbGVTaWduTGlzdCA9IFtdOwogICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHJlcy5kYXRhLmFubmV4RFRPTGlzdCk7CgogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgICAgICAgICAgICAgICBpID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGZsaWVMaXN0LnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGkub3JpZ2luRmlsZU5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBpLmZpbGVOYW1lCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMKCiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHJlcy5kYXRhLmVudHJ1c3RMaXN0LmVudHJpZXMoKSk7CgogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgICAgICAgICAgICAgICBfc3RlcDIkdmFsdWUgPSBfc2xpY2VkVG9BcnJheShfc3RlcDIudmFsdWUsIDIpLCBpbmRleCA9IF9zdGVwMiR2YWx1ZVswXSwgaiA9IF9zdGVwMiR2YWx1ZVsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVNpZ25MaXN0LnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWxOYW1lOiBqLnJlYWxOYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgIHByb3Bvc2VySWQ6IGouaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgbG93TGVmdFg6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgbG93TGVmdFk6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJJZDogX3RoaXM4Lm9yZGVySWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJEb2N1bWVudElkOiAnJywKICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlOiAnJywKICAgICAgICAgICAgICAgICAgICAgICAgICBjb3ZlclR5cGU6IDIKICAgICAgICAgICAgICAgICAgICAgICAgfSk7IC8vIGouZWRpdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBqLmdlbmRlciA9IGouZ2VuZGVyICsgIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciAobGV0IGkgb2Ygai5tYXRlcmlhbExpc3QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBpLnVybCA9IGF3YWl0IHRoaXMuZ2V0SW1nKGkuaWQsIDIpOwogICAgICAgICAgICAgICAgICAgICAgICAvLyB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBfdGhpczguZmxpZUxpc3QgPSBmbGllTGlzdDsKICAgICAgICAgICAgICAgICAgICBfdGhpczguZmlsZVNpZ25MaXN0ID0gZmlsZVNpZ25MaXN0OyAvLyB0aGlzLmVudHJ1c3RJbmZvID0gcmVzLmRhdGE7CgogICAgICAgICAgICAgICAgICAgIF90aGlzOC5kb2NJbmZvID0gewogICAgICAgICAgICAgICAgICAgICAgZG9jSWQ6IGUuaWQsCiAgICAgICAgICAgICAgICAgICAgICBkb2NOYW1lOiBlLm9yaWdpbmFsRmlsZW5hbWUsCiAgICAgICAgICAgICAgICAgICAgICBzaWduU3RhdHVzOiBlLnNpZ25TdGF0dXMKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgICAgfSkpOwoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94NCkgewogICAgICAgICAgcmV0dXJuIF9yZWY0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSgpKTsKICAgIH0sCiAgICBhbGxTZXREaXN0cmljdDogZnVuY3Rpb24gYWxsU2V0RGlzdHJpY3QoKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgLy8gY29uc29sZS5sb2codGhpcy5kb2N1bWVudE1hdGVyaWFsVGFibGVEYXRhKTsKICAgICAgaWYgKHRoaXMuZG9jdW1lbnRNYXRlcmlhbFRhYmxlRGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5kb2NJbmZvID0gW107CiAgICAgICAgZGUuZ2V0RW50cnVzdEluZm8oewogICAgICAgICAgb3JkZXJJZDogdGhpcy5vcmRlcklkCiAgICAgICAgfSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBfcmVmNSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KHJlcykgewogICAgICAgICAgICB2YXIgZmxpZUxpc3QsIGZpbGVTaWduTGlzdCwgX2l0ZXJhdG9yMywgX3N0ZXAzLCBpLCBfaXRlcmF0b3I0LCBfc3RlcDQsIF9zdGVwNCR2YWx1ZSwgaW5kZXgsIGo7CgogICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgICAgIGZsaWVMaXN0ID0gW107CiAgICAgICAgICAgICAgICAgICAgICBmaWxlU2lnbkxpc3QgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjMgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihyZXMuZGF0YS5hbm5leERUT0xpc3QpOwoKICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMy5zKCk7ICEoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IF9zdGVwMy52YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICBmbGllTGlzdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGkub3JpZ2luRmlsZU5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IGkuZmlsZU5hbWUKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMKCiAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMy5lKGVycik7CiAgICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IzLmYoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3I0ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIocmVzLmRhdGEuZW50cnVzdExpc3QuZW50cmllcygpKTsKCiAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjQucygpOyAhKF9zdGVwNCA9IF9pdGVyYXRvcjQubigpKS5kb25lOykgewogICAgICAgICAgICAgICAgICAgICAgICAgIF9zdGVwNCR2YWx1ZSA9IF9zbGljZWRUb0FycmF5KF9zdGVwNC52YWx1ZSwgMiksIGluZGV4ID0gX3N0ZXA0JHZhbHVlWzBdLCBqID0gX3N0ZXA0JHZhbHVlWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVTaWduTGlzdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWxOYW1lOiBqLnJlYWxOYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zZXJJZDogai5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvd0xlZnRYOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93TGVmdFk6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcklkOiBfdGhpczkub3JkZXJJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyRG9jdW1lbnRJZDogJycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlOiAnJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdmVyVHlwZTogMgogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yNC5lKGVycik7CiAgICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3I0LmYoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBfdGhpczkuZmxpZUxpc3QgPSBmbGllTGlzdDsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzOS5maWxlU2lnbkxpc3QgPSBmaWxlU2lnbkxpc3Q7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICAgICAgfSkpOwoKICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g1KSB7CiAgICAgICAgICAgIHJldHVybiBfcmVmNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfTsKICAgICAgICB9KCkpOwoKICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5kb2N1bWVudE1hdGVyaWFsVGFibGVEYXRhLmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICAgIGRvY0lkOiB0aGlzLmRvY3VtZW50TWF0ZXJpYWxUYWJsZURhdGFbaW5kZXhdLmlkLAogICAgICAgICAgICBkb2NOYW1lOiB0aGlzLmRvY3VtZW50TWF0ZXJpYWxUYWJsZURhdGFbaW5kZXhdLm9yaWdpbmFsRmlsZW5hbWUsCiAgICAgICAgICAgIHNpZ25TdGF0dXM6IHRoaXMuZG9jdW1lbnRNYXRlcmlhbFRhYmxlRGF0YVtpbmRleF0uc2lnblN0YXR1cywKICAgICAgICAgICAgY292ZXJTdGF0dXM6IHRoaXMuZG9jdW1lbnRNYXRlcmlhbFRhYmxlRGF0YVtpbmRleF0uY292ZXJTdGF0dXMKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLmRvY0luZm8ucHVzaChkYXRhKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6K+35YWI5LiK5Lyg5paH5LmmJyk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmlofku7blpJrpgInkuIrkvKAKICAgIHVwTG9hZEZpbGU6IGZ1bmN0aW9uIHVwTG9hZEZpbGUoZSkgewogICAgICB2YXIgdHlwZUxpc3QgPSBbJy5kb2MnLCAnLnBkZicsICcuZG9jeCcsICcuRE9DJywgJ0RPQ1gnXTsKICAgICAgdmFyIGZpbGUgPSBlLmZpbGU7CiAgICAgIHZhciBmaWxlVHlwZSA9IGZpbGUubmFtZS5zdWJzdHJpbmcoZmlsZS5uYW1lLmxhc3RJbmRleE9mKCcuJykpOwogICAgICB2YXIgaXNGaWxlID0gdHlwZUxpc3QuaW5kZXhPZihmaWxlVHlwZSkgIT09IC0xOwogICAgICB2YXIgaXNMdDE1TSA9IGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgMTU7CiAgICAgIHZhciBkYXRhVHlwZSA9IGUuZGF0YS50eXBlOwoKICAgICAgaWYgKHRoaXMuZ2V0RmlsZVR5cGUoZS5maWxlLm5hbWUpICE9PSAnd29yZCcgJiYgdGhpcy5nZXRGaWxlVHlwZShlLmZpbGUubmFtZSkgIT09ICdwZGYnKSB7CiAgICAgICAgdGhpcy4kZnVuLm1zZygn6K+35LiK5LygcGRm44CBZG9j44CBZG9jeOagvOW8j+eahOaWh+S7tiEnLCAnZXJyb3InKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIGlmICghaXNMdDE1TSkgewogICAgICAgIHRoaXMuJGZ1bi5tc2coJ+S4iuS8oOaWh+S7tueahOWkp+Wwj+W6lOWwj+S6jjE1TScsICdlcnJvcicpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZmlsZVNob3cubGVuZ3RoID4gMjkpIHsKICAgICAgICB0aGlzLiRmdW4ubXNnKCfkuIrkvKDmlofku7bnmoTmnIDlpJozMOS7vScsICdlcnJvcicpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgaWYgKGZpbGUuc2l6ZSA9PT0gMCkgewogICAgICAgIHRoaXMuJGZ1bi5tc2coJ+S4jeiDveS4iuS8oOepuueZveaWh+S7ticsICdlcnJvcicpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgdGhpcy51cEZpbGVMaXN0LnB1c2goZS5maWxlKTsKICAgICAgdGhpcy50eXBlID0gZGF0YVR5cGU7CgogICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy51cEZpbGVMaXN0Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgIGlmICh0aGlzLmZpbGVTaG93LmluZGV4T2YodGhpcy51cEZpbGVMaXN0W2luZGV4XS5uYW1lKSA8IDApIHsKICAgICAgICAgIHRoaXMuZmlsZVNob3cucHVzaCh0aGlzLnVwRmlsZUxpc3RbaW5kZXhdLm5hbWUpOwogICAgICAgIH0KICAgICAgfSAvLyBpZiAoIXRoaXMuaXNVcCkgewogICAgICAvLyAgIHRoaXMuaXNVcCA9IHRydWUKICAgICAgLy8gICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgLy8gICAgIHRoaXMudXBMb2FkQWxsKGRhdGFUeXBlKQogICAgICAvLyAgIH0sIDEwMDApCiAgICAgIC8vIH0KCiAgICB9LAogICAgdXBMb2FkQWxsOiBmdW5jdGlvbiB1cExvYWRBbGwodHlwZSkgewogICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CgogICAgICB0aGlzLiRmdW4ubXNnKCflvIDlp4vkuIrkvKAnLCAnc3VjY2VzcycpOwogICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKCiAgICAgIGZvciAodmFyIGkgaW4gdGhpcy51cEZpbGVMaXN0KSB7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgdGhpcy51cEZpbGVMaXN0W2ldKTsKICAgICAgfQoKICAgICAgZm9ybURhdGEuYXBwZW5kKCdvcmRlcklkJywgdGhpcy5vcmRlcklkKTsKICAgICAgdGhpcy4kYXhpb3MoJ29yZy9vcmRlci1kb2N1bWVudCcsIGZvcm1EYXRhLCB7CiAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzID09PSB0cnVlKSB7CiAgICAgICAgICB2YXIgbGlzdCA9IFtdOwoKICAgICAgICAgIGlmICh0eXBlID09PSAncHVzaCcpIHsKICAgICAgICAgICAgbGlzdCA9IF90aGlzMTAuZG9jSW5mb0xpc3Q7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIF9pdGVyYXRvcjUgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihyZXMuZGF0YSksCiAgICAgICAgICAgICAgX3N0ZXA1OwoKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yNS5zKCk7ICEoX3N0ZXA1ID0gX2l0ZXJhdG9yNS5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgdmFyIF9pMiA9IF9zdGVwNS52YWx1ZTsKICAgICAgICAgICAgICBsaXN0LnB1c2goewogICAgICAgICAgICAgICAgZG9jSWQ6IF9pMi5pZCwKICAgICAgICAgICAgICAgIGRvY05hbWU6IF9pMi5vcmlnaW5hbEZpbGVuYW1lLAogICAgICAgICAgICAgICAgc2lnblN0YXR1czogX2kyLnNpZ25TdGF0dXMKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIF9pdGVyYXRvcjUuZShlcnIpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgX2l0ZXJhdG9yNS5mKCk7CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXMxMC5kb2NJbmZvTGlzdCA9IGxpc3Q7CgogICAgICAgICAgaWYgKHR5cGUgIT09ICdwdXNoJykgewogICAgICAgICAgICBfdGhpczEwLmdldERvY0ltZyhyZXMuZGF0YVswXS5pZCk7CiAgICAgICAgICB9CgogICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxpc3QubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICAgIF90aGlzMTAuZmlsZVNob3dMaXN0RGF0YS5wdXNoKGxpc3RbaW5kZXhdKTsKICAgICAgICAgIH0gLy8gdGhpcy5maWxlU2hvd0xpc3REYXRhID0gbGlzdAoKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMxMC4kZnVuLm1zZygn5LiK5Lyg5aSx6LSl77yBJywgJ2Vycm9yJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy51cEZpbGVMaXN0ID0gW107CiAgICAgIHRoaXMuaXNVcCA9IGZhbHNlOwogICAgfSwKICAgIGdldERvY0ltZzogZnVuY3Rpb24gZ2V0RG9jSW1nKGlkKSB7CiAgICAgIHZhciBfdGhpczExID0gdGhpczsKCiAgICAgIGRlLmdldEZpbGVJbWcoewogICAgICAgIGlkOiBpZAogICAgICB9KS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmNiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KHJlcykgewogICAgICAgICAgdmFyIGxpc3QsIGltZywgaTsKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBpZiAoIShyZXMuZGF0YS5zdWNjZXNzID09PSB0cnVlKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGxpc3QgPSByZXMuZGF0YS5kYXRhLmlkczsKICAgICAgICAgICAgICAgICAgaW1nID0gW107CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny50MCA9IF9yZWdlbmVyYXRvclJ1bnRpbWUua2V5cyhsaXN0KTsKCiAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgIGlmICgoX2NvbnRleHQ3LnQxID0gX2NvbnRleHQ3LnQwKCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBpID0gX2NvbnRleHQ3LnQxLnZhbHVlOwogICAgICAgICAgICAgICAgICBfY29udGV4dDcudDIgPSBpbWc7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTEuZ2V0SW1nKGxpc3RbaV0pOwoKICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3LnQzID0gX2NvbnRleHQ3LnNlbnQ7CgogICAgICAgICAgICAgICAgICBfY29udGV4dDcudDIucHVzaC5jYWxsKF9jb250ZXh0Ny50MiwgX2NvbnRleHQ3LnQzKTsKCiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgX3RoaXMxMS5pbWdMaXN0ID0gaW1nOwogICAgICAgICAgICAgICAgICBfdGhpczExLmlzU2l6ZSA9IHJlcy5kYXRhLmRhdGEucGFwZXJUeXBlID09PSAnQTMnID8gMiA6IDE7CgogICAgICAgICAgICAgICAgICBfdGhpczExLmdldFNpZ25MaXN0KGlkKTsKCiAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlNyk7CiAgICAgICAgfSkpOwoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94NikgewogICAgICAgICAgcmV0dXJuIF9yZWY2LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSgpKTsKICAgIH0sCiAgICBnZXRTaWduTGlzdDogZnVuY3Rpb24gZ2V0U2lnbkxpc3QoaWQpIHsKICAgICAgdmFyIF90aGlzMTIgPSB0aGlzOwoKICAgICAgZGUuZ2V0U2lnbkRpdih7CiAgICAgICAgb3JkZXJEb2N1bWVudElkOiBpZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MgPT09IHRydWUpIHsKICAgICAgICAgIGlmIChyZXMuZGF0YSAhPSBudWxsIHx8IHJlcy5kYXRhLmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgICB2YXIgbGlzdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEpKTsKICAgICAgICAgICAgX3RoaXMxMi5zaWduTGlzdCA9IGxpc3Q7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjYW5jZWxVcGxvYWRpbmc6IGZ1bmN0aW9uIGNhbmNlbFVwbG9hZGluZygpIHsKICAgICAgdGhpcy51cGxvYWRNYXRlcmlhbERpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICBhZmZpcm1VcGxvYWRpbmc6IGZ1bmN0aW9uIGFmZmlybVVwbG9hZGluZygpIHsKICAgICAgdmFyIF90aGlzMTMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuZmlsZVNob3cubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMuJGZ1bi5tc2coJ+W8gOWni+S4iuS8oCcsICdzdWNjZXNzJyk7CiAgICAgICAgdmFyIHR5cGUgPSB0aGlzLnR5cGU7CiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CgogICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy51cEZpbGVMaXN0KSB7CiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCB0aGlzLnVwRmlsZUxpc3RbaV0pOwogICAgICAgIH0KCiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdvcmRlcklkJywgdGhpcy5vcmRlcklkKTsKICAgICAgICB0aGlzLiRheGlvcygnb3JnL29yZGVyLWRvY3VtZW50JywgZm9ybURhdGEsIHsKICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MgPT09IHRydWUpIHsKICAgICAgICAgICAgdmFyIGxpc3QgPSBbXTsKCiAgICAgICAgICAgIGlmICh0eXBlID09PSAncHVzaCcpIHsKICAgICAgICAgICAgICBsaXN0ID0gX3RoaXMxMy5kb2NJbmZvTGlzdDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIF9pdGVyYXRvcjYgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihyZXMuZGF0YSksCiAgICAgICAgICAgICAgICBfc3RlcDY7CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yNi5zKCk7ICEoX3N0ZXA2ID0gX2l0ZXJhdG9yNi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICB2YXIgX2k0ID0gX3N0ZXA2LnZhbHVlOwogICAgICAgICAgICAgICAgbGlzdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgZG9jSWQ6IF9pNC5pZCwKICAgICAgICAgICAgICAgICAgZG9jTmFtZTogX2k0Lm9yaWdpbmFsRmlsZW5hbWUsCiAgICAgICAgICAgICAgICAgIHNpZ25TdGF0dXM6IF9pNC5zaWduU3RhdHVzCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgIF9pdGVyYXRvcjYuZShlcnIpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIF9pdGVyYXRvcjYuZigpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfdGhpczEzLmRvY0luZm9MaXN0ID0gbGlzdDsKCiAgICAgICAgICAgIGlmICh0eXBlICE9PSAncHVzaCcpIHsKICAgICAgICAgICAgICBfdGhpczEzLmdldERvY0ltZyhyZXMuZGF0YVswXS5pZCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsaXN0Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgICAgIF90aGlzMTMuZmlsZVNob3dMaXN0RGF0YS5wdXNoKGxpc3RbaW5kZXhdKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3RoaXMxMy5kb2NJbmZvID0gW107CiAgICAgICAgICAgIGRlLmdldEVudHJ1c3RJbmZvKHsKICAgICAgICAgICAgICBvcmRlcklkOiBfdGhpczEzLm9yZGVySWQKICAgICAgICAgICAgfSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB2YXIgX3JlZjcgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOChyZXMpIHsKICAgICAgICAgICAgICAgIHZhciBmbGllTGlzdCwgZmlsZVNpZ25MaXN0LCBfaXRlcmF0b3I3LCBfc3RlcDcsIF9pMywgX2l0ZXJhdG9yOCwgX3N0ZXA4LCBfc3RlcDgkdmFsdWUsIF9pbmRleDIsIGo7CgogICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgICAgICAgIGZsaWVMaXN0ID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVNpZ25MaXN0ID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yNyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHJlcy5kYXRhLmFubmV4RFRPTGlzdCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjcucygpOyAhKF9zdGVwNyA9IF9pdGVyYXRvcjcubigpKS5kb25lOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaTMgPSBfc3RlcDcudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsaWVMaXN0LnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IF9pMy5vcmlnaW5GaWxlTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IF9pMy5maWxlTmFtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCgogICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yNy5lKGVycik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjcuZigpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yOCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHJlcy5kYXRhLmVudHJ1c3RMaXN0LmVudHJpZXMoKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjgucygpOyAhKF9zdGVwOCA9IF9pdGVyYXRvcjgubigpKS5kb25lOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3RlcDgkdmFsdWUgPSBfc2xpY2VkVG9BcnJheShfc3RlcDgudmFsdWUsIDIpLCBfaW5kZXgyID0gX3N0ZXA4JHZhbHVlWzBdLCBqID0gX3N0ZXA4JHZhbHVlWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlU2lnbkxpc3QucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhbE5hbWU6IGoucmVhbE5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9zZXJJZDogai5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb3dMZWZ0WDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb3dMZWZ0WTogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcklkOiBfdGhpczEzLm9yZGVySWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJEb2N1bWVudElkOiAnJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlOiAnJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3ZlclR5cGU6IDIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3I4LmUoZXJyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yOC5mKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEzLmZsaWVMaXN0ID0gZmxpZUxpc3Q7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMy5maWxlU2lnbkxpc3QgPSBmaWxlU2lnbkxpc3Q7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU4KTsKICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g3KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KCkpOwogICAgICAgICAgICBfdGhpczEzLmRvY0luZm8gPSBfdGhpczEzLmZpbGVTaG93TGlzdERhdGE7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpczEzLiRmdW4ubXNnKCfkuIrkvKDlpLHotKXvvIEnLCAnZXJyb3InKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB0aGlzLnVwRmlsZUxpc3QgPSBbXTsKICAgICAgICB0aGlzLmlzVXAgPSBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7fkuIrkvKDmlofku7YnKTsKICAgICAgfSAvLyBjb25zb2xlLmxvZyh0aGlzLnVwRmlsZUxpc3QsICctLS0tLS0tLS0tLS0tLS0tLS0wLS0tLS0tLS0tLS0tLS0tLS0tLS0tLScpCiAgICAgIC8vIGlmICh0aGlzLmZpbGVTaG93TGlzdERhdGEubGVuZ3RoID4gMCkgewogICAgICAvLyAgIHRoaXMudXBsb2FkTWF0ZXJpYWxEaWFsb2dWaXNpYmxlID0gZmFsc2UKICAgICAgLy8gICB0aGlzLmRvY0luZm8gPSBbXQogICAgICAvLyAgIGRlLmdldEVudHJ1c3RJbmZvKHsgb3JkZXJJZDogdGhpcy5vcmRlcklkIH0pLnRoZW4oYXN5bmMocmVzKSA9PiB7CiAgICAgIC8vICAgICBjb25zb2xlLmxvZyhyZXMpCiAgICAgIC8vICAgICBpZiAocmVzLmNvZGUgPT09IDIwMCkgewogICAgICAvLyAgICAgICBjb25zdCBmbGllTGlzdCA9IFtdCiAgICAgIC8vICAgICAgIGNvbnN0IGZpbGVTaWduTGlzdCA9IFtdCiAgICAgIC8vICAgICAgIGZvciAoY29uc3QgaSBvZiByZXMuZGF0YS5hbm5leERUT0xpc3QpIHsKICAgICAgLy8gICAgICAgICBmbGllTGlzdC5wdXNoKHsKICAgICAgLy8gICAgICAgICAgIG5hbWU6IGkub3JpZ2luRmlsZU5hbWUsCiAgICAgIC8vICAgICAgICAgICB1cmw6IGkuZmlsZU5hbWUKICAgICAgLy8gICAgICAgICB9KQogICAgICAvLyAgICAgICB9CiAgICAgIC8vICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwogICAgICAvLyAgICAgICBmb3IgKGNvbnN0IFtpbmRleCwgal0gb2YgcmVzLmRhdGEuZW50cnVzdExpc3QuZW50cmllcygpKSB7CiAgICAgIC8vICAgICAgICAgZmlsZVNpZ25MaXN0LnB1c2goewogICAgICAvLyAgICAgICAgICAgcmVhbE5hbWU6IGoucmVhbE5hbWUsCiAgICAgIC8vICAgICAgICAgICBwcm9wb3NlcklkOiBqLmlkLAogICAgICAvLyAgICAgICAgICAgbG93TGVmdFg6IDAsCiAgICAgIC8vICAgICAgICAgICBsb3dMZWZ0WTogMCwKICAgICAgLy8gICAgICAgICAgIG9yZGVySWQ6IHRoaXMub3JkZXJJZCwKICAgICAgLy8gICAgICAgICAgIG9yZGVyRG9jdW1lbnRJZDogJycsCiAgICAgIC8vICAgICAgICAgICBwYWdlOiAnJywKICAgICAgLy8gICAgICAgICAgIGNvdmVyVHlwZTogMgogICAgICAvLyAgICAgICAgIH0pCiAgICAgIC8vICAgICAgIH0KICAgICAgLy8gICAgICAgdGhpcy5mbGllTGlzdCA9IGZsaWVMaXN0CiAgICAgIC8vICAgICAgIHRoaXMuZmlsZVNpZ25MaXN0ID0gZmlsZVNpZ25MaXN0CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgfSkKICAgICAgLy8gICB0aGlzLmRvY0luZm8gPSB0aGlzLmZpbGVTaG93TGlzdERhdGEKICAgICAgLy8gfSBlbHNlIHsKICAgICAgLy8gICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7fkuIrkvKDmlofku7YnKQogICAgICAvLyB9CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZG9jSW5mbywgdGhpcy5maWxlU2hvd0xpc3REYXRhKQoKICAgIH0KICB9Cn07"},null]}